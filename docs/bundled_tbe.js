(function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l=typeof require=="function"&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}var o=typeof require=="function"&&require;for(var a=0;a<i.length;a++)r(i[a]);return r})({1:[function(e,t,n){(function(n){"use strict";function i(e,t){if(e===t){return 0}var n=e.length;var i=t.length;for(var r=0,o=Math.min(n,i);r<o;++r){if(e[r]!==t[r]){n=e[r];i=t[r];break}}if(n<i){return-1}if(i<n){return 1}return 0}function r(e){if(n.Buffer&&typeof n.Buffer.isBuffer==="function"){return n.Buffer.isBuffer(e)}return!!(e!=null&&e._isBuffer)}var o=e("util/");var a=Object.prototype.hasOwnProperty;var s=Array.prototype.slice;var l=function(){return function e(){}.name==="foo"}();function u(e){return Object.prototype.toString.call(e)}function c(e){if(r(e)){return false}if(typeof n.ArrayBuffer!=="function"){return false}if(typeof ArrayBuffer.isView==="function"){return ArrayBuffer.isView(e)}if(!e){return false}if(e instanceof DataView){return true}if(e.buffer&&e.buffer instanceof ArrayBuffer){return true}return false}var d=t.exports=y;var f=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(!o.isFunction(e)){return}if(l){return e.name}var t=e.toString();var n=t.match(f);return n&&n[1]}d.AssertionError=function e(t){this.name="AssertionError";this.actual=t.actual;this.expected=t.expected;this.operator=t.operator;if(t.message){this.message=t.message;this.generatedMessage=false}else{this.message=m(this);this.generatedMessage=true}var n=t.stackStartFunction||g;if(Error.captureStackTrace){Error.captureStackTrace(this,n)}else{var i=new Error;if(i.stack){var r=i.stack;var o=p(n);var a=r.indexOf("\n"+o);if(a>=0){var s=r.indexOf("\n",a+1);r=r.substring(s+1)}this.stack=r}}};o.inherits(d.AssertionError,Error);function h(e,t){if(typeof e==="string"){return e.length<t?e:e.slice(0,t)}else{return e}}function v(e){if(l||!o.isFunction(e)){return o.inspect(e)}var t=p(e);var n=t?": "+t:"";return"[Function"+n+"]"}function m(e){return h(v(e.actual),128)+" "+e.operator+" "+h(v(e.expected),128)}function g(e,t,n,i,r){throw new d.AssertionError({message:n,actual:e,expected:t,operator:i,stackStartFunction:r})}d.fail=g;function y(e,t){if(!e)g(e,true,t,"==",d.ok)}d.ok=y;d.equal=function e(t,n,i){if(t!=n)g(t,n,i,"==",d.equal)};d.notEqual=function e(t,n,i){if(t==n){g(t,n,i,"!=",d.notEqual)}};d.deepEqual=function e(t,n,i){if(!b(t,n,false)){g(t,n,i,"deepEqual",d.deepEqual)}};d.deepStrictEqual=function e(t,n,i){if(!b(t,n,true)){g(t,n,i,"deepStrictEqual",d.deepStrictEqual)}};function b(e,t,n,a){if(e===t){return true}else if(r(e)&&r(t)){return i(e,t)===0}else if(o.isDate(e)&&o.isDate(t)){return e.getTime()===t.getTime()}else if(o.isRegExp(e)&&o.isRegExp(t)){return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase}else if((e===null||typeof e!=="object")&&(t===null||typeof t!=="object")){return n?e===t:e==t}else if(c(e)&&c(t)&&u(e)===u(t)&&!(e instanceof Float32Array||e instanceof Float64Array)){return i(new Uint8Array(e.buffer),new Uint8Array(t.buffer))===0}else if(r(e)!==r(t)){return false}else{a=a||{actual:[],expected:[]};var s=a.actual.indexOf(e);if(s!==-1){if(s===a.expected.indexOf(t)){return true}}a.actual.push(e);a.expected.push(t);return w(e,t,n,a)}}function x(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function w(e,t,n,i){if(e===null||e===undefined||t===null||t===undefined)return false;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return false;var r=x(e);var a=x(t);if(r&&!a||!r&&a)return false;if(r){e=s.call(e);t=s.call(t);return b(e,t,n)}var l=T(e);var u=T(t);var c,d;if(l.length!==u.length)return false;l.sort();u.sort();for(d=l.length-1;d>=0;d--){if(l[d]!==u[d])return false}for(d=l.length-1;d>=0;d--){c=l[d];if(!b(e[c],t[c],n,i))return false}return true}d.notDeepEqual=function e(t,n,i){if(b(t,n,false)){g(t,n,i,"notDeepEqual",d.notDeepEqual)}};d.notDeepStrictEqual=k;function k(e,t,n){if(b(e,t,true)){g(e,t,n,"notDeepStrictEqual",k)}}d.strictEqual=function e(t,n,i){if(t!==n){g(t,n,i,"===",d.strictEqual)}};d.notStrictEqual=function e(t,n,i){if(t===n){g(t,n,i,"!==",d.notStrictEqual)}};function S(e,t){if(!e||!t){return false}if(Object.prototype.toString.call(t)=="[object RegExp]"){return t.test(e)}try{if(e instanceof t){return true}}catch(e){}if(Error.isPrototypeOf(t)){return false}return t.call({},e)===true}function E(e){var t;try{e()}catch(e){t=e}return t}function C(e,t,n,i){var r;if(typeof t!=="function"){throw new TypeError('"block" argument must be a function')}if(typeof n==="string"){i=n;n=null}r=E(t);i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:".");if(e&&!r){g(r,n,"Missing expected exception"+i)}var a=typeof i==="string";var s=!e&&o.isError(r);var l=!e&&r&&!n;if(s&&a&&S(r,n)||l){g(r,n,"Got unwanted exception"+i)}if(e&&r&&n&&!S(r,n)||!e&&r){throw r}}d.throws=function(e,t,n){C(true,e,t,n)};d.doesNotThrow=function(e,t,n){C(false,e,t,n)};d.ifError=function(e){if(e)throw e};var T=Object.keys||function(e){var t=[];for(var n in e){if(a.call(e,n))t.push(n)}return t}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"util/":16}],2:[function(e,t,n){(function(i,r){if(typeof define==="function"&&define.amd){define(["module","select"],r)}else if(typeof n!=="undefined"){r(t,e("select"))}else{var o={exports:{}};r(o,i.select);i.clipboardAction=o.exports}})(this,function(e,t){"use strict";var n=i(t);function i(e){return e&&e.__esModule?e:{default:e}}var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,n,i){if(n)e(t.prototype,n);if(i)e(t,i);return t}}();var s=function(){function e(t){o(this,e);this.resolveOptions(t);this.initSelection()}a(e,[{key:"resolveOptions",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.action=t.action;this.container=t.container;this.emitter=t.emitter;this.target=t.target;this.text=t.text;this.trigger=t.trigger;this.selectedText=""}},{key:"initSelection",value:function e(){if(this.text){this.selectFake()}else if(this.target){this.selectTarget()}}},{key:"selectFake",value:function e(){var t=this;var i=document.documentElement.getAttribute("dir")=="rtl";this.removeFake();this.fakeHandlerCallback=function(){return t.removeFake()};this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||true;this.fakeElem=document.createElement("textarea");this.fakeElem.style.fontSize="12pt";this.fakeElem.style.border="0";this.fakeElem.style.padding="0";this.fakeElem.style.margin="0";this.fakeElem.style.position="absolute";this.fakeElem.style[i?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=r+"px";this.fakeElem.setAttribute("readonly","");this.fakeElem.value=this.text;this.container.appendChild(this.fakeElem);this.selectedText=(0,n.default)(this.fakeElem);this.copyText()}},{key:"removeFake",value:function e(){if(this.fakeHandler){this.container.removeEventListener("click",this.fakeHandlerCallback);this.fakeHandler=null;this.fakeHandlerCallback=null}if(this.fakeElem){this.container.removeChild(this.fakeElem);this.fakeElem=null}}},{key:"selectTarget",value:function e(){this.selectedText=(0,n.default)(this.target);this.copyText()}},{key:"copyText",value:function e(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=false}this.handleResult(t)}},{key:"handleResult",value:function e(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function e(){if(this.trigger){this.trigger.focus()}window.getSelection().removeAllRanges()}},{key:"destroy",value:function e(){this.removeFake()}},{key:"action",set:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"copy";this._action=t;if(this._action!=="copy"&&this._action!=="cut"){throw new Error('Invalid "action" value, use either "copy" or "cut"')}},get:function e(){return this._action}},{key:"target",set:function e(t){if(t!==undefined){if(t&&(typeof t==="undefined"?"undefined":r(t))==="object"&&t.nodeType===1){if(this.action==="copy"&&t.hasAttribute("disabled")){throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute')}if(this.action==="cut"&&(t.hasAttribute("readonly")||t.hasAttribute("disabled"))){throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}this._target=t}else{throw new Error('Invalid "target" value, use a valid Element')}}},get:function e(){return this._target}}]);return e}();e.exports=s})},{select:12}],3:[function(e,t,n){(function(i,r){if(typeof define==="function"&&define.amd){define(["module","./clipboard-action","tiny-emitter","good-listener"],r)}else if(typeof n!=="undefined"){r(t,e("./clipboard-action"),e("tiny-emitter"),e("good-listener"))}else{var o={exports:{}};r(o,i.clipboardAction,i.tinyEmitter,i.goodListener);i.clipboard=o.exports}})(this,function(e,t,n,i){"use strict";var r=s(t);var o=s(n);var a=s(i);function s(e){return e&&e.__esModule?e:{default:e}}var l=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,n,i){if(n)e(t.prototype,n);if(i)e(t,i);return t}}();function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var p=function(e){f(t,e);function t(e,n){u(this,t);var i=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.resolveOptions(n);i.listenClick(e);return i}c(t,[{key:"resolveOptions",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.action=typeof t.action==="function"?t.action:this.defaultAction;this.target=typeof t.target==="function"?t.target:this.defaultTarget;this.text=typeof t.text==="function"?t.text:this.defaultText;this.container=l(t.container)==="object"?t.container:document.body}},{key:"listenClick",value:function e(t){var n=this;this.listener=(0,a.default)(t,"click",function(e){return n.onClick(e)})}},{key:"onClick",value:function e(t){var n=t.delegateTarget||t.currentTarget;if(this.clipboardAction){this.clipboardAction=null}this.clipboardAction=new r.default({action:this.action(n),target:this.target(n),text:this.text(n),container:this.container,trigger:n,emitter:this})}},{key:"defaultAction",value:function e(t){return h("action",t)}},{key:"defaultTarget",value:function e(t){var n=h("target",t);if(n){return document.querySelector(n)}}},{key:"defaultText",value:function e(t){return h("text",t)}},{key:"destroy",value:function e(){this.listener.destroy();if(this.clipboardAction){this.clipboardAction.destroy();this.clipboardAction=null}}}],[{key:"isSupported",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:["copy","cut"];var n=typeof t==="string"?[t]:t;var i=!!document.queryCommandSupported;n.forEach(function(e){i=i&&!!document.queryCommandSupported(e)});return i}}]);return t}(o.default);function h(e,t){var n="data-clipboard-"+e;if(!t.hasAttribute(n)){return}return t.getAttribute(n)}e.exports=p})},{"./clipboard-action":2,"good-listener":7,"tiny-emitter":14}],4:[function(e,t,n){var i=9;if(typeof Element!=="undefined"&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}function o(e,t){while(e&&e.nodeType!==i){if(typeof e.matches==="function"&&e.matches(t)){return e}e=e.parentNode}}t.exports=o},{}],5:[function(e,t,n){var i=e("./closest");function r(e,t,n,i,r){var a=o.apply(this,arguments);e.addEventListener(n,a,r);return{destroy:function(){e.removeEventListener(n,a,r)}}}function o(e,t,n,r){return function(n){n.delegateTarget=i(n.target,t);if(n.delegateTarget){r.call(e,n)}}}t.exports=r},{"./closest":4}],6:[function(e,t,n){n.node=function(e){return e!==undefined&&e instanceof HTMLElement&&e.nodeType===1};n.nodeList=function(e){var t=Object.prototype.toString.call(e);return e!==undefined&&(t==="[object NodeList]"||t==="[object HTMLCollection]")&&"length"in e&&(e.length===0||n.node(e[0]))};n.string=function(e){return typeof e==="string"||e instanceof String};n.fn=function(e){var t=Object.prototype.toString.call(e);return t==="[object Function]"}},{}],7:[function(e,t,n){var i=e("./is");var r=e("delegate");function o(e,t,n){if(!e&&!t&&!n){throw new Error("Missing required arguments")}if(!i.string(t)){throw new TypeError("Second argument must be a String")}if(!i.fn(n)){throw new TypeError("Third argument must be a Function")}if(i.node(e)){return a(e,t,n)}else if(i.nodeList(e)){return s(e,t,n)}else if(i.string(e)){return l(e,t,n)}else{throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}}function a(e,t,n){e.addEventListener(t,n);return{destroy:function(){e.removeEventListener(t,n)}}}function s(e,t,n){Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)});return{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function l(e,t,n){return r(document.body,e,t,n)}t.exports=o},{"./is":6,delegate:5}],8:[function(e,t,n){if(typeof Object.create==="function"){t.exports=function e(t,n){t.super_=n;t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}else{t.exports=function e(t,n){t.super_=n;var i=function(){};i.prototype=n.prototype;t.prototype=new i;t.prototype.constructor=t}}},{}],9:[function(e,t,n){(function(e){"use strict";if(!e){return}var i=function(){var t=e.document.createTextNode("");if(t.ownerDocument!==e.document&&typeof e.wrap==="function"&&e.wrap(t)===t){return e.wrap(e)}return e}(),r=i.document,o=i.DocumentFragment||F,a=i.SVGElement||F,s=i.SVGSVGElement||F,l=i.SVGElementInstance||F,u=i.HTMLElement||i.Element,c=i.PointerEvent||i.MSPointerEvent,d,f=Math.hypot||function(e,t){return Math.sqrt(e*e+t*t)},p={},h=[],v=[],m=[],g=false,y={},b={base:{accept:null,actionChecker:null,styleCursor:true,preventDefault:"auto",origin:{x:0,y:0},deltaSource:"page",allowFrom:null,ignoreFrom:null,_context:r,dropChecker:null},drag:{enabled:false,manualStart:true,max:Infinity,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,axis:"xy"},drop:{enabled:false,accept:null,overlap:"pointer"},resize:{enabled:false,manualStart:false,max:Infinity,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,square:false,preserveAspectRatio:false,axis:"xy",margin:NaN,edges:null,invert:"none"},gesture:{manualStart:false,enabled:false,max:Infinity,maxPerElement:1,restrict:null},perAction:{manualStart:false,max:Infinity,maxPerElement:1,snap:{enabled:false,endOnly:false,range:Infinity,targets:null,offsets:null,relativePoints:null},restrict:{enabled:false,endOnly:false},autoScroll:{enabled:false,container:null,margin:60,speed:300},inertia:{enabled:false,resistance:10,minSpeed:100,endSpeed:10,allowResume:true,zeroResumeDelta:true,smoothEndDuration:300}},_holdDuration:600},x={interaction:null,i:null,x:0,y:0,scroll:function(){var e=x.interaction.target.options[x.interaction.prepared.name].autoScroll,t=e.container||ue(x.interaction.element),n=(new Date).getTime(),i=(n-x.prevTimeX)/1e3,r=(n-x.prevTimeY)/1e3,o,a,s,l;if(e.velocity){o=e.velocity.x;a=e.velocity.y}else{o=a=e.speed}s=o*i;l=a*r;if(s>=1||l>=1){if(H(t)){t.scrollBy(x.x*s,x.y*l)}else if(t){t.scrollLeft+=x.x*s;t.scrollTop+=x.y*l}if(s>=1)x.prevTimeX=n;if(l>=1)x.prevTimeY=n}if(x.isScrolling){j(x.i);x.i=_(x.scroll)}},isScrolling:false,prevTimeX:0,prevTimeY:0,start:function(e){x.isScrolling=true;j(x.i);x.interaction=e;x.prevTimeX=(new Date).getTime();x.prevTimeY=(new Date).getTime();x.i=_(x.scroll)},stop:function(){x.isScrolling=false;j(x.i)}},w="ontouchstart"in i||i.DocumentTouch&&r instanceof i.DocumentTouch,k=c&&!/Chrome/.test(navigator.userAgent),S=w||k?20:10,E=1,C=0,T=Infinity,D=r.all&&!i.atob?{drag:"move",resizex:"e-resize",resizey:"s-resize",resizexy:"se-resize",resizetop:"n-resize",resizeleft:"w-resize",resizebottom:"s-resize",resizeright:"e-resize",resizetopleft:"se-resize",resizebottomright:"se-resize",resizetopright:"ne-resize",resizebottomleft:"ne-resize",gesture:""}:{drag:"move",resizex:"ew-resize",resizey:"ns-resize",resizexy:"nwse-resize",resizetop:"ns-resize",resizeleft:"ew-resize",resizebottom:"ns-resize",resizeright:"ew-resize",resizetopleft:"nwse-resize",resizebottomright:"nwse-resize",resizetopright:"nesw-resize",resizebottomleft:"nesw-resize",gesture:""},B={drag:true,resize:true,gesture:true},A="onmousewheel"in r?"mousewheel":"wheel",O=["dragstart","dragmove","draginertiastart","dragend","dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop","resizestart","resizemove","resizeinertiastart","resizeend","gesturestart","gesturemove","gestureinertiastart","gestureend","down","move","up","cancel","tap","doubletap","hold"],N={},I=navigator.appName=="Opera"&&w&&navigator.userAgent.match("Presto"),P=/iP(hone|od|ad)/.test(navigator.platform)&&/OS 7[^\d]/.test(navigator.appVersion),M="matches"in Element.prototype?"matches":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",R,_=e.requestAnimationFrame,j=e.cancelAnimationFrame,z=function(){var e="attachEvent"in i&&!("addEventListener"in i),t=e?"attachEvent":"addEventListener",n=e?"detachEvent":"removeEventListener",r=e?"on":"",o=[],a=[],s=[];function l(n,i,l,u){var p=et(o,n),h=a[p];if(!h){h={events:{},typeCount:0};p=o.push(n)-1;a.push(h);s.push(e?{supplied:[],wrapped:[],useCount:[]}:null)}if(!h.events[i]){h.events[i]=[];h.typeCount++}if(!tt(h.events[i],l)){var v;if(e){var m=s[p],g=et(m.supplied,l);var y=m.wrapped[g]||function(e){if(!e.immediatePropagationStopped){e.target=e.srcElement;e.currentTarget=n;e.preventDefault=e.preventDefault||c;e.stopPropagation=e.stopPropagation||d;e.stopImmediatePropagation=e.stopImmediatePropagation||f;if(/mouse|click/.test(e.type)){e.pageX=e.clientX+ue(n).document.documentElement.scrollLeft;e.pageY=e.clientY+ue(n).document.documentElement.scrollTop}l(e)}};v=n[t](r+i,y,Boolean(u));if(g===-1){m.supplied.push(l);m.wrapped.push(y);m.useCount.push(1)}else{m.useCount[g]++}}else{v=n[t](i,l,u||false)}h.events[i].push(l);return v}}function u(t,i,l,c){var d,f=et(o,t),p=a[f],h,v,m=l;if(!p||!p.events){return}if(e){h=s[f];v=et(h.supplied,l);m=h.wrapped[v]}if(i==="all"){for(i in p.events){if(p.events.hasOwnProperty(i)){u(t,i,"all")}}return}if(p.events[i]){var g=p.events[i].length;if(l==="all"){for(d=0;d<g;d++){u(t,i,p.events[i][d],Boolean(c))}return}else{for(d=0;d<g;d++){if(p.events[i][d]===l){t[n](r+i,m,c||false);p.events[i].splice(d,1);if(e&&h){h.useCount[v]--;if(h.useCount[v]===0){h.supplied.splice(v,1);h.wrapped.splice(v,1);h.useCount.splice(v,1)}}break}}}if(p.events[i]&&p.events[i].length===0){p.events[i]=null;p.typeCount--}}if(!p.typeCount){a.splice(f,1);o.splice(f,1);s.splice(f,1)}}function c(){this.returnValue=false}function d(){this.cancelBubble=true}function f(){this.cancelBubble=true;this.immediatePropagationStopped=true}return{add:l,remove:u,useAttachEvent:e,_elements:o,_targets:a,_attachedListeners:s}}();function F(){}function L(e){if(!e||typeof e!=="object"){return false}var t=ue(e)||i;return/object|function/.test(typeof t.Element)?e instanceof t.Element:e.nodeType===1&&typeof e.nodeName==="string"}function H(e){return e===i||!!(e&&e.Window)&&e instanceof e.Window}function V(e){return!!e&&e instanceof o}function W(e){return G(e)&&typeof e.length!==undefined&&U(e.splice)}function G(e){return!!e&&typeof e==="object"}function U(e){return typeof e==="function"}function Y(e){return typeof e==="number"}function q(e){return typeof e==="boolean"}function X(e){return typeof e==="string"}function $(e){if(!X(e)){return false}r.querySelector(e);return true}function K(e,t){for(var n in t){e[n]=t[n]}return e}var J={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};function Q(e,t){for(var n in t){var i=false;for(var r in J){if(n.indexOf(r)===0&&J[r].test(n)){i=true;break}}if(!i){e[n]=t[n]}}return e}function Z(e,t){e.page=e.page||{};e.page.x=t.page.x;e.page.y=t.page.y;e.client=e.client||{};e.client.x=t.client.x;e.client.y=t.client.y;e.timeStamp=t.timeStamp}function ee(e,t,n){var i=t.length>1?pe(t):t[0];re(i,p,n);e.page.x=p.x;e.page.y=p.y;oe(i,p,n);e.client.x=p.x;e.client.y=p.y;e.timeStamp=(new Date).getTime()}function te(e,t,n){e.page.x=n.page.x-t.page.x;e.page.y=n.page.y-t.page.y;e.client.x=n.client.x-t.client.x;e.client.y=n.client.y-t.client.y;e.timeStamp=(new Date).getTime()-t.timeStamp;var i=Math.max(e.timeStamp/1e3,.001);e.page.speed=f(e.page.x,e.page.y)/i;e.page.vx=e.page.x/i;e.page.vy=e.page.y/i;e.client.speed=f(e.client.x,e.page.y)/i;e.client.vx=e.client.x/i;e.client.vy=e.client.y/i}function ne(e){return e instanceof i.Event||w&&i.Touch&&e instanceof i.Touch}function ie(e,t,n){n=n||{};e=e||"page";n.x=t[e+"X"];n.y=t[e+"Y"];return n}function re(e,t){t=t||{};if(I&&ne(e)){ie("screen",e,t);t.x+=i.scrollX;t.y+=i.scrollY}else{ie("page",e,t)}return t}function oe(e,t){t=t||{};if(I&&ne(e)){ie("screen",e,t)}else{ie("client",e,t)}return t}function ae(e){e=e||i;return{x:e.scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}function se(e){return Y(e.pointerId)?e.pointerId:e.identifier}function le(e){return e instanceof l?e.correspondingUseElement:e}function ue(e){if(H(e)){return e}var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}function ce(e){var t=e instanceof a?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}function de(e){var t=ce(e);if(!P&&t){var n=ae(ue(e));t.left+=n.x;t.right+=n.x;t.top+=n.y;t.bottom+=n.y}return t}function fe(e){var t=[];if(W(e)){t[0]=e[0];t[1]=e[1]}else{if(e.type==="touchend"){if(e.touches.length===1){t[0]=e.touches[0];t[1]=e.changedTouches[0]}else if(e.touches.length===0){t[0]=e.changedTouches[0];t[1]=e.changedTouches[1]}}else{t[0]=e.touches[0];t[1]=e.touches[1]}}return t}function pe(e){var t={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0};var n;for(var i=0;i<e.length;i++){for(n in t){t[n]+=e[i][n]}}for(n in t){t[n]/=e.length}return t}function he(e){if(!e.length&&!(e.touches&&e.touches.length>1)){return}var t=fe(e),n=Math.min(t[0].pageX,t[1].pageX),i=Math.min(t[0].pageY,t[1].pageY),r=Math.max(t[0].pageX,t[1].pageX),o=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:i,left:n,top:i,width:r-n,height:o-i}}function ve(e,t){t=t||b.deltaSource;var n=t+"X",i=t+"Y",r=fe(e);var o=r[0][n]-r[1][n],a=r[0][i]-r[1][i];return f(o,a)}function me(e,t,n){n=n||b.deltaSource;var i=n+"X",r=n+"Y",o=fe(e),a=o[0][i]-o[1][i],s=o[0][r]-o[1][r],l=180*Math.atan(s/a)/Math.PI;if(Y(t)){var u=l-t,c=u%360;if(c>315){l-=360+l/360|0*360}else if(c>135){l-=180+l/360|0*360}else if(c<-315){l+=360+l/360|0*360}else if(c<-135){l+=180+l/360|0*360}}return l}function ge(e,t){var n=e?e.options.origin:b.origin;if(n==="parent"){n=Se(t)}else if(n==="self"){n=e.getRect(t)}else if($(n)){n=ke(t,n)||{x:0,y:0}}if(U(n)){n=n(e&&t)}if(L(n)){n=de(n)}n.x="x"in n?n.x:n.left;n.y="y"in n?n.y:n.top;return n}function ye(e,t,n,i){var r=1-e;return r*r*t+2*r*e*n+e*e*i}function be(e,t,n,i,r,o,a){return{x:ye(a,e,n,r),y:ye(a,t,i,o)}}function xe(e,t,n,i){e/=i;return-n*e*(e-2)+t}function we(e,t){while(t){if(t===e){return true}t=t.parentNode}return false}function ke(e,t){var n=Se(e);while(L(n)){if(nt(n,t)){return n}n=Se(n)}return null}function Se(e){var t=e.parentNode;if(V(t)){while((t=t.host)&&V(t)){}return t}return t}function Ee(e,t){return e._context===t.ownerDocument||we(e._context,t)}function Ce(e,t,n){var i=e.options.ignoreFrom;if(!i||!L(n)){return false}if(X(i)){return it(n,i,t)}else if(L(i)){return we(i,n)}return false}function Te(e,t,n){var i=e.options.allowFrom;if(!i){return true}if(!L(n)){return false}if(X(i)){return it(n,i,t)}else if(L(i)){return we(i,n)}return false}function De(e,t){if(!t){return false}var n=t.options.drag.axis;return e==="xy"||n==="xy"||n===e}function Be(e,t){var n=e.options;if(/^resize/.test(t)){t="resize"}return n[t].snap&&n[t].snap.enabled}function Ae(e,t){var n=e.options;if(/^resize/.test(t)){t="resize"}return n[t].restrict&&n[t].restrict.enabled}function Oe(e,t){var n=e.options;if(/^resize/.test(t)){t="resize"}return n[t].autoScroll&&n[t].autoScroll.enabled}function Ne(e,t,n){var i=e.options,r=i[n.name].max,o=i[n.name].maxPerElement,a=0,s=0,l=0;for(var u=0,c=m.length;u<c;u++){var d=m[u],f=d.prepared.name,p=d.interacting();if(!p){continue}a++;if(a>=T){return false}if(d.target!==e){continue}s+=f===n.name|0;if(s>=r){return false}if(d.element===t){l++;if(f!==n.name||l>=o){return false}}}return T>0}function Ie(e){var t,n=e[0],i=n?0:-1,r,o=[],l=[],c,d,f;for(d=1;d<e.length;d++){t=e[d];if(!t||t===n){continue}if(!n){n=t;i=d;continue}if(t.parentNode===t.ownerDocument){continue}else if(n.parentNode===t.ownerDocument){n=t;i=d;continue}if(!o.length){r=n;while(r.parentNode&&r.parentNode!==r.ownerDocument){o.unshift(r);r=r.parentNode}}if(n instanceof u&&t instanceof a&&!(t instanceof s)){if(t===n.parentNode){continue}r=t.ownerSVGElement}else{r=t}l=[];while(r.parentNode!==r.ownerDocument){l.unshift(r);r=r.parentNode}f=0;while(l[f]&&l[f]===o[f]){f++}var p=[l[f-1],l[f],o[f]];c=p[0].lastChild;while(c){if(c===p[1]){n=t;i=d;o=[];break}else if(c===p[2]){break}c=c.previousSibling}}return i}function Pe(){this.target=null;this.element=null;this.dropTarget=null;this.dropElement=null;this.prevDropTarget=null;this.prevDropElement=null;this.prepared={name:null,axis:null,edges:null};this.matches=[];this.matchElements=[];this.inertiaStatus={active:false,smoothEnd:false,ending:false,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null};if(U(Function.prototype.bind)){this.boundInertiaFrame=this.inertiaFrame.bind(this);this.boundSmoothEndFrame=this.smoothEndFrame.bind(this)}else{var e=this;this.boundInertiaFrame=function(){return e.inertiaFrame()};this.boundSmoothEndFrame=function(){return e.smoothEndFrame()}}this.activeDrops={dropzones:[],elements:[],rects:[]};this.pointers=[];this.pointerIds=[];this.downTargets=[];this.downTimes=[];this.holdTimers=[];this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0};this.downEvent=null;this.downPointer={};this._eventTarget=null;this._curEventTarget=null;this.prevEvent=null;this.tapTime=0;this.prevTap=null;this.startOffset={left:0,right:0,top:0,bottom:0};this.restrictOffset={left:0,right:0,top:0,bottom:0};this.snapOffsets=[];this.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0};this.snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,targets:[],locked:false,changed:false};this.restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:null,restricted:false,changed:false};this.restrictStatus.snap=this.snapStatus;this.pointerIsDown=false;this.pointerWasMoved=false;this.gesturing=false;this.dragging=false;this.resizing=false;this.resizeAxes="xy";this.mouse=false;m.push(this)}Pe.prototype={getPageXY:function(e,t){return re(e,t,this)},getClientXY:function(e,t){return oe(e,t,this)},setEventXY:function(e,t){return ee(e,t,this)},pointerOver:function(e,t,n){if(this.prepared.name||!this.mouse){return}var i=[],r=[],o=this.element;this.addPointer(e);if(this.target&&(Ce(this.target,this.element,n)||!Te(this.target,this.element,n))){this.target=null;this.element=null;this.matches=[];this.matchElements=[]}var a=v.get(n),s=a&&!Ce(a,n,n)&&Te(a,n,n)&&He(a.getAction(e,t,this,n),a);if(s&&!Ne(a,n,s)){s=null}function l(e,t){if(e&&Ee(e,n)&&!Ce(e,n,n)&&Te(e,n,n)&&nt(n,t)){i.push(e);r.push(n)}}if(s){this.target=a;this.element=n;this.matches=[];this.matchElements=[]}else{v.forEachSelector(l);if(this.validateSelector(e,t,i,r)){this.matches=i;this.matchElements=r;this.pointerHover(e,t,this.matches,this.matchElements);z.add(n,k?d.move:"mousemove",Ve.pointerHover)}else if(this.target){if(we(o,n)){this.pointerHover(e,t,this.matches,this.matchElements);z.add(this.element,k?d.move:"mousemove",Ve.pointerHover)}else{this.target=null;this.element=null;this.matches=[];this.matchElements=[]}}}},pointerHover:function(e,t,n,i,r,o){var a=this.target;if(!this.prepared.name&&this.mouse){var s;this.setEventXY(this.curCoords,[e]);if(r){s=this.validateSelector(e,t,r,o)}else if(a){s=He(a.getAction(this.pointers[0],t,this,this.element),this.target)}if(a&&a.options.styleCursor){if(s){a._doc.documentElement.style.cursor=ze(s)}else{a._doc.documentElement.style.cursor=""}}}else if(this.prepared.name){this.checkAndPreventDefault(t,a,this.element)}},pointerOut:function(e,t,n){if(this.prepared.name){return}if(!v.get(n)){z.remove(n,k?d.move:"mousemove",Ve.pointerHover)}if(this.target&&this.target.options.styleCursor&&!this.interacting()){this.target._doc.documentElement.style.cursor=""}},selectorDown:function(e,t,n,i){var r=this,o=z.useAttachEvent?K({},t):t,a=n,s=this.addPointer(e),l;this.holdTimers[s]=setTimeout(function(){r.pointerHold(z.useAttachEvent?o:e,o,n,i)},b._holdDuration);this.pointerIsDown=true;if(this.inertiaStatus.active&&this.target.selector){while(L(a)){if(a===this.element&&He(this.target.getAction(e,t,this,this.element),this.target).name===this.prepared.name){j(this.inertiaStatus.i);this.inertiaStatus.active=false;this.collectEventTargets(e,t,n,"down");return}a=Se(a)}}if(this.interacting()){this.collectEventTargets(e,t,n,"down");return}function u(e,t,i){var o=R?i.querySelectorAll(t):undefined;if(Ee(e,a)&&!Ce(e,a,n)&&Te(e,a,n)&&nt(a,t,o)){r.matches.push(e);r.matchElements.push(a)}}this.setEventXY(this.curCoords,[e]);this.downEvent=t;while(L(a)&&!l){this.matches=[];this.matchElements=[];v.forEachSelector(u);l=this.validateSelector(e,t,this.matches,this.matchElements);a=Se(a)}if(l){this.prepared.name=l.name;this.prepared.axis=l.axis;this.prepared.edges=l.edges;this.collectEventTargets(e,t,n,"down");return this.pointerDown(e,t,n,i,l)}else{this.downTimes[s]=(new Date).getTime();this.downTargets[s]=n;Q(this.downPointer,e);Z(this.prevCoords,this.curCoords);this.pointerWasMoved=false}this.collectEventTargets(e,t,n,"down")},pointerDown:function(e,t,n,i,r){
if(!r&&!this.inertiaStatus.active&&this.pointerWasMoved&&this.prepared.name){this.checkAndPreventDefault(t,this.target,this.element);return}this.pointerIsDown=true;this.downEvent=t;var o=this.addPointer(e),a;if(this.pointerIds.length>1&&this.target._element===this.element){var s=He(r||this.target.getAction(e,t,this,this.element),this.target);if(Ne(this.target,this.element,s)){a=s}this.prepared.name=null}else if(!this.prepared.name){var l=v.get(i);if(l&&!Ce(l,i,n)&&Te(l,i,n)&&(a=He(r||l.getAction(e,t,this,i),l,n))&&Ne(l,i,a)){this.target=l;this.element=i}}var u=this.target,c=u&&u.options;if(u&&(r||!this.prepared.name)){a=a||He(r||u.getAction(e,t,this,i),u,this.element);this.setEventXY(this.startCoords,this.pointers);if(!a){return}if(c.styleCursor){u._doc.documentElement.style.cursor=ze(a)}this.resizeAxes=a.name==="resize"?a.axis:null;if(a==="gesture"&&this.pointerIds.length<2){a=null}this.prepared.name=a.name;this.prepared.axis=a.axis;this.prepared.edges=a.edges;this.snapStatus.snappedX=this.snapStatus.snappedY=this.restrictStatus.restrictedX=this.restrictStatus.restrictedY=NaN;this.downTimes[o]=(new Date).getTime();this.downTargets[o]=n;Q(this.downPointer,e);Z(this.prevCoords,this.startCoords);this.pointerWasMoved=false;this.checkAndPreventDefault(t,u,this.element)}else if(this.inertiaStatus.active&&i===this.element&&He(u.getAction(e,t,this,this.element),u).name===this.prepared.name){j(this.inertiaStatus.i);this.inertiaStatus.active=false;this.checkAndPreventDefault(t,u,this.element)}},setModifications:function(e,t){var n=this.target,i=true,r=Be(n,this.prepared.name)&&(!n.options[this.prepared.name].snap.endOnly||t),o=Ae(n,this.prepared.name)&&(!n.options[this.prepared.name].restrict.endOnly||t);if(r){this.setSnapping(e)}else{this.snapStatus.locked=false}if(o){this.setRestriction(e)}else{this.restrictStatus.restricted=false}if(r&&this.snapStatus.locked&&!this.snapStatus.changed){i=o&&this.restrictStatus.restricted&&this.restrictStatus.changed}else if(o&&this.restrictStatus.restricted&&!this.restrictStatus.changed){i=false}return i},setStartOffsets:function(e,t,n){var i=t.getRect(n),r=ge(t,n),o=t.options[this.prepared.name].snap,a=t.options[this.prepared.name].restrict,s,l;if(i){this.startOffset.left=this.startCoords.page.x-i.left;this.startOffset.top=this.startCoords.page.y-i.top;this.startOffset.right=i.right-this.startCoords.page.x;this.startOffset.bottom=i.bottom-this.startCoords.page.y;if("width"in i){s=i.width}else{s=i.right-i.left}if("height"in i){l=i.height}else{l=i.bottom-i.top}}else{this.startOffset.left=this.startOffset.top=this.startOffset.right=this.startOffset.bottom=0}this.snapOffsets.splice(0);var u=o&&o.offset==="startCoords"?{x:this.startCoords.page.x-r.x,y:this.startCoords.page.y-r.y}:o&&o.offset||{x:0,y:0};if(i&&o&&o.relativePoints&&o.relativePoints.length){for(var c=0;c<o.relativePoints.length;c++){this.snapOffsets.push({x:this.startOffset.left-s*o.relativePoints[c].x+u.x,y:this.startOffset.top-l*o.relativePoints[c].y+u.y})}}else{this.snapOffsets.push(u)}if(i&&a.elementRect){this.restrictOffset.left=this.startOffset.left-s*a.elementRect.left;this.restrictOffset.top=this.startOffset.top-l*a.elementRect.top;this.restrictOffset.right=this.startOffset.right-s*(1-a.elementRect.right);this.restrictOffset.bottom=this.startOffset.bottom-l*(1-a.elementRect.bottom)}else{this.restrictOffset.left=this.restrictOffset.top=this.restrictOffset.right=this.restrictOffset.bottom=0}},start:function(e,t,n){if(this.interacting()||!this.pointerIsDown||this.pointerIds.length<(e.name==="gesture"?2:1)){return}if(et(m,this)===-1){m.push(this)}if(!this.prepared.name){this.setEventXY(this.startCoords,this.pointers)}this.prepared.name=e.name;this.prepared.axis=e.axis;this.prepared.edges=e.edges;this.target=t;this.element=n;this.setStartOffsets(e.name,t,n);this.setModifications(this.startCoords.page);this.prevEvent=this[this.prepared.name+"Start"](this.downEvent)},pointerMove:function(e,t,n,i,r){if(this.inertiaStatus.active){var o=this.inertiaStatus.upCoords.page;var a=this.inertiaStatus.upCoords.client;var s={pageX:o.x+this.inertiaStatus.sx,pageY:o.y+this.inertiaStatus.sy,clientX:a.x+this.inertiaStatus.sx,clientY:a.y+this.inertiaStatus.sy};this.setEventXY(this.curCoords,[s])}else{this.recordPointer(e);this.setEventXY(this.curCoords,this.pointers)}var l=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y;var u,c,d=this.mouse?0:et(this.pointerIds,se(e));if(this.pointerIsDown&&!this.pointerWasMoved){u=this.curCoords.client.x-this.startCoords.client.x;c=this.curCoords.client.y-this.startCoords.client.y;this.pointerWasMoved=f(u,c)>E}if(!l&&(!this.pointerIsDown||this.pointerWasMoved)){if(this.pointerIsDown){clearTimeout(this.holdTimers[d])}this.collectEventTargets(e,t,n,"move")}if(!this.pointerIsDown){return}if(l&&this.pointerWasMoved&&!r){this.checkAndPreventDefault(t,this.target,this.element);return}te(this.pointerDelta,this.prevCoords,this.curCoords);if(!this.prepared.name){return}if(this.pointerWasMoved&&(!this.inertiaStatus.active||e instanceof _e&&/inertiastart/.test(e.type))){if(!this.interacting()){te(this.pointerDelta,this.prevCoords,this.curCoords);if(this.prepared.name==="drag"){var p=Math.abs(u),h=Math.abs(c),m=this.target.options.drag.axis,g=p>h?"x":p<h?"y":"xy";if(g!=="xy"&&m!=="xy"&&m!==g){this.prepared.name=null;var y=n;while(L(y)){var b=v.get(y);if(b&&b!==this.target&&!b.options.drag.manualStart&&b.getAction(this.downPointer,this.downEvent,this,y).name==="drag"&&De(g,b)){this.prepared.name="drag";this.target=b;this.element=y;break}y=Se(y)}if(!this.prepared.name){var x=this;var w=function(e,t,i){var r=R?i.querySelectorAll(t):undefined;if(e===x.target){return}if(Ee(e,n)&&!e.options.drag.manualStart&&!Ce(e,y,n)&&Te(e,y,n)&&nt(y,t,r)&&e.getAction(x.downPointer,x.downEvent,x,y).name==="drag"&&De(g,e)&&Ne(e,y,"drag")){return e}};y=n;while(L(y)){var k=v.forEachSelector(w);if(k){this.prepared.name="drag";this.target=k;this.element=y;break}y=Se(y)}}}}}var S=!!this.prepared.name&&!this.interacting();if(S&&(this.target.options[this.prepared.name].manualStart||!Ne(this.target,this.element,this.prepared))){this.stop(t);return}if(this.prepared.name&&this.target){if(S){this.start(this.prepared,this.target,this.element)}var C=this.setModifications(this.curCoords.page,r);if(C||S){this.prevEvent=this[this.prepared.name+"Move"](t)}this.checkAndPreventDefault(t,this.target,this.element)}}Z(this.prevCoords,this.curCoords);if(this.dragging||this.resizing){this.autoScrollMove(e)}},dragStart:function(e){var t=new _e(this,e,"drag","start",this.element);this.dragging=true;this.target.fire(t);this.activeDrops.dropzones=[];this.activeDrops.elements=[];this.activeDrops.rects=[];if(!this.dynamicDrop){this.setActiveDrops(this.element)}var n=this.getDropEvents(e,t);if(n.activate){this.fireActiveDrops(n.activate)}return t},dragMove:function(e){var t=this.target,n=new _e(this,e,"drag","move",this.element),i=this.element,r=this.getDrop(n,e,i);this.dropTarget=r.dropzone;this.dropElement=r.element;var o=this.getDropEvents(e,n);t.fire(n);if(o.leave){this.prevDropTarget.fire(o.leave)}if(o.enter){this.dropTarget.fire(o.enter)}if(o.move){this.dropTarget.fire(o.move)}this.prevDropTarget=this.dropTarget;this.prevDropElement=this.dropElement;return n},resizeStart:function(e){var t=new _e(this,e,"resize","start",this.element);if(this.prepared.edges){var n=this.target.getRect(this.element);if(this.target.options.resize.square||this.target.options.resize.preserveAspectRatio){var i=K({},this.prepared.edges);i.top=i.top||i.left&&!i.bottom;i.left=i.left||i.top&&!i.right;i.bottom=i.bottom||i.right&&!i.top;i.right=i.right||i.bottom&&!i.left;this.prepared._linkedEdges=i}else{this.prepared._linkedEdges=null}if(this.target.options.resize.preserveAspectRatio){this.resizeStartAspectRatio=n.width/n.height}this.resizeRects={start:n,current:K({},n),restricted:K({},n),previous:K({},n),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}};t.rect=this.resizeRects.restricted;t.deltaRect=this.resizeRects.delta}this.target.fire(t);this.resizing=true;return t},resizeMove:function(e){var t=new _e(this,e,"resize","move",this.element);var n=this.prepared.edges,i=this.target.options.resize.invert,r=i==="reposition"||i==="negate";if(n){var o=t.dx,a=t.dy,s=this.resizeRects.start,l=this.resizeRects.current,u=this.resizeRects.restricted,c=this.resizeRects.delta,d=K(this.resizeRects.previous,u),f=n;if(this.target.options.resize.preserveAspectRatio){var p=this.resizeStartAspectRatio;n=this.prepared._linkedEdges;if(f.left&&f.bottom||f.right&&f.top){a=-o/p}else if(f.left||f.right){a=o/p}else if(f.top||f.bottom){o=a*p}}else if(this.target.options.resize.square){n=this.prepared._linkedEdges;if(f.left&&f.bottom||f.right&&f.top){a=-o}else if(f.left||f.right){a=o}else if(f.top||f.bottom){o=a}}if(n.top){l.top+=a}if(n.bottom){l.bottom+=a}if(n.left){l.left+=o}if(n.right){l.right+=o}if(r){K(u,l);if(i==="reposition"){var h;if(u.top>u.bottom){h=u.top;u.top=u.bottom;u.bottom=h}if(u.left>u.right){h=u.left;u.left=u.right;u.right=h}}}else{u.top=Math.min(l.top,s.bottom);u.bottom=Math.max(l.bottom,s.top);u.left=Math.min(l.left,s.right);u.right=Math.max(l.right,s.left)}u.width=u.right-u.left;u.height=u.bottom-u.top;for(var v in u){c[v]=u[v]-d[v]}t.edges=this.prepared.edges;t.rect=u;t.deltaRect=c}this.target.fire(t);return t},gestureStart:function(e){var t=new _e(this,e,"gesture","start",this.element);t.ds=0;this.gesture.startDistance=this.gesture.prevDistance=t.distance;this.gesture.startAngle=this.gesture.prevAngle=t.angle;this.gesture.scale=1;this.gesturing=true;this.target.fire(t);return t},gestureMove:function(e){if(!this.pointerIds.length){return this.prevEvent}var t;t=new _e(this,e,"gesture","move",this.element);t.ds=t.scale-this.gesture.scale;this.target.fire(t);this.gesture.prevAngle=t.angle;this.gesture.prevDistance=t.distance;if(t.scale!==Infinity&&t.scale!==null&&t.scale!==undefined&&!isNaN(t.scale)){this.gesture.scale=t.scale}return t},pointerHold:function(e,t,n){this.collectEventTargets(e,t,n,"hold")},pointerUp:function(e,t,n,i){var r=this.mouse?0:et(this.pointerIds,se(e));clearTimeout(this.holdTimers[r]);this.collectEventTargets(e,t,n,"up");this.collectEventTargets(e,t,n,"tap");this.pointerEnd(e,t,n,i);this.removePointer(e)},pointerCancel:function(e,t,n,i){var r=this.mouse?0:et(this.pointerIds,se(e));clearTimeout(this.holdTimers[r]);this.collectEventTargets(e,t,n,"cancel");this.pointerEnd(e,t,n,i);this.removePointer(e)},ie8Dblclick:function(e,t,n){if(this.prevTap&&t.clientX===this.prevTap.clientX&&t.clientY===this.prevTap.clientY&&n===this.prevTap.target){this.downTargets[0]=n;this.downTimes[0]=(new Date).getTime();this.collectEventTargets(e,t,n,"tap")}},pointerEnd:function(e,t,n,i){var r,o=this.target,a=o&&o.options,s=a&&this.prepared.name&&a[this.prepared.name].inertia,l=this.inertiaStatus;if(this.interacting()){if(l.active&&!l.ending){return}var u,c=(new Date).getTime(),d=false,f=false,p=false,h=Be(o,this.prepared.name)&&a[this.prepared.name].snap.endOnly,v=Ae(o,this.prepared.name)&&a[this.prepared.name].restrict.endOnly,m=0,g=0,y;if(this.dragging){if(a.drag.axis==="x"){u=Math.abs(this.pointerDelta.client.vx)}else if(a.drag.axis==="y"){u=Math.abs(this.pointerDelta.client.vy)}else{u=this.pointerDelta.client.speed}}else{u=this.pointerDelta.client.speed}d=s&&s.enabled&&this.prepared.name!=="gesture"&&t!==l.startEvent;f=d&&c-this.curCoords.timeStamp<50&&u>s.minSpeed&&u>s.endSpeed;if(d&&!f&&(h||v)){var b={};b.snap=b.restrict=b;if(h){this.setSnapping(this.curCoords.page,b);if(b.locked){m+=b.dx;g+=b.dy}}if(v){this.setRestriction(this.curCoords.page,b);if(b.restricted){m+=b.dx;g+=b.dy}}if(m||g){p=true}}if(f||p){Z(l.upCoords,this.curCoords);this.pointers[0]=l.startEvent=y=new _e(this,t,this.prepared.name,"inertiastart",this.element);l.t0=c;o.fire(l.startEvent);if(f){l.vx0=this.pointerDelta.client.vx;l.vy0=this.pointerDelta.client.vy;l.v0=u;this.calcInertia(l);var x=K({},this.curCoords.page),w=ge(o,this.element),k;x.x=x.x+l.xe-w.x;x.y=x.y+l.ye-w.y;k={useStatusXY:true,x:x.x,y:x.y,dx:0,dy:0,snap:null};k.snap=k;m=g=0;if(h){var S=this.setSnapping(this.curCoords.page,k);if(S.locked){m+=S.dx;g+=S.dy}}if(v){var E=this.setRestriction(this.curCoords.page,k);if(E.restricted){m+=E.dx;g+=E.dy}}l.modifiedXe+=m;l.modifiedYe+=g;l.i=_(this.boundInertiaFrame)}else{l.smoothEnd=true;l.xe=m;l.ye=g;l.sx=l.sy=0;l.i=_(this.boundSmoothEndFrame)}l.active=true;return}if(h||v){this.pointerMove(e,t,n,i,true)}}if(this.dragging){r=new _e(this,t,"drag","end",this.element);var C=this.element,T=this.getDrop(r,t,C);this.dropTarget=T.dropzone;this.dropElement=T.element;var D=this.getDropEvents(t,r);if(D.leave){this.prevDropTarget.fire(D.leave)}if(D.enter){this.dropTarget.fire(D.enter)}if(D.drop){this.dropTarget.fire(D.drop)}if(D.deactivate){this.fireActiveDrops(D.deactivate)}o.fire(r)}else if(this.resizing){r=new _e(this,t,"resize","end",this.element);o.fire(r)}else if(this.gesturing){r=new _e(this,t,"gesture","end",this.element);o.fire(r)}this.stop(t)},collectDrops:function(e){var t=[],n=[],i;e=e||this.element;for(i=0;i<v.length;i++){if(!v[i].options.drop.enabled){continue}var r=v[i],o=r.options.drop.accept;if(L(o)&&o!==e||X(o)&&!nt(e,o)){continue}var a=r.selector?r._context.querySelectorAll(r.selector):[r._element];for(var s=0,l=a.length;s<l;s++){var u=a[s];if(u===e){continue}t.push(r);n.push(u)}}return{dropzones:t,elements:n}},fireActiveDrops:function(e){var t,n,i,r;for(t=0;t<this.activeDrops.dropzones.length;t++){n=this.activeDrops.dropzones[t];i=this.activeDrops.elements[t];if(i!==r){e.target=i;n.fire(e)}r=i}},setActiveDrops:function(e){var t=this.collectDrops(e,true);this.activeDrops.dropzones=t.dropzones;this.activeDrops.elements=t.elements;this.activeDrops.rects=[];for(var n=0;n<this.activeDrops.dropzones.length;n++){this.activeDrops.rects[n]=this.activeDrops.dropzones[n].getRect(this.activeDrops.elements[n])}},getDrop:function(e,t,n){var i=[];if(g){this.setActiveDrops(n)}for(var r=0;r<this.activeDrops.dropzones.length;r++){var o=this.activeDrops.dropzones[r],a=this.activeDrops.elements[r],s=this.activeDrops.rects[r];i.push(o.dropCheck(e,t,this.target,n,a,s)?a:null)}var l=Ie(i),u=this.activeDrops.dropzones[l]||null,c=this.activeDrops.elements[l]||null;return{dropzone:u,element:c}},getDropEvents:function(e,t){var n={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};if(this.dropElement!==this.prevDropElement){if(this.prevDropTarget){n.leave={target:this.prevDropElement,dropzone:this.prevDropTarget,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,timeStamp:t.timeStamp,type:"dragleave"};t.dragLeave=this.prevDropElement;t.prevDropzone=this.prevDropTarget}if(this.dropTarget){n.enter={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,timeStamp:t.timeStamp,type:"dragenter"};t.dragEnter=this.dropElement;t.dropzone=this.dropTarget}}if(t.type==="dragend"&&this.dropTarget){n.drop={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,timeStamp:t.timeStamp,type:"drop"};t.dropzone=this.dropTarget}if(t.type==="dragstart"){n.activate={target:null,dropzone:null,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,timeStamp:t.timeStamp,type:"dropactivate"}}if(t.type==="dragend"){n.deactivate={target:null,dropzone:null,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,timeStamp:t.timeStamp,type:"dropdeactivate"}}if(t.type==="dragmove"&&this.dropTarget){n.move={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:t.target,draggable:t.interactable,dragEvent:t,interaction:this,dragmove:t,timeStamp:t.timeStamp,type:"dropmove"};t.dropzone=this.dropTarget}return n},currentAction:function(){return this.dragging&&"drag"||this.resizing&&"resize"||this.gesturing&&"gesture"||null},interacting:function(){return this.dragging||this.resizing||this.gesturing},clearTargets:function(){this.target=this.element=null;this.dropTarget=this.dropElement=this.prevDropTarget=this.prevDropElement=null},stop:function(e){if(this.interacting()){x.stop();this.matches=[];this.matchElements=[];var t=this.target;if(t.options.styleCursor){t._doc.documentElement.style.cursor=""}if(e&&U(e.preventDefault)){this.checkAndPreventDefault(e,t,this.element)}if(this.dragging){this.activeDrops.dropzones=this.activeDrops.elements=this.activeDrops.rects=null}}this.clearTargets();this.pointerIsDown=this.snapStatus.locked=this.dragging=this.resizing=this.gesturing=false;this.prepared.name=this.prevEvent=null;this.inertiaStatus.resumeDx=this.inertiaStatus.resumeDy=0;for(var n=0;n<this.pointers.length;n++){if(et(this.pointerIds,se(this.pointers[n]))===-1){this.pointers.splice(n,1)}}},inertiaFrame:function(){var e=this.inertiaStatus,t=this.target.options[this.prepared.name].inertia,n=t.resistance,i=(new Date).getTime()/1e3-e.t0;if(i<e.te){var r=1-(Math.exp(-n*i)-e.lambda_v0)/e.one_ve_v0;if(e.modifiedXe===e.xe&&e.modifiedYe===e.ye){e.sx=e.xe*r;e.sy=e.ye*r}else{var o=be(0,0,e.xe,e.ye,e.modifiedXe,e.modifiedYe,r);e.sx=o.x;e.sy=o.y}this.pointerMove(e.startEvent,e.startEvent);e.i=_(this.boundInertiaFrame)}else{e.ending=true;e.sx=e.modifiedXe;e.sy=e.modifiedYe;this.pointerMove(e.startEvent,e.startEvent);this.pointerEnd(e.startEvent,e.startEvent);e.active=e.ending=false}},smoothEndFrame:function(){var e=this.inertiaStatus,t=(new Date).getTime()-e.t0,n=this.target.options[this.prepared.name].inertia.smoothEndDuration;if(t<n){e.sx=xe(t,0,e.xe,n);e.sy=xe(t,0,e.ye,n);this.pointerMove(e.startEvent,e.startEvent);e.i=_(this.boundSmoothEndFrame)}else{e.ending=true;e.sx=e.xe;e.sy=e.ye;this.pointerMove(e.startEvent,e.startEvent);this.pointerEnd(e.startEvent,e.startEvent);e.smoothEnd=e.active=e.ending=false}},addPointer:function(e){var t=se(e),n=this.mouse?0:et(this.pointerIds,t);if(n===-1){n=this.pointerIds.length}this.pointerIds[n]=t;this.pointers[n]=e;return n},removePointer:function(e){var t=se(e),n=this.mouse?0:et(this.pointerIds,t);if(n===-1){return}this.pointers.splice(n,1);this.pointerIds.splice(n,1);this.downTargets.splice(n,1);this.downTimes.splice(n,1);this.holdTimers.splice(n,1)},recordPointer:function(e){var t=this.mouse?0:et(this.pointerIds,se(e));if(t===-1){return}this.pointers[t]=e},collectEventTargets:function(e,t,n,i){var r=this.mouse?0:et(this.pointerIds,se(e));if(i==="tap"&&(this.pointerWasMoved||!(this.downTargets[r]&&this.downTargets[r]===n))){return}var o=[],a=[],s=n;function l(e,t,r){var l=R?r.querySelectorAll(t):undefined;if(e._iEvents[i]&&L(s)&&Ee(e,s)&&!Ce(e,s,n)&&Te(e,s,n)&&nt(s,t,l)){o.push(e);a.push(s)}}while(s){if($e.isSet(s)&&$e(s)._iEvents[i]){o.push($e(s));a.push(s)}v.forEachSelector(l);s=Se(s)}if(o.length||i==="tap"){this.firePointers(e,t,n,o,a,i)}},firePointers:function(e,t,n,i,r,o){var a=this.mouse?0:et(this.pointerIds,se(e)),s={},l,u,c;if(o==="doubletap"){s=e}else{Q(s,t);if(t!==e){Q(s,e)}s.preventDefault=je;s.stopPropagation=_e.prototype.stopPropagation;s.stopImmediatePropagation=_e.prototype.stopImmediatePropagation;s.interaction=this;s.timeStamp=(new Date).getTime();s.originalEvent=t;s.originalPointer=e;s.type=o;s.pointerId=se(e);s.pointerType=this.mouse?"mouse":!k?"touch":X(e.pointerType)?e.pointerType:[,,"touch","pen","mouse"][e.pointerType]}if(o==="tap"){s.dt=s.timeStamp-this.downTimes[a];u=s.timeStamp-this.tapTime;c=!!(this.prevTap&&this.prevTap.type!=="doubletap"&&this.prevTap.target===s.target&&u<500);s.double=c;this.tapTime=s.timeStamp}for(l=0;l<i.length;l++){s.currentTarget=r[l];s.interactable=i[l];i[l].fire(s);if(s.immediatePropagationStopped||s.propagationStopped&&r[l+1]!==s.currentTarget){break}}if(c){var d={};K(d,s);d.dt=u;d.type="doubletap";this.collectEventTargets(d,t,n,"doubletap");this.prevTap=d}else if(o==="tap"){this.prevTap=s}},validateSelector:function(e,t,n,i){for(var r=0,o=n.length;r<o;r++){var a=n[r],s=i[r],l=He(a.getAction(e,t,this,s),a);if(l&&Ne(a,s,l)){this.target=a;this.element=s;return l}}},setSnapping:function(e,t){var n=this.target.options[this.prepared.name].snap,i=[],r,o,a;t=t||this.snapStatus;if(t.useStatusXY){o={x:t.x,y:t.y}}else{var s=ge(this.target,this.element);o=K({},e);o.x-=s.x;o.y-=s.y}t.realX=o.x;t.realY=o.y;o.x=o.x-this.inertiaStatus.resumeDx;o.y=o.y-this.inertiaStatus.resumeDy;var l=n.targets?n.targets.length:0;for(var u=0;u<this.snapOffsets.length;u++){var c={x:o.x-this.snapOffsets[u].x,y:o.y-this.snapOffsets[u].y};for(a=0;a<l;a++){if(U(n.targets[a])){r=n.targets[a](c.x,c.y,this)}else{r=n.targets[a]}if(!r){continue}i.push({x:Y(r.x)?r.x+this.snapOffsets[u].x:c.x,y:Y(r.y)?r.y+this.snapOffsets[u].y:c.y,range:Y(r.range)?r.range:n.range})}}var d={target:null,inRange:false,distance:0,range:0,dx:0,dy:0};for(a=0,l=i.length;a<l;a++){r=i[a];var p=r.range,h=r.x-o.x,v=r.y-o.y,m=f(h,v),g=m<=p;if(p===Infinity&&d.inRange&&d.range!==Infinity){g=false}if(!d.target||(g?d.inRange&&p!==Infinity?m/p<d.distance/d.range:p===Infinity&&d.range!==Infinity||m<d.distance:!d.inRange&&m<d.distance)){if(p===Infinity){g=true}d.target=r;d.distance=m;d.range=p;d.inRange=g;d.dx=h;d.dy=v;t.range=p}}var y;if(d.target){y=t.snappedX!==d.target.x||t.snappedY!==d.target.y;t.snappedX=d.target.x;t.snappedY=d.target.y}else{y=true;t.snappedX=NaN;t.snappedY=NaN}t.dx=d.dx;t.dy=d.dy;t.changed=y||d.inRange&&!t.locked;t.locked=d.inRange;return t},setRestriction:function(e,t){var n=this.target,i=n&&n.options[this.prepared.name].restrict,r=i&&i.restriction,o;if(!r){return t}t=t||this.restrictStatus;o=t.useStatusXY?o={x:t.x,y:t.y}:o=K({},e);if(t.snap&&t.snap.locked){o.x+=t.snap.dx||0;o.y+=t.snap.dy||0}o.x-=this.inertiaStatus.resumeDx;o.y-=this.inertiaStatus.resumeDy;t.dx=0;t.dy=0;t.restricted=false;var a,s,l;if(X(r)){if(r==="parent"){r=Se(this.element)}else if(r==="self"){r=n.getRect(this.element)}else{r=ke(this.element,r)}if(!r){return t}}if(U(r)){r=r(o.x,o.y,this.element)}if(L(r)){r=de(r)}a=r;if(!r){s=o.x;l=o.y}else if("x"in r&&"y"in r){s=Math.max(Math.min(a.x+a.width-this.restrictOffset.right,o.x),a.x+this.restrictOffset.left);l=Math.max(Math.min(a.y+a.height-this.restrictOffset.bottom,o.y),a.y+this.restrictOffset.top)}else{s=Math.max(Math.min(a.right-this.restrictOffset.right,o.x),a.left+this.restrictOffset.left);l=Math.max(Math.min(a.bottom-this.restrictOffset.bottom,o.y),a.top+this.restrictOffset.top)}t.dx=s-o.x;t.dy=l-o.y;t.changed=t.restrictedX!==s||t.restrictedY!==l;t.restricted=!!(t.dx||t.dy);t.restrictedX=s;t.restrictedY=l;return t},checkAndPreventDefault:function(e,t,n){if(!(t=t||this.target)){return}var i=t.options,r=i.preventDefault;if(r==="auto"&&n&&!/^(input|select|textarea)$/i.test(e.target.nodeName)){if(/down|start/i.test(e.type)&&this.prepared.name==="drag"&&i.drag.axis!=="xy"){return}if(i[this.prepared.name]&&i[this.prepared.name].manualStart&&!this.interacting()){return}e.preventDefault();return}if(r==="always"){e.preventDefault();return}},calcInertia:function(e){var t=this.target.options[this.prepared.name].inertia,n=t.resistance,i=-Math.log(t.endSpeed/e.v0)/n;e.x0=this.prevEvent.pageX;e.y0=this.prevEvent.pageY;e.t0=e.startEvent.timeStamp/1e3;e.sx=e.sy=0;e.modifiedXe=e.xe=(e.vx0-i)/n;e.modifiedYe=e.ye=(e.vy0-i)/n;e.te=i;e.lambda_v0=n/e.v0;e.one_ve_v0=1-t.endSpeed/e.v0},autoScrollMove:function(e){if(!(this.interacting()&&Oe(this.target,this.prepared.name))){return}if(this.inertiaStatus.active){x.x=x.y=0;return}var t,n,i,r,o=this.target.options[this.prepared.name].autoScroll,a=o.container||ue(this.element);if(H(a)){r=e.clientX<x.margin;t=e.clientY<x.margin;n=e.clientX>a.innerWidth-x.margin;i=e.clientY>a.innerHeight-x.margin}else{var s=ce(a);r=e.clientX<s.left+x.margin;t=e.clientY<s.top+x.margin;n=e.clientX>s.right-x.margin;i=e.clientY>s.bottom-x.margin}x.x=n?1:r?-1:0;x.y=i?1:t?-1:0;if(!x.isScrolling){x.margin=o.margin;x.speed=o.speed;x.start(this)}},_updateEventTargets:function(e,t){this._eventTarget=e;this._curEventTarget=t}};function Me(e,t,n){var i=0,r=m.length,o=/mouse/i.test(e.pointerType||t)||e.pointerType===4,a;var s=se(e);if(/down|start/i.test(t)){for(i=0;i<r;i++){a=m[i];var l=n;if(a.inertiaStatus.active&&a.target.options[a.prepared.name].inertia.allowResume&&a.mouse===o){while(l){if(l===a.element){return a}l=Se(l)}}}}if(o||!(w||k)){for(i=0;i<r;i++){if(m[i].mouse&&!m[i].inertiaStatus.active){return m[i]}}for(i=0;i<r;i++){if(m[i].mouse&&!(/down/.test(t)&&m[i].inertiaStatus.active)){return a}}a=new Pe;a.mouse=true;return a}for(i=0;i<r;i++){if(tt(m[i].pointerIds,s)){return m[i]}}if(/up|end|out/i.test(t)){return null}for(i=0;i<r;i++){a=m[i];if((!a.prepared.name||a.target.options.gesture.enabled)&&!a.interacting()&&!(!o&&a.mouse)){return a}}return new Pe}function Re(e){return function(t){var n,i=le(t.path?t.path[0]:t.target),r=le(t.currentTarget),o;if(w&&/touch/.test(t.type)){C=(new Date).getTime();for(o=0;o<t.changedTouches.length;o++){var a=t.changedTouches[o];n=Me(a,t.type,i);if(!n){continue}n._updateEventTargets(i,r);n[e](a,t,i,r)}}else{if(!k&&/mouse/.test(t.type)){for(o=0;o<m.length;o++){if(!m[o].mouse&&m[o].pointerIsDown){return}}if((new Date).getTime()-C<500){return}}n=Me(t,t.type,i);if(!n){return}n._updateEventTargets(i,r);n[e](t,t,i,r)}}}function _e(e,t,n,i,r,o){var a,s,l=e.target,u=e.snapStatus,c=e.restrictStatus,d=e.pointers,p=(l&&l.options||b).deltaSource,h=p+"X",v=p+"Y",m=l?l.options:b,g=ge(l,r),y=i==="start",x=i==="end",w=y?e.startCoords:e.curCoords;r=r||e.element;s=K({},w.page);a=K({},w.client);s.x-=g.x;s.y-=g.y;a.x-=g.x;a.y-=g.y;var k=m[n].snap&&m[n].snap.relativePoints;if(Be(l,n)&&!(y&&k&&k.length)){this.snap={range:u.range,locked:u.locked,x:u.snappedX,y:u.snappedY,realX:u.realX,realY:u.realY,dx:u.dx,dy:u.dy};if(u.locked){s.x+=u.dx;s.y+=u.dy;a.x+=u.dx;a.y+=u.dy}}if(Ae(l,n)&&!(y&&m[n].restrict.elementRect)&&c.restricted){s.x+=c.dx;s.y+=c.dy;a.x+=c.dx;a.y+=c.dy;this.restrict={dx:c.dx,dy:c.dy}}this.pageX=s.x;this.pageY=s.y;this.clientX=a.x;this.clientY=a.y;this.x0=e.startCoords.page.x-g.x;this.y0=e.startCoords.page.y-g.y;this.clientX0=e.startCoords.client.x-g.x;this.clientY0=e.startCoords.client.y-g.y;this.ctrlKey=t.ctrlKey;this.altKey=t.altKey;this.shiftKey=t.shiftKey;this.metaKey=t.metaKey;this.button=t.button;this.buttons=t.buttons;this.target=r;this.t0=e.downTimes[0];this.type=n+(i||"");this.interaction=e;this.interactable=l;var S=e.inertiaStatus;if(S.active){this.detail="inertia"}if(o){this.relatedTarget=o}if(x){if(p==="client"){this.dx=a.x-e.startCoords.client.x;this.dy=a.y-e.startCoords.client.y}else{this.dx=s.x-e.startCoords.page.x;this.dy=s.y-e.startCoords.page.y}}else if(y){this.dx=0;this.dy=0}else if(i==="inertiastart"){this.dx=e.prevEvent.dx;this.dy=e.prevEvent.dy}else{if(p==="client"){this.dx=a.x-e.prevEvent.clientX;this.dy=a.y-e.prevEvent.clientY}else{this.dx=s.x-e.prevEvent.pageX;this.dy=s.y-e.prevEvent.pageY}}if(e.prevEvent&&e.prevEvent.detail==="inertia"&&!S.active&&m[n].inertia&&m[n].inertia.zeroResumeDelta){S.resumeDx+=this.dx;S.resumeDy+=this.dy;this.dx=this.dy=0}if(n==="resize"&&e.resizeAxes){if(m.resize.square){if(e.resizeAxes==="y"){this.dx=this.dy}else{this.dy=this.dx}this.axes="xy"}else{this.axes=e.resizeAxes;if(e.resizeAxes==="x"){this.dy=0}else if(e.resizeAxes==="y"){this.dx=0}}}else if(n==="gesture"){this.touches=[d[0],d[1]];if(y){this.distance=ve(d,p);this.box=he(d);this.scale=1;this.ds=0;this.angle=me(d,undefined,p);this.da=0}else if(x||t instanceof _e){this.distance=e.prevEvent.distance;this.box=e.prevEvent.box;this.scale=e.prevEvent.scale;this.ds=this.scale-1;this.angle=e.prevEvent.angle;this.da=this.angle-e.gesture.startAngle}else{this.distance=ve(d,p);this.box=he(d);this.scale=this.distance/e.gesture.startDistance;this.angle=me(d,e.gesture.prevAngle,p);this.ds=this.scale-e.gesture.prevScale;this.da=this.angle-e.gesture.prevAngle}}if(y){this.timeStamp=e.downTimes[0];this.dt=0;this.duration=0;this.speed=0;this.velocityX=0;this.velocityY=0}else if(i==="inertiastart"){this.timeStamp=e.prevEvent.timeStamp;this.dt=e.prevEvent.dt;this.duration=e.prevEvent.duration;this.speed=e.prevEvent.speed;this.velocityX=e.prevEvent.velocityX;this.velocityY=e.prevEvent.velocityY}else{this.timeStamp=(new Date).getTime();this.dt=this.timeStamp-e.prevEvent.timeStamp;this.duration=this.timeStamp-e.downTimes[0];if(t instanceof _e){var E=this[h]-e.prevEvent[h],C=this[v]-e.prevEvent[v],T=this.dt/1e3;this.speed=f(E,C)/T;this.velocityX=E/T;this.velocityY=C/T}else{this.speed=e.pointerDelta[p].speed;this.velocityX=e.pointerDelta[p].vx;this.velocityY=e.pointerDelta[p].vy}}if((x||i==="inertiastart")&&e.prevEvent.speed>600&&this.timeStamp-e.prevEvent.timeStamp<150){var D=180*Math.atan2(e.prevEvent.velocityY,e.prevEvent.velocityX)/Math.PI,B=22.5;if(D<0){D+=360}var A=135-B<=D&&D<225+B,O=225-B<=D&&D<315+B,N=!A&&(315-B<=D||D<45+B),I=!O&&45-B<=D&&D<135+B;this.swipe={up:O,down:I,left:A,right:N,angle:D,speed:e.prevEvent.speed,velocity:{x:e.prevEvent.velocityX,y:e.prevEvent.velocityY}}}}_e.prototype={preventDefault:F,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=true},stopPropagation:function(){this.propagationStopped=true}};function je(){this.originalEvent.preventDefault()}function ze(e){var t="";if(e.name==="drag"){t=D.drag}if(e.name==="resize"){if(e.axis){t=D[e.name+e.axis]}else if(e.edges){var n="resize",i=["top","bottom","left","right"];for(var r=0;r<4;r++){if(e.edges[i[r]]){n+=i[r]}}t=D[n]}}return t}function Fe(e,t,n,i,r,o,a){if(!t){return false}if(t===true){var s=Y(o.width)?o.width:o.right-o.left,l=Y(o.height)?o.height:o.bottom-o.top;if(s<0){if(e==="left"){e="right"}else if(e==="right"){e="left"}}if(l<0){if(e==="top"){e="bottom"}else if(e==="bottom"){e="top"}}if(e==="left"){return n.x<(s>=0?o.left:o.right)+a}if(e==="top"){return n.y<(l>=0?o.top:o.bottom)+a}if(e==="right"){return n.x>(s>=0?o.right:o.left)-a}if(e==="bottom"){return n.y>(l>=0?o.bottom:o.top)-a}}if(!L(i)){return false}return L(t)?t===i:it(i,t,r)}function Le(e,t,n){var i=this.getRect(n),r=false,o=null,a=null,s,l=K({},t.curCoords.page),u=this.options;if(!i){return null}if(B.resize&&u.resize.enabled){var c=u.resize;s={left:false,right:false,top:false,bottom:false};if(G(c.edges)){for(var d in s){s[d]=Fe(d,c.edges[d],l,t._eventTarget,n,i,c.margin||S)}s.left=s.left&&!s.right;s.top=s.top&&!s.bottom;r=s.left||s.right||s.top||s.bottom}else{var f=u.resize.axis!=="y"&&l.x>i.right-S,p=u.resize.axis!=="x"&&l.y>i.bottom-S;r=f||p;a=(f?"x":"")+(p?"y":"")}}o=r?"resize":B.drag&&u.drag.enabled?"drag":null;if(B.gesture&&t.pointerIds.length>=2&&!(t.dragging||t.resizing)){o="gesture"}if(o){return{name:o,axis:a,edges:s}}return null}function He(e,t){if(!G(e)){return null}var n=e.name,i=t.options;if((n==="resize"&&i.resize.enabled||n==="drag"&&i.drag.enabled||n==="gesture"&&i.gesture.enabled)&&B[n]){if(n==="resize"||n==="resizeyx"){n="resizexy"}return e}return null}var Ve={},We=["dragStart","dragMove","resizeStart","resizeMove","gestureStart","gestureMove","pointerOver","pointerOut","pointerHover","selectorDown","pointerDown","pointerMove","pointerUp","pointerCancel","pointerEnd","addPointer","removePointer","recordPointer","autoScrollMove"];for(var Ge=0,Ue=We.length;Ge<Ue;Ge++){var Ye=We[Ge];Ve[Ye]=Re(Ye)}function qe(e,t){var n={},i=y[e.type],r=le(e.path?e.path[0]:e.target),o=r;t=t?true:false;for(var a in e){n[a]=e[a]}n.originalEvent=e;n.preventDefault=je;while(L(o)){for(var s=0;s<i.selectors.length;s++){var l=i.selectors[s],u=i.contexts[s];if(nt(o,l)&&we(u,r)&&we(u,o)){var c=i.listeners[s];n.currentTarget=o;for(var d=0;d<c.length;d++){if(c[d][1]===t){c[d][0](n)}}}}o=Se(o)}}function Xe(e){return qe.call(this,e,true)}v.indexOfElement=function e(t,n){n=n||r;for(var i=0;i<this.length;i++){var o=this[i];if(o.selector===t&&o._context===n||!o.selector&&o._element===t){return i}}return-1};v.get=function e(t,n){return this[this.indexOfElement(t,n&&n.context)]};v.forEachSelector=function(e){for(var t=0;t<this.length;t++){var n=this[t];if(!n.selector){
continue}var i=e(n,n.selector,n._context,t,this);if(i!==undefined){return i}}};function $e(e,t){return v.get(e,t)||new Ke(e,t)}function Ke(e,t){this._element=e;this._iEvents=this._iEvents||{};var n;if($(e)){this.selector=e;var r=t&&t.context;n=r?ue(r):i;if(r&&(n.Node?r instanceof n.Node:L(r)||r===n.document)){this._context=r}}else{n=ue(e);if(L(e,n)){if(k){z.add(this._element,d.down,Ve.pointerDown);z.add(this._element,d.move,Ve.pointerHover)}else{z.add(this._element,"mousedown",Ve.pointerDown);z.add(this._element,"mousemove",Ve.pointerHover);z.add(this._element,"touchstart",Ve.pointerDown);z.add(this._element,"touchmove",Ve.pointerHover)}}}this._doc=n.document;if(!tt(h,this._doc)){Ze(this._doc)}v.push(this);this.set(t)}Ke.prototype={setOnEvents:function(e,t){if(e==="drop"){if(U(t.ondrop)){this.ondrop=t.ondrop}if(U(t.ondropactivate)){this.ondropactivate=t.ondropactivate}if(U(t.ondropdeactivate)){this.ondropdeactivate=t.ondropdeactivate}if(U(t.ondragenter)){this.ondragenter=t.ondragenter}if(U(t.ondragleave)){this.ondragleave=t.ondragleave}if(U(t.ondropmove)){this.ondropmove=t.ondropmove}}else{e="on"+e;if(U(t.onstart)){this[e+"start"]=t.onstart}if(U(t.onmove)){this[e+"move"]=t.onmove}if(U(t.onend)){this[e+"end"]=t.onend}if(U(t.oninertiastart)){this[e+"inertiastart"]=t.oninertiastart}}return this},draggable:function(e){if(G(e)){this.options.drag.enabled=e.enabled===false?false:true;this.setPerAction("drag",e);this.setOnEvents("drag",e);if(/^x$|^y$|^xy$/.test(e.axis)){this.options.drag.axis=e.axis}else if(e.axis===null){delete this.options.drag.axis}return this}if(q(e)){this.options.drag.enabled=e;return this}return this.options.drag},setPerAction:function(e,t){for(var n in t){if(n in b[e]){if(G(t[n])){this.options[e][n]=K(this.options[e][n]||{},t[n]);if(G(b.perAction[n])&&"enabled"in b.perAction[n]){this.options[e][n].enabled=t[n].enabled===false?false:true}}else if(q(t[n])&&G(b.perAction[n])){this.options[e][n].enabled=t[n]}else if(t[n]!==undefined){this.options[e][n]=t[n]}}}},dropzone:function(e){if(G(e)){this.options.drop.enabled=e.enabled===false?false:true;this.setOnEvents("drop",e);if(/^(pointer|center)$/.test(e.overlap)){this.options.drop.overlap=e.overlap}else if(Y(e.overlap)){this.options.drop.overlap=Math.max(Math.min(1,e.overlap),0)}if("accept"in e){this.options.drop.accept=e.accept}if("checker"in e){this.options.drop.checker=e.checker}return this}if(q(e)){this.options.drop.enabled=e;return this}return this.options.drop},dropCheck:function(e,t,n,i,r,o){var a=false;if(!(o=o||this.getRect(r))){return this.options.drop.checker?this.options.drop.checker(e,t,a,this,r,n,i):false}var s=this.options.drop.overlap;if(s==="pointer"){var l=re(e),u=ge(n,i),c,d;l.x+=u.x;l.y+=u.y;c=l.x>o.left&&l.x<o.right;d=l.y>o.top&&l.y<o.bottom;a=c&&d}var f=n.getRect(i);if(s==="center"){var p=f.left+f.width/2,h=f.top+f.height/2;a=p>=o.left&&p<=o.right&&h>=o.top&&h<=o.bottom}if(Y(s)){var v=Math.max(0,Math.min(o.right,f.right)-Math.max(o.left,f.left))*Math.max(0,Math.min(o.bottom,f.bottom)-Math.max(o.top,f.top)),m=v/(f.width*f.height);a=m>=s}if(this.options.drop.checker){a=this.options.drop.checker(e,t,a,this,r,n,i)}return a},dropChecker:function(e){if(U(e)){this.options.drop.checker=e;return this}if(e===null){delete this.options.getRect;return this}return this.options.drop.checker},accept:function(e){if(L(e)){this.options.drop.accept=e;return this}if($(e)){this.options.drop.accept=e;return this}if(e===null){delete this.options.drop.accept;return this}return this.options.drop.accept},resizable:function(e){if(G(e)){this.options.resize.enabled=e.enabled===false?false:true;this.setPerAction("resize",e);this.setOnEvents("resize",e);if(/^x$|^y$|^xy$/.test(e.axis)){this.options.resize.axis=e.axis}else if(e.axis===null){this.options.resize.axis=b.resize.axis}if(q(e.preserveAspectRatio)){this.options.resize.preserveAspectRatio=e.preserveAspectRatio}else if(q(e.square)){this.options.resize.square=e.square}return this}if(q(e)){this.options.resize.enabled=e;return this}return this.options.resize},squareResize:function(e){if(q(e)){this.options.resize.square=e;return this}if(e===null){delete this.options.resize.square;return this}return this.options.resize.square},gesturable:function(e){if(G(e)){this.options.gesture.enabled=e.enabled===false?false:true;this.setPerAction("gesture",e);this.setOnEvents("gesture",e);return this}if(q(e)){this.options.gesture.enabled=e;return this}return this.options.gesture},autoScroll:function(e){if(G(e)){e=K({actions:["drag","resize"]},e)}else if(q(e)){e={actions:["drag","resize"],enabled:e}}return this.setOptions("autoScroll",e)},snap:function(e){var t=this.setOptions("snap",e);if(t===this){return this}return t.drag},setOptions:function(e,t){var n=t&&W(t.actions)?t.actions:["drag"];var i;if(G(t)||q(t)){for(i=0;i<n.length;i++){var r=/resize/.test(n[i])?"resize":n[i];if(!G(this.options[r])){continue}var o=this.options[r][e];if(G(t)){K(o,t);o.enabled=t.enabled===false?false:true;if(e==="snap"){if(o.mode==="grid"){o.targets=[$e.createSnapGrid(K({offset:o.gridOffset||{x:0,y:0}},o.grid||{}))]}else if(o.mode==="anchor"){o.targets=o.anchors}else if(o.mode==="path"){o.targets=o.paths}if("elementOrigin"in t){o.relativePoints=[t.elementOrigin]}}}else if(q(t)){o.enabled=t}}return this}var a={},s=["drag","resize","gesture"];for(i=0;i<s.length;i++){if(e in b[s[i]]){a[s[i]]=this.options[s[i]][e]}}return a},inertia:function(e){var t=this.setOptions("inertia",e);if(t===this){return this}return t.drag},getAction:function(e,t,n,i){var r=this.defaultActionChecker(e,n,i);if(this.options.actionChecker){return this.options.actionChecker(e,t,r,this,i,n)}return r},defaultActionChecker:Le,actionChecker:function(e){if(U(e)){this.options.actionChecker=e;return this}if(e===null){delete this.options.actionChecker;return this}return this.options.actionChecker},getRect:function e(t){t=t||this._element;if(this.selector&&!L(t)){t=this._context.querySelector(this.selector)}return de(t)},rectChecker:function(e){if(U(e)){this.getRect=e;return this}if(e===null){delete this.options.getRect;return this}return this.getRect},styleCursor:function(e){if(q(e)){this.options.styleCursor=e;return this}if(e===null){delete this.options.styleCursor;return this}return this.options.styleCursor},preventDefault:function(e){if(/^(always|never|auto)$/.test(e)){this.options.preventDefault=e;return this}if(q(e)){this.options.preventDefault=e?"always":"never";return this}return this.options.preventDefault},origin:function(e){if($(e)){this.options.origin=e;return this}else if(G(e)){this.options.origin=e;return this}return this.options.origin},deltaSource:function(e){if(e==="page"||e==="client"){this.options.deltaSource=e;return this}return this.options.deltaSource},restrict:function(e){if(!G(e)){return this.setOptions("restrict",e)}var t=["drag","resize","gesture"],n;for(var i=0;i<t.length;i++){var r=t[i];if(r in e){var o=K({actions:[r],restriction:e[r]},e);n=this.setOptions("restrict",o)}}return n},context:function(){return this._context},_context:r,ignoreFrom:function(e){if($(e)){this.options.ignoreFrom=e;return this}if(L(e)){this.options.ignoreFrom=e;return this}return this.options.ignoreFrom},allowFrom:function(e){if($(e)){this.options.allowFrom=e;return this}if(L(e)){this.options.allowFrom=e;return this}return this.options.allowFrom},element:function(){return this._element},fire:function(e){if(!(e&&e.type)||!tt(O,e.type)){return this}var t,n,i,r="on"+e.type,o="";if(e.type in this._iEvents){t=this._iEvents[e.type];for(n=0,i=t.length;n<i&&!e.immediatePropagationStopped;n++){o=t[n].name;t[n](e)}}if(U(this[r])){o=this[r].name;this[r](e)}if(e.type in N&&(t=N[e.type])){for(n=0,i=t.length;n<i&&!e.immediatePropagationStopped;n++){o=t[n].name;t[n](e)}}return this},on:function(e,t,n){var i;if(X(e)&&e.search(" ")!==-1){e=e.trim().split(/ +/)}if(W(e)){for(i=0;i<e.length;i++){this.on(e[i],t,n)}return this}if(G(e)){for(var r in e){this.on(r,e[r],t)}return this}if(e==="wheel"){e=A}n=n?true:false;if(tt(O,e)){if(!(e in this._iEvents)){this._iEvents[e]=[t]}else{this._iEvents[e].push(t)}}else if(this.selector){if(!y[e]){y[e]={selectors:[],contexts:[],listeners:[]};for(i=0;i<h.length;i++){z.add(h[i],e,qe);z.add(h[i],e,Xe,true)}}var o=y[e],a;for(a=o.selectors.length-1;a>=0;a--){if(o.selectors[a]===this.selector&&o.contexts[a]===this._context){break}}if(a===-1){a=o.selectors.length;o.selectors.push(this.selector);o.contexts.push(this._context);o.listeners.push([])}o.listeners[a].push([t,n])}else{z.add(this._element,e,t,n)}return this},off:function(e,t,n){var i;if(X(e)&&e.search(" ")!==-1){e=e.trim().split(/ +/)}if(W(e)){for(i=0;i<e.length;i++){this.off(e[i],t,n)}return this}if(G(e)){for(var r in e){this.off(r,e[r],t)}return this}var o,a=-1;n=n?true:false;if(e==="wheel"){e=A}if(tt(O,e)){o=this._iEvents[e];if(o&&(a=et(o,t))!==-1){this._iEvents[e].splice(a,1)}}else if(this.selector){var s=y[e],l=false;if(!s){return this}for(a=s.selectors.length-1;a>=0;a--){if(s.selectors[a]===this.selector&&s.contexts[a]===this._context){var u=s.listeners[a];for(i=u.length-1;i>=0;i--){var c=u[i][0],d=u[i][1];if(c===t&&d===n){u.splice(i,1);if(!u.length){s.selectors.splice(a,1);s.contexts.splice(a,1);s.listeners.splice(a,1);z.remove(this._context,e,qe);z.remove(this._context,e,Xe,true);if(!s.selectors.length){y[e]=null}}l=true;break}}if(l){break}}}}else{z.remove(this._element,e,t,n)}return this},set:function(e){if(!G(e)){e={}}this.options=K({},b.base);var t,n=["drag","drop","resize","gesture"],i=["draggable","dropzone","resizable","gesturable"],r=K(K({},b.perAction),e[o]||{});for(t=0;t<n.length;t++){var o=n[t];this.options[o]=K({},b[o]);this.setPerAction(o,r);this[i[t]](e[o])}var a=["accept","actionChecker","allowFrom","deltaSource","dropChecker","ignoreFrom","origin","preventDefault","rectChecker","styleCursor"];for(t=0,Ue=a.length;t<Ue;t++){var s=a[t];this.options[s]=b.base[s];if(s in e){this[s](e[s])}}return this},unset:function(){z.remove(this._element,"all");if(!X(this.selector)){z.remove(this,"all");if(this.options.styleCursor){this._element.style.cursor=""}}else{for(var e in y){var t=y[e];for(var n=0;n<t.selectors.length;n++){if(t.selectors[n]===this.selector&&t.contexts[n]===this._context){t.selectors.splice(n,1);t.contexts.splice(n,1);t.listeners.splice(n,1);if(!t.selectors.length){y[e]=null}}z.remove(this._context,e,qe);z.remove(this._context,e,Xe,true);break}}}this.dropzone(false);v.splice(et(v,this),1);return $e}};function Je(e,t){var n=false;return function(){if(!n){i.console.warn(t);n=true}return e.apply(this,arguments)}}Ke.prototype.snap=Je(Ke.prototype.snap,"Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping");Ke.prototype.restrict=Je(Ke.prototype.restrict,"Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction");Ke.prototype.inertia=Je(Ke.prototype.inertia,"Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia");Ke.prototype.autoScroll=Je(Ke.prototype.autoScroll,"Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll");Ke.prototype.squareResize=Je(Ke.prototype.squareResize,"Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square");Ke.prototype.accept=Je(Ke.prototype.accept,"Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead");Ke.prototype.dropChecker=Je(Ke.prototype.dropChecker,"Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead");Ke.prototype.context=Je(Ke.prototype.context,"Interactable#context as a method is deprecated. It will soon be a DOM Node instead");$e.isSet=function(e,t){return v.indexOfElement(e,t&&t.context)!==-1};$e.on=function(e,t,n){if(X(e)&&e.search(" ")!==-1){e=e.trim().split(/ +/)}if(W(e)){for(var i=0;i<e.length;i++){$e.on(e[i],t,n)}return $e}if(G(e)){for(var o in e){$e.on(o,e[o],t)}return $e}if(tt(O,e)){if(!N[e]){N[e]=[t]}else{N[e].push(t)}}else{z.add(r,e,t,n)}return $e};$e.off=function(e,t,n){if(X(e)&&e.search(" ")!==-1){e=e.trim().split(/ +/)}if(W(e)){for(var i=0;i<e.length;i++){$e.off(e[i],t,n)}return $e}if(G(e)){for(var o in e){$e.off(o,e[o],t)}return $e}if(!tt(O,e)){z.remove(r,e,t,n)}else{var a;if(e in N&&(a=et(N[e],t))!==-1){N[e].splice(a,1)}}return $e};$e.enableDragging=Je(function(e){if(e!==null&&e!==undefined){B.drag=e;return $e}return B.drag},"interact.enableDragging is deprecated and will soon be removed.");$e.enableResizing=Je(function(e){if(e!==null&&e!==undefined){B.resize=e;return $e}return B.resize},"interact.enableResizing is deprecated and will soon be removed.");$e.enableGesturing=Je(function(e){if(e!==null&&e!==undefined){B.gesture=e;return $e}return B.gesture},"interact.enableGesturing is deprecated and will soon be removed.");$e.eventTypes=O;$e.debug=function(){var e=m[0]||new Pe;return{interactions:m,target:e.target,dragging:e.dragging,resizing:e.resizing,gesturing:e.gesturing,prepared:e.prepared,matches:e.matches,matchElements:e.matchElements,prevCoords:e.prevCoords,startCoords:e.startCoords,pointerIds:e.pointerIds,pointers:e.pointers,addPointer:Ve.addPointer,removePointer:Ve.removePointer,recordPointer:Ve.recordPointer,snap:e.snapStatus,restrict:e.restrictStatus,inertia:e.inertiaStatus,downTime:e.downTimes[0],downEvent:e.downEvent,downPointer:e.downPointer,prevEvent:e.prevEvent,Interactable:Ke,interactables:v,pointerIsDown:e.pointerIsDown,defaultOptions:b,defaultActionChecker:Le,actionCursors:D,dragMove:Ve.dragMove,resizeMove:Ve.resizeMove,gestureMove:Ve.gestureMove,pointerUp:Ve.pointerUp,pointerDown:Ve.pointerDown,pointerMove:Ve.pointerMove,pointerHover:Ve.pointerHover,eventTypes:O,events:z,globalEvents:N,delegatedEvents:y,prefixedPropREs:J}};$e.getPointerAverage=pe;$e.getTouchBBox=he;$e.getTouchDistance=ve;$e.getTouchAngle=me;$e.getElementRect=de;$e.getElementClientRect=ce;$e.matchesSelector=nt;$e.closest=ke;$e.margin=Je(function(e){if(Y(e)){S=e;return $e}return S},"interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead.");$e.supportsTouch=function(){return w};$e.supportsPointerEvent=function(){return k};$e.stop=function(e){for(var t=m.length-1;t>=0;t--){m[t].stop(e)}return $e};$e.dynamicDrop=function(e){if(q(e)){g=e;return $e}return g};$e.pointerMoveTolerance=function(e){if(Y(e)){E=e;return this}return E};$e.maxInteractions=function(e){if(Y(e)){T=e;return this}return T};$e.createSnapGrid=function(e){return function(t,n){var i=0,r=0;if(G(e.offset)){i=e.offset.x;r=e.offset.y}var o=Math.round((t-i)/e.x),a=Math.round((n-r)/e.y),s=o*e.x+i,l=a*e.y+r;return{x:s,y:l,range:e.range}}};function Qe(e){for(var t=0;t<m.length;t++){m[t].pointerEnd(e,e)}}function Ze(e){if(tt(h,e)){return}var t=e.defaultView||e.parentWindow;for(var n in y){z.add(e,n,qe);z.add(e,n,Xe,true)}if(k){if(c===t.MSPointerEvent){d={up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}}else{d={up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}}z.add(e,d.down,Ve.selectorDown);z.add(e,d.move,Ve.pointerMove);z.add(e,d.over,Ve.pointerOver);z.add(e,d.out,Ve.pointerOut);z.add(e,d.up,Ve.pointerUp);z.add(e,d.cancel,Ve.pointerCancel);z.add(e,d.move,Ve.autoScrollMove)}else{z.add(e,"mousedown",Ve.selectorDown);z.add(e,"mousemove",Ve.pointerMove);z.add(e,"mouseup",Ve.pointerUp);z.add(e,"mouseover",Ve.pointerOver);z.add(e,"mouseout",Ve.pointerOut);z.add(e,"touchstart",Ve.selectorDown);z.add(e,"touchmove",Ve.pointerMove);z.add(e,"touchend",Ve.pointerUp);z.add(e,"touchcancel",Ve.pointerCancel);z.add(e,"mousemove",Ve.autoScrollMove);z.add(e,"touchmove",Ve.autoScrollMove)}z.add(t,"blur",Qe);try{if(t.frameElement){var i=t.frameElement.ownerDocument,r=i.defaultView;z.add(i,"mouseup",Ve.pointerEnd);z.add(i,"touchend",Ve.pointerEnd);z.add(i,"touchcancel",Ve.pointerEnd);z.add(i,"pointerup",Ve.pointerEnd);z.add(i,"MSPointerUp",Ve.pointerEnd);z.add(r,"blur",Qe)}}catch(e){$e.windowParentError=e}z.add(e,"dragstart",function(e){for(var t=0;t<m.length;t++){var n=m[t];if(n.element&&(n.element===e.target||we(n.element,e.target))){n.checkAndPreventDefault(e,n.target,n.element);return}}});if(z.useAttachEvent){z.add(e,"selectstart",function(e){var t=m[0];if(t.currentAction()){t.checkAndPreventDefault(e)}});z.add(e,"dblclick",Re("ie8Dblclick"))}h.push(e)}Ze(r);function et(e,t){for(var n=0,i=e.length;n<i;n++){if(e[n]===t){return n}}return-1}function tt(e,t){return et(e,t)!==-1}function nt(t,n,r){if(R){return R(t,n,r)}if(i!==e){n=n.replace(/\/deep\//g," ")}return t[M](n)}function it(e,t,n){while(L(e)){if(nt(e,t)){return true}e=Se(e);if(e===n){return nt(e,t)}}return false}if(!(M in Element.prototype)||!U(Element.prototype[M])){R=function(e,t,n){n=n||e.parentNode.querySelectorAll(t);for(var i=0,r=n.length;i<r;i++){if(n[i]===e){return true}}return false}}(function(){var t=0,n=["ms","moz","webkit","o"];for(var i=0;i<n.length&&!e.requestAnimationFrame;++i){_=e[n[i]+"RequestAnimationFrame"];j=e[n[i]+"CancelAnimationFrame"]||e[n[i]+"CancelRequestAnimationFrame"]}if(!_){_=function(e){var n=(new Date).getTime(),i=Math.max(0,16-(n-t)),r=setTimeout(function(){e(n+i)},i);t=n+i;return r}}if(!j){j=function(e){clearTimeout(e)}}})();if(typeof n!=="undefined"){if(typeof t!=="undefined"&&t.exports){n=t.exports=$e}n.interact=$e}else if(typeof define==="function"&&define.amd){define("interact",function(){return $e})}else{e.interact=$e}})(typeof window==="undefined"?undefined:window)},{}],10:[function(e,t,n){(function(){var e=true;(function(i){var r=this||(0,eval)("this"),o=r["document"],a=r["navigator"],s=r["jQuery"],l=r["JSON"];(function(e){if(typeof define==="function"&&define["amd"]){define(["exports","require"],e)}else if(typeof n==="object"&&typeof t==="object"){e(t["exports"]||n)}else{e(r["ko"]={})}})(function(t,n){var u=typeof t!=="undefined"?t:{};u.exportSymbol=function(e,t){var n=e.split(".");var i=u;for(var r=0;r<n.length-1;r++)i=i[n[r]];i[n[n.length-1]]=t};u.exportProperty=function(e,t,n){e[t]=n};u.version="3.4.2";u.exportSymbol("version",u.version);u.options={deferUpdates:false,useOnlyNativeEvents:false};u.utils=function(){function t(e,t){for(var n in e){if(e.hasOwnProperty(n)){t(n,e[n])}}}function n(e,t){if(t){for(var n in t){if(t.hasOwnProperty(n)){e[n]=t[n]}}}return e}function c(e,t){e.__proto__=t;return e}var d={__proto__:[]}instanceof Array;var f=!e&&typeof Symbol==="function";var p={},h={};var v=a&&/Firefox\/2/i.test(a.userAgent)?"KeyboardEvent":"UIEvents";p[v]=["keyup","keydown","keypress"];p["MouseEvents"]=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"];t(p,function(e,t){if(t.length){for(var n=0,i=t.length;n<i;n++)h[t[n]]=e}});var m={propertychange:true};var g=o&&function(){var e=3,t=o.createElement("div"),n=t.getElementsByTagName("i");while(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0]){}return e>4?e:i}();var y=g===6,b=g===7;function x(e,t){if(u.utils.tagNameLower(e)!=="input"||!e.type)return false;if(t.toLowerCase()!="click")return false;var n=e.type;return n=="checkbox"||n=="radio"}var w=/\S+/g;function k(e,t,n){var i;if(t){if(typeof e.classList==="object"){i=e.classList[n?"add":"remove"];u.utils.arrayForEach(t.match(w),function(t){i.call(e.classList,t)})}else if(typeof e.className["baseVal"]==="string"){S(e.className,"baseVal",t,n)}else{S(e,"className",t,n)}}}function S(e,t,n,i){var r=e[t].match(w)||[];u.utils.arrayForEach(n.match(w),function(e){u.utils.addOrRemoveItem(r,e,i)});e[t]=r.join(" ")}return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)},arrayIndexOf:function(e,t){if(typeof Array.prototype.indexOf=="function")return Array.prototype.indexOf.call(e,t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},arrayFirst:function(e,t,n){for(var i=0,r=e.length;i<r;i++)if(t.call(n,e[i],i))return e[i];return null},arrayRemoveItem:function(e,t){var n=u.utils.arrayIndexOf(e,t);if(n>0){e.splice(n,1)}else if(n===0){e.shift()}},arrayGetDistinctValues:function(e){e=e||[];var t=[];for(var n=0,i=e.length;n<i;n++){if(u.utils.arrayIndexOf(t,e[n])<0)t.push(e[n])}return t},arrayMap:function(e,t){e=e||[];var n=[];for(var i=0,r=e.length;i<r;i++)n.push(t(e[i],i));return n},arrayFilter:function(e,t){e=e||[];var n=[];for(var i=0,r=e.length;i<r;i++)if(t(e[i],i))n.push(e[i]);return n},arrayPushAll:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,i=t.length;n<i;n++)e.push(t[n]);return e},addOrRemoveItem:function(e,t,n){var i=u.utils.arrayIndexOf(u.utils.peekObservable(e),t);if(i<0){if(n)e.push(t)}else{if(!n)e.splice(i,1)}},canSetPrototype:d,extend:n,setPrototypeOf:c,setPrototypeOfOrExtend:d?c:n,objectForEach:t,objectMap:function(e,t){if(!e)return e;var n={};for(var i in e){if(e.hasOwnProperty(i)){n[i]=t(e[i],i,e)}}return n},emptyDomNode:function(e){while(e.firstChild){u.removeNode(e.firstChild)}},moveCleanedNodesToContainerElement:function(e){var t=u.utils.makeArray(e);var n=t[0]&&t[0].ownerDocument||o;var i=n.createElement("div");for(var r=0,a=t.length;r<a;r++){i.appendChild(u.cleanNode(t[r]))}return i},cloneNodes:function(e,t){for(var n=0,i=e.length,r=[];n<i;n++){var o=e[n].cloneNode(true);r.push(t?u.cleanNode(o):o)}return r},setDomNodeChildren:function(e,t){u.utils.emptyDomNode(e);if(t){for(var n=0,i=t.length;n<i;n++)e.appendChild(t[n])}},replaceDomNodes:function(e,t){var n=e.nodeType?[e]:e;if(n.length>0){var i=n[0];var r=i.parentNode;for(var o=0,a=t.length;o<a;o++)r.insertBefore(t[o],i);for(var o=0,a=n.length;o<a;o++){u.removeNode(n[o])}}},fixUpContinuousNodeArray:function(e,t){if(e.length){t=t.nodeType===8&&t.parentNode||t;while(e.length&&e[0].parentNode!==t)e.splice(0,1);while(e.length>1&&e[e.length-1].parentNode!==t)e.length--;if(e.length>1){var n=e[0],i=e[e.length-1];e.length=0;while(n!==i){e.push(n);n=n.nextSibling}e.push(i)}}return e},setOptionNodeSelectionState:function(e,t){if(g<7)e.setAttribute("selected",t);else e.selected=t},stringTrim:function(e){return e===null||e===i?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringStartsWith:function(e,t){e=e||"";if(t.length>e.length)return false;return e.substring(0,t.length)===t},domNodeIsContainedBy:function(e,t){if(e===t)return true;if(e.nodeType===11)return false;if(t.contains)return t.contains(e.nodeType===3?e.parentNode:e);if(t.compareDocumentPosition)return(t.compareDocumentPosition(e)&16)==16;while(e&&e!=t){e=e.parentNode}return!!e},domNodeIsAttachedToDocument:function(e){return u.utils.domNodeIsContainedBy(e,e.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(e){return!!u.utils.arrayFirst(e,u.utils.domNodeIsAttachedToDocument)},tagNameLower:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},catchFunctionErrors:function(e){return u["onError"]?function(){try{return e.apply(this,arguments)}catch(e){u["onError"]&&u["onError"](e);throw e}}:e},setTimeout:function(e,t){return setTimeout(u.utils.catchFunctionErrors(e),t)},deferError:function(e){setTimeout(function(){u["onError"]&&u["onError"](e);throw e},0)},registerEventHandler:function(e,t,n){var i=u.utils.catchFunctionErrors(n);var r=g&&m[t];if(!u.options["useOnlyNativeEvents"]&&!r&&s){s(e)["bind"](t,i)}else if(!r&&typeof e.addEventListener=="function")e.addEventListener(t,i,false);else if(typeof e.attachEvent!="undefined"){var o=function(t){i.call(e,t)},a="on"+t;e.attachEvent(a,o);u.utils.domNodeDisposal.addDisposeCallback(e,function(){e.detachEvent(a,o)})}else throw new Error("Browser doesn't support addEventListener or attachEvent")},triggerEvent:function(e,t){if(!(e&&e.nodeType))throw new Error("element must be a DOM node when calling triggerEvent");var n=x(e,t);if(!u.options["useOnlyNativeEvents"]&&s&&!n){s(e)["trigger"](t)}else if(typeof o.createEvent=="function"){if(typeof e.dispatchEvent=="function"){var i=h[t]||"HTMLEvents";var a=o.createEvent(i);a.initEvent(t,true,true,r,0,0,0,0,0,false,false,false,false,0,e);e.dispatchEvent(a)}else throw new Error("The supplied element doesn't support dispatchEvent")}else if(n&&e.click){e.click()}else if(typeof e.fireEvent!="undefined"){e.fireEvent("on"+t)}else{throw new Error("Browser doesn't support triggering events")}},unwrapObservable:function(e){return u.isObservable(e)?e():e},peekObservable:function(e){return u.isObservable(e)?e.peek():e},toggleDomNodeCssClass:k,setTextContent:function(e,t){var n=u.utils.unwrapObservable(t);if(n===null||n===i)n="";var r=u.virtualElements.firstChild(e);if(!r||r.nodeType!=3||u.virtualElements.nextSibling(r)){u.virtualElements.setDomNodeChildren(e,[e.ownerDocument.createTextNode(n)])}else{r.data=n}u.utils.forceRefresh(e)},setElementName:function(e,t){e.name=t;if(g<=7){try{e.mergeAttributes(o.createElement("<input name='"+e.name+"'/>"),false)}catch(e){}}},forceRefresh:function(e){if(g>=9){var t=e.nodeType==1?e:e.parentNode;if(t.style)t.style.zoom=t.style.zoom}},ensureSelectElementIsRenderedCorrectly:function(e){if(g){var t=e.style.width;e.style.width=0;e.style.width=t}},range:function(e,t){e=u.utils.unwrapObservable(e);t=u.utils.unwrapObservable(t);var n=[];for(var i=e;i<=t;i++)n.push(i);return n},makeArray:function(e){var t=[];for(var n=0,i=e.length;n<i;n++){t.push(e[n])}return t},createSymbolOrString:function(e){return f?Symbol(e):e},isIe6:y,isIe7:b,ieVersion:g,getFormFields:function(e,t){var n=u.utils.makeArray(e.getElementsByTagName("input")).concat(u.utils.makeArray(e.getElementsByTagName("textarea")));var i=typeof t=="string"?function(e){return e.name===t}:function(e){return t.test(e.name)};var r=[];for(var o=n.length-1;o>=0;o--){if(i(n[o]))r.push(n[o])}return r},parseJson:function(e){if(typeof e=="string"){e=u.utils.stringTrim(e);if(e){if(l&&l.parse)return l.parse(e);return new Function("return "+e)()}}return null},stringifyJson:function(e,t,n){if(!l||!l.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return l.stringify(u.utils.unwrapObservable(e),t,n)},postJson:function(e,n,i){i=i||{};var r=i["params"]||{};var a=i["includeFields"]||this.fieldsIncludedWithJsonPost;var s=e;if(typeof e=="object"&&u.utils.tagNameLower(e)==="form"){var l=e;s=l.action;for(var c=a.length-1;c>=0;c--){var d=u.utils.getFormFields(l,a[c]);for(var f=d.length-1;f>=0;f--)r[d[f].name]=d[f].value}}n=u.utils.unwrapObservable(n);var p=o.createElement("form");p.style.display="none";p.action=s;p.method="post";for(var h in n){var v=o.createElement("input");v.type="hidden";v.name=h;v.value=u.utils.stringifyJson(u.utils.unwrapObservable(n[h]));p.appendChild(v)}t(r,function(e,t){var n=o.createElement("input");n.type="hidden";n.name=e;n.value=t;p.appendChild(n)});o.body.appendChild(p);i["submitter"]?i["submitter"](p):p.submit();setTimeout(function(){p.parentNode.removeChild(p)},0)}}}();u.exportSymbol("utils",u.utils);u.exportSymbol("utils.arrayForEach",u.utils.arrayForEach);u.exportSymbol("utils.arrayFirst",u.utils.arrayFirst);u.exportSymbol("utils.arrayFilter",u.utils.arrayFilter);u.exportSymbol("utils.arrayGetDistinctValues",u.utils.arrayGetDistinctValues);u.exportSymbol("utils.arrayIndexOf",u.utils.arrayIndexOf);u.exportSymbol("utils.arrayMap",u.utils.arrayMap);u.exportSymbol("utils.arrayPushAll",u.utils.arrayPushAll);u.exportSymbol("utils.arrayRemoveItem",u.utils.arrayRemoveItem);u.exportSymbol("utils.extend",u.utils.extend);u.exportSymbol("utils.fieldsIncludedWithJsonPost",u.utils.fieldsIncludedWithJsonPost);u.exportSymbol("utils.getFormFields",u.utils.getFormFields);u.exportSymbol("utils.peekObservable",u.utils.peekObservable);u.exportSymbol("utils.postJson",u.utils.postJson);u.exportSymbol("utils.parseJson",u.utils.parseJson);u.exportSymbol("utils.registerEventHandler",u.utils.registerEventHandler);u.exportSymbol("utils.stringifyJson",u.utils.stringifyJson);u.exportSymbol("utils.range",u.utils.range);u.exportSymbol("utils.toggleDomNodeCssClass",u.utils.toggleDomNodeCssClass);u.exportSymbol("utils.triggerEvent",u.utils.triggerEvent);u.exportSymbol("utils.unwrapObservable",u.utils.unwrapObservable);u.exportSymbol("utils.objectForEach",u.utils.objectForEach);u.exportSymbol("utils.addOrRemoveItem",u.utils.addOrRemoveItem);u.exportSymbol("utils.setTextContent",u.utils.setTextContent);u.exportSymbol("unwrap",u.utils.unwrapObservable);if(!Function.prototype["bind"]){Function.prototype["bind"]=function(e){var t=this;if(arguments.length===1){return function(){return t.apply(e,arguments)}}else{var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice(0);i.push.apply(i,arguments);return t.apply(e,i)}}}}u.utils.domData=new function(){var e=0;var t="__ko__"+(new Date).getTime();var n={};function r(r,o){var a=r[t];var s=a&&a!=="null"&&n[a];if(!s){if(!o)return i;a=r[t]="ko"+e++;n[a]={}}return n[a]}return{get:function(e,t){var n=r(e,false);return n===i?i:n[t]},set:function(e,t,n){if(n===i){if(r(e,false)===i)return}var o=r(e,true);o[t]=n},clear:function(e){var i=e[t];if(i){delete n[i];e[t]=null;return true}return false},nextKey:function(){return e++ +t}}};u.exportSymbol("utils.domData",u.utils.domData);u.exportSymbol("utils.domData.clear",u.utils.domData.clear);u.utils.domNodeDisposal=new function(){var e=u.utils.domData.nextKey();var t={1:true,8:true,9:true};var n={1:true,9:true};function r(t,n){var r=u.utils.domData.get(t,e);if(r===i&&n){r=[];u.utils.domData.set(t,e,r)}return r}function o(t){u.utils.domData.set(t,e,i)}function a(e){var t=r(e,false);if(t){t=t.slice(0);for(var i=0;i<t.length;i++)t[i](e)}u.utils.domData.clear(e);u.utils.domNodeDisposal["cleanExternalData"](e);if(n[e.nodeType])l(e)}function l(e){var t,n=e.firstChild;while(t=n){n=t.nextSibling;if(t.nodeType===8)a(t)}}return{addDisposeCallback:function(e,t){if(typeof t!="function")throw new Error("Callback must be a function");r(e,true).push(t)},removeDisposeCallback:function(e,t){var n=r(e,false);if(n){u.utils.arrayRemoveItem(n,t);if(n.length==0)o(e)}},cleanNode:function(e){if(t[e.nodeType]){a(e);if(n[e.nodeType]){var i=[];u.utils.arrayPushAll(i,e.getElementsByTagName("*"));for(var r=0,o=i.length;r<o;r++)a(i[r])}}return e},removeNode:function(e){u.cleanNode(e);if(e.parentNode)e.parentNode.removeChild(e)},cleanExternalData:function(e){if(s&&typeof s["cleanData"]=="function")s["cleanData"]([e])}}};u.cleanNode=u.utils.domNodeDisposal.cleanNode;u.removeNode=u.utils.domNodeDisposal.removeNode;u.exportSymbol("cleanNode",u.cleanNode);u.exportSymbol("removeNode",u.removeNode);u.exportSymbol("utils.domNodeDisposal",u.utils.domNodeDisposal);u.exportSymbol("utils.domNodeDisposal.addDisposeCallback",u.utils.domNodeDisposal.addDisposeCallback);u.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",u.utils.domNodeDisposal.removeDisposeCallback);(function(){var e=[0,"",""],t=[1,"<table>","</table>"],n=[2,"<table><tbody>","</tbody></table>"],a=[3,"<table><tbody><tr>","</tr></tbody></table>"],l=[1,"<select multiple='multiple'>","</select>"],c={thead:t,tbody:t,tfoot:t,tr:n,td:a,th:a,option:l,optgroup:l},d=u.utils.ieVersion<=8;function f(t){var n=t.match(/^<([a-z]+)[ >]/);return n&&c[n[1]]||e}function p(e,t){t||(t=o);var n=t["parentWindow"]||t["defaultView"]||r;var i=u.utils.stringTrim(e).toLowerCase(),a=t.createElement("div"),s=f(i),l=s[0];var c="ignored<div>"+s[1]+e+s[2]+"</div>";if(typeof n["innerShiv"]=="function"){a.appendChild(n["innerShiv"](c))}else{if(d){t.appendChild(a)}a.innerHTML=c;if(d){a.parentNode.removeChild(a)}}while(l--)a=a.lastChild;return u.utils.makeArray(a.lastChild.childNodes)}function h(e,t){if(s["parseHTML"]){return s["parseHTML"](e,t)||[]}else{var n=s["clean"]([e],t);if(n&&n[0]){var i=n[0];while(i.parentNode&&i.parentNode.nodeType!==11)i=i.parentNode;if(i.parentNode)i.parentNode.removeChild(i)}return n}}u.utils.parseHtmlFragment=function(e,t){
return s?h(e,t):p(e,t)};u.utils.setHtml=function(e,t){u.utils.emptyDomNode(e);t=u.utils.unwrapObservable(t);if(t!==null&&t!==i){if(typeof t!="string")t=t.toString();if(s){s(e)["html"](t)}else{var n=u.utils.parseHtmlFragment(t,e.ownerDocument);for(var r=0;r<n.length;r++)e.appendChild(n[r])}}}})();u.exportSymbol("utils.parseHtmlFragment",u.utils.parseHtmlFragment);u.exportSymbol("utils.setHtml",u.utils.setHtml);u.memoization=function(){var e={};function t(){return((1+Math.random())*4294967296|0).toString(16).substring(1)}function n(){return t()+t()}function r(e,t){if(!e)return;if(e.nodeType==8){var n=u.memoization.parseMemoText(e.nodeValue);if(n!=null)t.push({domNode:e,memoId:n})}else if(e.nodeType==1){for(var i=0,o=e.childNodes,a=o.length;i<a;i++)r(o[i],t)}}return{memoize:function(t){if(typeof t!="function")throw new Error("You can only pass a function to ko.memoization.memoize()");var i=n();e[i]=t;return"<!--[ko_memo:"+i+"]-->"},unmemoize:function(t,n){var r=e[t];if(r===i)throw new Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{r.apply(null,n||[]);return true}finally{delete e[t]}},unmemoizeDomNodeAndDescendants:function(e,t){var n=[];r(e,n);for(var i=0,o=n.length;i<o;i++){var a=n[i].domNode;var s=[a];if(t)u.utils.arrayPushAll(s,t);u.memoization.unmemoize(n[i].memoId,s);a.nodeValue="";if(a.parentNode)a.parentNode.removeChild(a)}},parseMemoText:function(e){var t=e.match(/^\[ko_memo\:(.*?)\]$/);return t?t[1]:null}}}();u.exportSymbol("memoization",u.memoization);u.exportSymbol("memoization.memoize",u.memoization.memoize);u.exportSymbol("memoization.unmemoize",u.memoization.unmemoize);u.exportSymbol("memoization.parseMemoText",u.memoization.parseMemoText);u.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",u.memoization.unmemoizeDomNodeAndDescendants);u.tasks=function(){var e,t=[],n=0,i=1,a=0;if(r["MutationObserver"]){e=function(e){var t=o.createElement("div");new MutationObserver(e).observe(t,{attributes:true});return function(){t.classList.toggle("foo")}}(l)}else if(o&&"onreadystatechange"in o.createElement("script")){e=function(e){var t=o.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null;o.documentElement.removeChild(t);t=null;e()};o.documentElement.appendChild(t)}}else{e=function(e){setTimeout(e,0)}}function s(){if(n){var e=n,i=0;for(var r;a<n;){if(r=t[a++]){if(a>e){if(++i>=5e3){a=n;u.utils.deferError(Error("'Too much recursion' after processing "+i+" task groups."));break}e=n}try{r()}catch(e){u.utils.deferError(e)}}}}}function l(){s();a=n=t.length=0}function c(){u.tasks["scheduler"](l)}var d={scheduler:e,schedule:function(e){if(!n){c()}t[n++]=e;return i++},cancel:function(e){var r=e-(i-n);if(r>=a&&r<n){t[r]=null}},resetForTesting:function(){var e=n-a;a=n=t.length=0;return e},runEarly:s};return d}();u.exportSymbol("tasks",u.tasks);u.exportSymbol("tasks.schedule",u.tasks.schedule);u.exportSymbol("tasks.runEarly",u.tasks.runEarly);u.extenders={throttle:function(e,t){e["throttleEvaluation"]=t;var n=null;return u.dependentObservable({read:e,write:function(i){clearTimeout(n);n=u.utils.setTimeout(function(){e(i)},t)}})},rateLimit:function(e,t){var n,i,r;if(typeof t=="number"){n=t}else{n=t["timeout"];i=t["method"]}e._deferUpdates=false;r=i=="notifyWhenChangesStop"?p:f;e.limit(function(e){return r(e,n)})},deferred:function(e,t){if(t!==true){throw new Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.")}if(!e._deferUpdates){e._deferUpdates=true;e.limit(function(t){var n,r=false;return function(){if(!r){u.tasks.cancel(n);n=u.tasks.schedule(t);try{r=true;e["notifySubscribers"](i,"dirty")}finally{r=false}}}})}},notify:function(e,t){e["equalityComparer"]=t=="always"?null:d}};var c={undefined:1,boolean:1,number:1,string:1};function d(e,t){var n=e===null||typeof e in c;return n?e===t:false}function f(e,t){var n;return function(){if(!n){n=u.utils.setTimeout(function(){n=i;e()},t)}}}function p(e,t){var n;return function(){clearTimeout(n);n=u.utils.setTimeout(e,t)}}function h(e){var t=this;if(e){u.utils.objectForEach(e,function(e,n){var i=u.extenders[e];if(typeof i=="function"){t=i(t,n)||t}})}return t}u.exportSymbol("extenders",u.extenders);u.subscription=function(e,t,n){this._target=e;this.callback=t;this.disposeCallback=n;this.isDisposed=false;u.exportProperty(this,"dispose",this.dispose)};u.subscription.prototype.dispose=function(){this.isDisposed=true;this.disposeCallback()};u.subscribable=function(){u.utils.setPrototypeOfOrExtend(this,g);g.init(this)};var v="change";function m(e,t){if(!t||t===v){this._limitChange(e)}else if(t==="beforeChange"){this._limitBeforeChange(e)}else{this._origNotifySubscribers(e,t)}}var g={init:function(e){e._subscriptions={change:[]};e._versionNumber=1},subscribe:function(e,t,n){var i=this;n=n||v;var r=t?e.bind(t):e;var o=new u.subscription(i,r,function(){u.utils.arrayRemoveItem(i._subscriptions[n],o);if(i.afterSubscriptionRemove)i.afterSubscriptionRemove(n)});if(i.beforeSubscriptionAdd)i.beforeSubscriptionAdd(n);if(!i._subscriptions[n])i._subscriptions[n]=[];i._subscriptions[n].push(o);return o},notifySubscribers:function(e,t){t=t||v;if(t===v){this.updateVersion()}if(this.hasSubscriptionsForEvent(t)){var n=t===v&&this._changeSubscriptions||this._subscriptions[t].slice(0);try{u.dependencyDetection.begin();for(var i=0,r;r=n[i];++i){if(!r.isDisposed)r.callback(e)}}finally{u.dependencyDetection.end()}}},getVersion:function(){return this._versionNumber},hasChanged:function(e){return this.getVersion()!==e},updateVersion:function(){++this._versionNumber},limit:function(e){var t=this,n=u.isObservable(t),i,r,o,a,s="beforeChange";if(!t._origNotifySubscribers){t._origNotifySubscribers=t["notifySubscribers"];t["notifySubscribers"]=m}var l=e(function(){t._notificationIsPending=false;if(n&&a===t){a=t._evalIfChanged?t._evalIfChanged():t()}var e=r||t.isDifferent(o,a);r=i=false;if(e){t._origNotifySubscribers(o=a)}});t._limitChange=function(e){t._changeSubscriptions=t._subscriptions[v].slice(0);t._notificationIsPending=i=true;a=e;l()};t._limitBeforeChange=function(e){if(!i){o=e;t._origNotifySubscribers(e,s)}};t._notifyNextChangeIfValueIsDifferent=function(){if(t.isDifferent(o,t.peek(true))){r=true}}},hasSubscriptionsForEvent:function(e){return this._subscriptions[e]&&this._subscriptions[e].length},getSubscriptionsCount:function(e){if(e){return this._subscriptions[e]&&this._subscriptions[e].length||0}else{var t=0;u.utils.objectForEach(this._subscriptions,function(e,n){if(e!=="dirty")t+=n.length});return t}},isDifferent:function(e,t){return!this["equalityComparer"]||!this["equalityComparer"](e,t)},extend:h};u.exportProperty(g,"subscribe",g.subscribe);u.exportProperty(g,"extend",g.extend);u.exportProperty(g,"getSubscriptionsCount",g.getSubscriptionsCount);if(u.utils.canSetPrototype){u.utils.setPrototypeOf(g,Function.prototype)}u.subscribable["fn"]=g;u.isSubscribable=function(e){return e!=null&&typeof e.subscribe=="function"&&typeof e["notifySubscribers"]=="function"};u.exportSymbol("subscribable",u.subscribable);u.exportSymbol("isSubscribable",u.isSubscribable);u.computedContext=u.dependencyDetection=function(){var e=[],t,n=0;function i(){return++n}function r(n){e.push(t);t=n}function o(){t=e.pop()}return{begin:r,end:o,registerDependency:function(e){if(t){if(!u.isSubscribable(e))throw new Error("Only subscribable things can act as dependencies");t.callback.call(t.callbackTarget,e,e._id||(e._id=i()))}},ignore:function(e,t,n){try{r();return e.apply(t,n||[])}finally{o()}},getDependenciesCount:function(){if(t)return t.computed.getDependenciesCount()},isInitial:function(){if(t)return t.isInitial}}}();u.exportSymbol("computedContext",u.computedContext);u.exportSymbol("computedContext.getDependenciesCount",u.computedContext.getDependenciesCount);u.exportSymbol("computedContext.isInitial",u.computedContext.isInitial);u.exportSymbol("ignoreDependencies",u.ignoreDependencies=u.dependencyDetection.ignore);var y=u.utils.createSymbolOrString("_latestValue");u.observable=function(e){function t(){if(arguments.length>0){if(t.isDifferent(t[y],arguments[0])){t.valueWillMutate();t[y]=arguments[0];t.valueHasMutated()}return this}else{u.dependencyDetection.registerDependency(t);return t[y]}}t[y]=e;if(!u.utils.canSetPrototype){u.utils.extend(t,u.subscribable["fn"])}u.subscribable["fn"].init(t);u.utils.setPrototypeOfOrExtend(t,b);if(u.options["deferUpdates"]){u.extenders["deferred"](t,true)}return t};var b={equalityComparer:d,peek:function(){return this[y]},valueHasMutated:function(){this["notifySubscribers"](this[y])},valueWillMutate:function(){this["notifySubscribers"](this[y],"beforeChange")}};if(u.utils.canSetPrototype){u.utils.setPrototypeOf(b,u.subscribable["fn"])}var x=u.observable.protoProperty="__ko_proto__";b[x]=u.observable;u.hasPrototype=function(e,t){if(e===null||e===i||e[x]===i)return false;if(e[x]===t)return true;return u.hasPrototype(e[x],t)};u.isObservable=function(e){return u.hasPrototype(e,u.observable)};u.isWriteableObservable=function(e){if(typeof e=="function"&&e[x]===u.observable)return true;if(typeof e=="function"&&e[x]===u.dependentObservable&&e.hasWriteFunction)return true;return false};u.exportSymbol("observable",u.observable);u.exportSymbol("isObservable",u.isObservable);u.exportSymbol("isWriteableObservable",u.isWriteableObservable);u.exportSymbol("isWritableObservable",u.isWriteableObservable);u.exportSymbol("observable.fn",b);u.exportProperty(b,"peek",b.peek);u.exportProperty(b,"valueHasMutated",b.valueHasMutated);u.exportProperty(b,"valueWillMutate",b.valueWillMutate);u.observableArray=function(e){e=e||[];if(typeof e!="object"||!("length"in e))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var t=u.observable(e);u.utils.setPrototypeOfOrExtend(t,u.observableArray["fn"]);return t.extend({trackArrayChanges:true})};u.observableArray["fn"]={remove:function(e){var t=this.peek();var n=[];var i=typeof e=="function"&&!u.isObservable(e)?e:function(t){return t===e};for(var r=0;r<t.length;r++){var o=t[r];if(i(o)){if(n.length===0){this.valueWillMutate()}n.push(o);t.splice(r,1);r--}}if(n.length){this.valueHasMutated()}return n},removeAll:function(e){if(e===i){var t=this.peek();var n=t.slice(0);this.valueWillMutate();t.splice(0,t.length);this.valueHasMutated();return n}if(!e)return[];return this["remove"](function(t){return u.utils.arrayIndexOf(e,t)>=0})},destroy:function(e){var t=this.peek();var n=typeof e=="function"&&!u.isObservable(e)?e:function(t){return t===e};this.valueWillMutate();for(var i=t.length-1;i>=0;i--){var r=t[i];if(n(r))t[i]["_destroy"]=true}this.valueHasMutated()},destroyAll:function(e){if(e===i)return this["destroy"](function(){return true});if(!e)return[];return this["destroy"](function(t){return u.utils.arrayIndexOf(e,t)>=0})},indexOf:function(e){var t=this();return u.utils.arrayIndexOf(t,e)},replace:function(e,t){var n=this["indexOf"](e);if(n>=0){this.valueWillMutate();this.peek()[n]=t;this.valueHasMutated()}}};if(u.utils.canSetPrototype){u.utils.setPrototypeOf(u.observableArray["fn"],u.observable["fn"])}u.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(e){u.observableArray["fn"][e]=function(){var t=this.peek();this.valueWillMutate();this.cacheDiffForKnownOperation(t,e,arguments);var n=t[e].apply(t,arguments);this.valueHasMutated();return n===t?this:n}});u.utils.arrayForEach(["slice"],function(e){u.observableArray["fn"][e]=function(){var t=this();return t[e].apply(t,arguments)}});u.exportSymbol("observableArray",u.observableArray);var w="arrayChange";u.extenders["trackArrayChanges"]=function(e,t){e.compareArrayOptions={};if(t&&typeof t=="object"){u.utils.extend(e.compareArrayOptions,t)}e.compareArrayOptions["sparse"]=true;if(e.cacheDiffForKnownOperation){return}var n=false,r=null,o,a=0,s,l=e.beforeSubscriptionAdd,c=e.afterSubscriptionRemove;e.beforeSubscriptionAdd=function(t){if(l)l.call(e,t);if(t===w){d()}};e.afterSubscriptionRemove=function(t){if(c)c.call(e,t);if(t===w&&!e.hasSubscriptionsForEvent(w)){if(s){e["notifySubscribers"]=s;s=i}o.dispose();n=false}};function d(){if(n){return}n=true;s=e["notifySubscribers"];e["notifySubscribers"]=function(e,t){if(!t||t===v){++a}return s.apply(this,arguments)};var t=[].concat(e.peek()||[]);r=null;o=e.subscribe(function(n){n=[].concat(n||[]);if(e.hasSubscriptionsForEvent(w)){var i=f(t,n)}t=n;r=null;a=0;if(i&&i.length){e["notifySubscribers"](i,w)}})}function f(t,n){if(!r||a>1){r=u.utils.compareArrays(t,n,e.compareArrayOptions)}return r}e.cacheDiffForKnownOperation=function(e,t,i){if(!n||a){return}var o=[],s=e.length,l=i.length,c=0;function d(e,t,n){return o[o.length]={status:e,value:t,index:n}}switch(t){case"push":c=s;case"unshift":for(var f=0;f<l;f++){d("added",i[f],c+f)}break;case"pop":c=s-1;case"shift":if(s){d("deleted",e[c],c)}break;case"splice":var p=Math.min(Math.max(0,i[0]<0?s+i[0]:i[0]),s),h=l===1?s:Math.min(p+(i[1]||0),s),v=p+l-2,m=Math.max(h,v),g=[],y=[];for(var f=p,b=2;f<m;++f,++b){if(f<h)y.push(d("deleted",e[f],f));if(f<v)g.push(d("added",i[b],f))}u.utils.findMovesInArrayComparison(y,g);break;default:return}r=o}};var k=u.utils.createSymbolOrString("_state");u.computed=u.dependentObservable=function(t,n,r){if(typeof t==="object"){r=t}else{r=r||{};if(t){r["read"]=t}}if(typeof r["read"]!="function")throw Error("Pass a function that returns the value of the ko.computed");var o=r["write"];var a={latestValue:i,isStale:true,isDirty:true,isBeingEvaluated:false,suppressDisposalUntilDisposeWhenReturnsFalse:false,isDisposed:false,pure:false,isSleeping:false,readFunction:r["read"],evaluatorFunctionTarget:n||r["owner"],disposeWhenNodeIsRemoved:r["disposeWhenNodeIsRemoved"]||r.disposeWhenNodeIsRemoved||null,disposeWhen:r["disposeWhen"]||r.disposeWhen,domNodeDisposalCallback:null,dependencyTracking:{},dependenciesCount:0,evaluationTimeoutInstance:null};function s(){if(arguments.length>0){if(typeof o==="function"){o.apply(a.evaluatorFunctionTarget,arguments)}else{throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.")}return this}else{u.dependencyDetection.registerDependency(s);if(a.isDirty||a.isSleeping&&s.haveDependenciesChanged()){s.evaluateImmediate()}return a.latestValue}}s[k]=a;s.hasWriteFunction=typeof o==="function";if(!u.utils.canSetPrototype){u.utils.extend(s,u.subscribable["fn"])}u.subscribable["fn"].init(s);u.utils.setPrototypeOfOrExtend(s,C);if(r["pure"]){a.pure=true;a.isSleeping=true;u.utils.extend(s,T)}else if(r["deferEvaluation"]){u.utils.extend(s,D)}if(u.options["deferUpdates"]){u.extenders["deferred"](s,true)}if(e){s["_options"]=r}if(a.disposeWhenNodeIsRemoved){a.suppressDisposalUntilDisposeWhenReturnsFalse=true;if(!a.disposeWhenNodeIsRemoved.nodeType){a.disposeWhenNodeIsRemoved=null}}if(!a.isSleeping&&!r["deferEvaluation"]){s.evaluateImmediate()}if(a.disposeWhenNodeIsRemoved&&s.isActive()){u.utils.domNodeDisposal.addDisposeCallback(a.disposeWhenNodeIsRemoved,a.domNodeDisposalCallback=function(){s.dispose()})}return s};function S(e,t){if(t!==null&&t.dispose){t.dispose()}}function E(e,t){var n=this.computedObservable,i=n[k];if(!i.isDisposed){if(this.disposalCount&&this.disposalCandidates[t]){n.addDependencyTracking(t,e,this.disposalCandidates[t]);this.disposalCandidates[t]=null;--this.disposalCount}else if(!i.dependencyTracking[t]){n.addDependencyTracking(t,e,i.isSleeping?{_target:e}:n.subscribeToDependency(e))}if(e._notificationIsPending){e._notifyNextChangeIfValueIsDifferent()}}}var C={equalityComparer:d,getDependenciesCount:function(){return this[k].dependenciesCount},addDependencyTracking:function(e,t,n){if(this[k].pure&&t===this){throw Error("A 'pure' computed must not be called recursively")}this[k].dependencyTracking[e]=n;n._order=this[k].dependenciesCount++;n._version=t.getVersion()},haveDependenciesChanged:function(){var e,t,n=this[k].dependencyTracking;for(e in n){if(n.hasOwnProperty(e)){t=n[e];if(this._evalDelayed&&t._target._notificationIsPending||t._target.hasChanged(t._version)){return true}}}},markDirty:function(){if(this._evalDelayed&&!this[k].isBeingEvaluated){this._evalDelayed(false)}},isActive:function(){var e=this[k];return e.isDirty||e.dependenciesCount>0},respondToChange:function(){if(!this._notificationIsPending){this.evaluatePossiblyAsync()}else if(this[k].isDirty){this[k].isStale=true}},subscribeToDependency:function(e){if(e._deferUpdates&&!this[k].disposeWhenNodeIsRemoved){var t=e.subscribe(this.markDirty,this,"dirty"),n=e.subscribe(this.respondToChange,this);return{_target:e,dispose:function(){t.dispose();n.dispose()}}}else{return e.subscribe(this.evaluatePossiblyAsync,this)}},evaluatePossiblyAsync:function(){var e=this,t=e["throttleEvaluation"];if(t&&t>=0){clearTimeout(this[k].evaluationTimeoutInstance);this[k].evaluationTimeoutInstance=u.utils.setTimeout(function(){e.evaluateImmediate(true)},t)}else if(e._evalDelayed){e._evalDelayed(true)}else{e.evaluateImmediate(true)}},evaluateImmediate:function(e){var t=this,n=t[k],i=n.disposeWhen,r=false;if(n.isBeingEvaluated){return}if(n.isDisposed){return}if(n.disposeWhenNodeIsRemoved&&!u.utils.domNodeIsAttachedToDocument(n.disposeWhenNodeIsRemoved)||i&&i()){if(!n.suppressDisposalUntilDisposeWhenReturnsFalse){t.dispose();return}}else{n.suppressDisposalUntilDisposeWhenReturnsFalse=false}n.isBeingEvaluated=true;try{r=this.evaluateImmediate_CallReadWithDependencyDetection(e)}finally{n.isBeingEvaluated=false}if(!n.dependenciesCount){t.dispose()}return r},evaluateImmediate_CallReadWithDependencyDetection:function(t){var n=this,r=n[k],o=false;var a=r.pure?i:!r.dependenciesCount,s={computedObservable:n,disposalCandidates:r.dependencyTracking,disposalCount:r.dependenciesCount};u.dependencyDetection.begin({callbackTarget:s,callback:E,computed:n,isInitial:a});r.dependencyTracking={};r.dependenciesCount=0;var l=this.evaluateImmediate_CallReadThenEndDependencyDetection(r,s);if(n.isDifferent(r.latestValue,l)){if(!r.isSleeping){n["notifySubscribers"](r.latestValue,"beforeChange")}r.latestValue=l;if(e)n._latestValue=l;if(r.isSleeping){n.updateVersion()}else if(t){n["notifySubscribers"](r.latestValue)}o=true}if(a){n["notifySubscribers"](r.latestValue,"awake")}return o},evaluateImmediate_CallReadThenEndDependencyDetection:function(e,t){try{var n=e.readFunction;return e.evaluatorFunctionTarget?n.call(e.evaluatorFunctionTarget):n()}finally{u.dependencyDetection.end();if(t.disposalCount&&!e.isSleeping){u.utils.objectForEach(t.disposalCandidates,S)}e.isStale=e.isDirty=false}},peek:function(e){var t=this[k];if(t.isDirty&&(e||!t.dependenciesCount)||t.isSleeping&&this.haveDependenciesChanged()){this.evaluateImmediate()}return t.latestValue},limit:function(e){u.subscribable["fn"].limit.call(this,e);this._evalIfChanged=function(){if(this[k].isStale){this.evaluateImmediate()}else{this[k].isDirty=false}return this[k].latestValue};this._evalDelayed=function(e){this._limitBeforeChange(this[k].latestValue);this[k].isDirty=true;if(e){this[k].isStale=true}this._limitChange(this)}},dispose:function(){var e=this[k];if(!e.isSleeping&&e.dependencyTracking){u.utils.objectForEach(e.dependencyTracking,function(e,t){if(t.dispose)t.dispose()})}if(e.disposeWhenNodeIsRemoved&&e.domNodeDisposalCallback){u.utils.domNodeDisposal.removeDisposeCallback(e.disposeWhenNodeIsRemoved,e.domNodeDisposalCallback)}e.dependencyTracking=null;e.dependenciesCount=0;e.isDisposed=true;e.isStale=false;e.isDirty=false;e.isSleeping=false;e.disposeWhenNodeIsRemoved=null}};var T={beforeSubscriptionAdd:function(e){var t=this,n=t[k];if(!n.isDisposed&&n.isSleeping&&e=="change"){n.isSleeping=false;if(n.isStale||t.haveDependenciesChanged()){n.dependencyTracking=null;n.dependenciesCount=0;if(t.evaluateImmediate()){t.updateVersion()}}else{var i=[];u.utils.objectForEach(n.dependencyTracking,function(e,t){i[t._order]=e});u.utils.arrayForEach(i,function(e,i){var r=n.dependencyTracking[e],o=t.subscribeToDependency(r._target);o._order=i;o._version=r._version;n.dependencyTracking[e]=o})}if(!n.isDisposed){t["notifySubscribers"](n.latestValue,"awake")}}},afterSubscriptionRemove:function(e){var t=this[k];if(!t.isDisposed&&e=="change"&&!this.hasSubscriptionsForEvent("change")){u.utils.objectForEach(t.dependencyTracking,function(e,n){if(n.dispose){t.dependencyTracking[e]={_target:n._target,_order:n._order,_version:n._version};n.dispose()}});t.isSleeping=true;this["notifySubscribers"](i,"asleep")}},getVersion:function(){var e=this[k];if(e.isSleeping&&(e.isStale||this.haveDependenciesChanged())){this.evaluateImmediate()}return u.subscribable["fn"].getVersion.call(this)}};var D={beforeSubscriptionAdd:function(e){if(e=="change"||e=="beforeChange"){this.peek()}}};if(u.utils.canSetPrototype){u.utils.setPrototypeOf(C,u.subscribable["fn"])}var B=u.observable.protoProperty;u.computed[B]=u.observable;C[B]=u.computed;u.isComputed=function(e){return u.hasPrototype(e,u.computed)};u.isPureComputed=function(e){return u.hasPrototype(e,u.computed)&&e[k]&&e[k].pure};u.exportSymbol("computed",u.computed);u.exportSymbol("dependentObservable",u.computed);u.exportSymbol("isComputed",u.isComputed);u.exportSymbol("isPureComputed",u.isPureComputed);u.exportSymbol("computed.fn",C);u.exportProperty(C,"peek",C.peek);u.exportProperty(C,"dispose",C.dispose);u.exportProperty(C,"isActive",C.isActive);u.exportProperty(C,"getDependenciesCount",C.getDependenciesCount);u.pureComputed=function(e,t){if(typeof e==="function"){return u.computed(e,t,{pure:true})}else{e=u.utils.extend({},e);e["pure"]=true;return u.computed(e,t)}};u.exportSymbol("pureComputed",u.pureComputed);(function(){var e=10;u.toJS=function(n){if(arguments.length==0)throw new Error("When calling ko.toJS, pass the object you want to convert.");return t(n,function(t){for(var n=0;u.isObservable(t)&&n<e;n++)t=t();return t})};u.toJSON=function(e,t,n){var i=u.toJS(e);return u.utils.stringifyJson(i,t,n)};function t(e,o,a){a=a||new r;e=o(e);var s=typeof e=="object"&&e!==null&&e!==i&&!(e instanceof RegExp)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof Number)&&!(e instanceof Boolean);if(!s)return e;var l=e instanceof Array?[]:{};a.save(e,l);n(e,function(n){var r=o(e[n]);switch(typeof r){case"boolean":case"number":case"string":case"function":l[n]=r;break;case"object":case"undefined":var s=a.get(r);l[n]=s!==i?s:t(r,o,a);break}});return l}function n(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);if(typeof e["toJSON"]=="function")t("toJSON")}else{for(var i in e){t(i)}}}function r(){this.keys=[];this.values=[]}r.prototype={constructor:r,save:function(e,t){var n=u.utils.arrayIndexOf(this.keys,e);if(n>=0)this.values[n]=t;else{this.keys.push(e);this.values.push(t)}},get:function(e){var t=u.utils.arrayIndexOf(this.keys,e);return t>=0?this.values[t]:i}}})();u.exportSymbol("toJS",u.toJS);u.exportSymbol("toJSON",u.toJSON);(function(){var e="__ko__hasDomDataOptionValue__";u.selectExtensions={readValue:function(t){switch(u.utils.tagNameLower(t)){case"option":if(t[e]===true)return u.utils.domData.get(t,u.bindingHandlers.options.optionValueDomDataKey);return u.utils.ieVersion<=7?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return t.selectedIndex>=0?u.selectExtensions.readValue(t.options[t.selectedIndex]):i;default:return t.value}},writeValue:function(t,n,r){switch(u.utils.tagNameLower(t)){case"option":switch(typeof n){case"string":u.utils.domData.set(t,u.bindingHandlers.options.optionValueDomDataKey,i);if(e in t){delete t[e]}t.value=n;break;default:u.utils.domData.set(t,u.bindingHandlers.options.optionValueDomDataKey,n);t[e]=true;t.value=typeof n==="number"?n:"";break}break;case"select":if(n===""||n===null)n=i;var o=-1;for(var a=0,s=t.options.length,l;a<s;++a){l=u.selectExtensions.readValue(t.options[a]);if(l==n||l==""&&n===i){o=a;break}}if(r||o>=0||n===i&&t.size>1){t.selectedIndex=o}break;default:if(n===null||n===i)n="";t.value=n;break}}}})();u.exportSymbol("selectExtensions",u.selectExtensions);u.exportSymbol("selectExtensions.readValue",u.selectExtensions.readValue);u.exportSymbol("selectExtensions.writeValue",u.selectExtensions.writeValue);u.expressionRewriting=function(){var e=["true","false","null","undefined"];var t=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;function n(n){if(u.utils.arrayIndexOf(e,n)>=0)return false;var i=n.match(t);return i===null?false:i[1]?"Object("+i[1]+")"+i[2]:n}var i='"(?:[^"\\\\]|\\\\.)*"',r="'(?:[^'\\\\]|\\\\.)*'",o="/(?:[^/\\\\]|\\\\.)*/w*",a=",\"'{}()/:[\\]",s="[^\\s:,/][^"+a+"]*[^\\s"+a+"]",l="[^\\s]",c=RegExp(i+"|"+r+"|"+o+"|"+s+"|"+l,"g"),d=/[\])"'A-Za-z0-9_$]+$/,f={in:1,return:1,typeof:1};function p(e){var t=u.utils.stringTrim(e);if(t.charCodeAt(0)===123)t=t.slice(1,-1);var n=[],i=t.match(c),r,o=[],a=0;if(i){i.push(",");for(var s=0,l;l=i[s];++s){var p=l.charCodeAt(0);if(p===44){if(a<=0){n.push(r&&o.length?{key:r,value:o.join("")}:{unknown:r||o.join("")});r=a=0;o=[];continue}}else if(p===58){if(!a&&!r&&o.length===1){r=o.pop();continue}}else if(p===47&&s&&l.length>1){var h=i[s-1].match(d);if(h&&!f[h[0]]){t=t.substr(t.indexOf(l)+1);i=t.match(c);i.push(",");s=-1;l="/"}}else if(p===40||p===123||p===91){++a}else if(p===41||p===125||p===93){--a}else if(!r&&!o.length&&(p===34||p===39)){l=l.slice(1,-1)}o.push(l)}}return n}var h={};function v(e,t){t=t||{};function i(e,t){var l;function c(n){return n&&n["preprocess"]?t=n["preprocess"](t,e,i):true}if(!s){if(!c(u["getBindingHandler"](e)))return;if(h[e]&&(l=n(t))){o.push("'"+e+"':function(_z){"+l+"=_z}")}}if(a){t="function(){return "+t+" }"}r.push("'"+e+"':"+t)}var r=[],o=[],a=t["valueAccessors"],s=t["bindingParams"],l=typeof e==="string"?p(e):e;u.utils.arrayForEach(l,function(e){i(e.key||e["unknown"],e.value)});if(o.length)i("_ko_property_writers","{"+o.join(",")+" }");return r.join(",")}return{bindingRewriteValidators:[],twoWayBindings:h,parseObjectLiteral:p,preProcessBindings:v,keyValueArrayContainsKey:function(e,t){for(var n=0;n<e.length;n++)if(e[n]["key"]==t)return true;return false},writeValueToProperty:function(e,t,n,i,r){if(!e||!u.isObservable(e)){var o=t.get("_ko_property_writers");if(o&&o[n])o[n](i)}else if(u.isWriteableObservable(e)&&(!r||e.peek()!==i)){e(i)}}}}();u.exportSymbol("expressionRewriting",u.expressionRewriting);u.exportSymbol("expressionRewriting.bindingRewriteValidators",u.expressionRewriting.bindingRewriteValidators);u.exportSymbol("expressionRewriting.parseObjectLiteral",u.expressionRewriting.parseObjectLiteral);u.exportSymbol("expressionRewriting.preProcessBindings",u.expressionRewriting.preProcessBindings);u.exportSymbol("expressionRewriting._twoWayBindings",u.expressionRewriting.twoWayBindings);u.exportSymbol("jsonExpressionRewriting",u.expressionRewriting);u.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",u.expressionRewriting.preProcessBindings);(function(){var e=o&&o.createComment("test").text==="<!--test-->";var t=e?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/;var n=e?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/;var i={ul:true,ol:true};function r(n){return n.nodeType==8&&t.test(e?n.text:n.nodeValue)}function a(t){return t.nodeType==8&&n.test(e?t.text:t.nodeValue)}function s(e,t){var n=e;var i=1;var o=[];while(n=n.nextSibling){if(a(n)){i--;if(i===0)return o}o.push(n);if(r(n))i++}if(!t)throw new Error("Cannot find closing comment tag to match: "+e.nodeValue);return null}function l(e,t){var n=s(e,t);if(n){if(n.length>0)return n[n.length-1].nextSibling;return e.nextSibling}else return null}function c(e){var t=e.firstChild,n=null;if(t){do{if(n)n.push(t);else if(r(t)){var i=l(t,true);if(i)t=i;else n=[t]}else if(a(t)){n=[t]}}while(t=t.nextSibling)}return n}u.virtualElements={allowedBindings:{},childNodes:function(e){return r(e)?s(e):e.childNodes},emptyNode:function(e){if(!r(e))u.utils.emptyDomNode(e);else{var t=u.virtualElements.childNodes(e);for(var n=0,i=t.length;n<i;n++)u.removeNode(t[n])}},setDomNodeChildren:function(e,t){if(!r(e))u.utils.setDomNodeChildren(e,t);else{u.virtualElements.emptyNode(e);var n=e.nextSibling;for(var i=0,o=t.length;i<o;i++)n.parentNode.insertBefore(t[i],n)}},prepend:function(e,t){if(!r(e)){if(e.firstChild)e.insertBefore(t,e.firstChild);else e.appendChild(t)}else{e.parentNode.insertBefore(t,e.nextSibling)}},insertAfter:function(e,t,n){if(!n){u.virtualElements.prepend(e,t)}else if(!r(e)){if(n.nextSibling)e.insertBefore(t,n.nextSibling);else e.appendChild(t)}else{e.parentNode.insertBefore(t,n.nextSibling)}},firstChild:function(e){if(!r(e))return e.firstChild;if(!e.nextSibling||a(e.nextSibling))return null;return e.nextSibling},nextSibling:function(e){if(r(e))e=l(e);if(e.nextSibling&&a(e.nextSibling))return null;return e.nextSibling},hasBindingValue:r,virtualNodeBindingValue:function(n){var i=(e?n.text:n.nodeValue).match(t);return i?i[1]:null},normaliseVirtualElementDomStructure:function(e){if(!i[u.utils.tagNameLower(e)])return;var t=e.firstChild;if(t){do{if(t.nodeType===1){var n=c(t);if(n){var r=t.nextSibling;for(var o=0;o<n.length;o++){if(r)e.insertBefore(n[o],r);else e.appendChild(n[o])}}}}while(t=t.nextSibling)}}}})();u.exportSymbol("virtualElements",u.virtualElements);u.exportSymbol("virtualElements.allowedBindings",u.virtualElements.allowedBindings);u.exportSymbol("virtualElements.emptyNode",u.virtualElements.emptyNode);u.exportSymbol("virtualElements.insertAfter",u.virtualElements.insertAfter);u.exportSymbol("virtualElements.prepend",u.virtualElements.prepend);u.exportSymbol("virtualElements.setDomNodeChildren",u.virtualElements.setDomNodeChildren);(function(){var e="data-bind";u.bindingProvider=function(){this.bindingCache={}};u.utils.extend(u.bindingProvider.prototype,{nodeHasBindings:function(t){switch(t.nodeType){case 1:return t.getAttribute(e)!=null||u.components["getComponentNameForNode"](t);case 8:return u.virtualElements.hasBindingValue(t);default:return false}},getBindings:function(e,t){var n=this["getBindingsString"](e,t),i=n?this["parseBindingsString"](n,t,e):null;return u.components.addBindingsForCustomElement(i,e,t,false)},getBindingAccessors:function(e,t){var n=this["getBindingsString"](e,t),i=n?this["parseBindingsString"](n,t,e,{valueAccessors:true}):null;return u.components.addBindingsForCustomElement(i,e,t,true)},getBindingsString:function(t,n){switch(t.nodeType){case 1:return t.getAttribute(e);case 8:return u.virtualElements.virtualNodeBindingValue(t);default:return null}},parseBindingsString:function(e,n,i,r){try{var o=t(e,this.bindingCache,r);return o(n,i)}catch(t){t.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+t.message;throw t}}});u.bindingProvider["instance"]=new u.bindingProvider;function t(e,t,i){var r=e+(i&&i["valueAccessors"]||"");return t[r]||(t[r]=n(e,i))}function n(e,t){var n=u.expressionRewriting.preProcessBindings(e,t),i="with($context){with($data||{}){return{"+n+"}}}";return new Function("$context","$element",i)}})();u.exportSymbol("bindingProvider",u.bindingProvider);(function(){u.bindingHandlers={};var e={script:true,textarea:true,template:true};u["getBindingHandler"]=function(e){return u.bindingHandlers[e]};u.bindingContext=function(e,t,n,r,o){function a(){var i=c?e():e,o=u.utils.unwrapObservable(i);if(t){if(t._subscribable)t._subscribable();u.utils.extend(l,t);l._subscribable=f}else{l["$parents"]=[];l["$root"]=o;l["ko"]=u}l["$rawData"]=i;l["$data"]=o;if(n)l[n]=o;if(r)r(l,t,o);return l["$data"]}function s(){return d&&!u.utils.anyDomNodeIsAttachedToDocument(d)}var l=this,c=typeof e=="function"&&!u.isObservable(e),d,f;if(o&&o["exportDependencies"]){a()}else{f=u.dependentObservable(a,null,{disposeWhen:s,disposeWhenNodeIsRemoved:true});if(f.isActive()){l._subscribable=f;f["equalityComparer"]=null;d=[];f._addNode=function(e){d.push(e);u.utils.domNodeDisposal.addDisposeCallback(e,function(e){u.utils.arrayRemoveItem(d,e);if(!d.length){f.dispose();l._subscribable=f=i}})}}}};u.bindingContext.prototype["createChildContext"]=function(e,t,n,i){return new u.bindingContext(e,this,t,function(e,t){
e["$parentContext"]=t;e["$parent"]=t["$data"];e["$parents"]=(t["$parents"]||[]).slice(0);e["$parents"].unshift(e["$parent"]);if(n)n(e)},i)};u.bindingContext.prototype["extend"]=function(e){return new u.bindingContext(this._subscribable||this["$data"],this,null,function(t,n){t["$rawData"]=n["$rawData"];u.utils.extend(t,typeof e=="function"?e():e)})};u.bindingContext.prototype.createStaticChildContext=function(e,t){return this["createChildContext"](e,t,null,{exportDependencies:true})};function t(e){return function(){return e}}function n(e){return e()}function o(e){return u.utils.objectMap(u.dependencyDetection.ignore(e),function(t,n){return function(){return e()[n]}})}function a(e,n,i){if(typeof e==="function"){return o(e.bind(null,n,i))}else{return u.utils.objectMap(e,t)}}function l(e,t){return o(this["getBindings"].bind(this,e,t))}function c(e){var t=u.virtualElements.allowedBindings[e];if(!t)throw new Error("The binding '"+e+"' cannot be used with virtual elements")}function d(e,t,n){var i,r=u.virtualElements.firstChild(t),o=u.bindingProvider["instance"],a=o["preprocessNode"];if(a){while(i=r){r=u.virtualElements.nextSibling(i);a.call(o,i)}r=u.virtualElements.firstChild(t)}while(i=r){r=u.virtualElements.nextSibling(i);f(e,i,n)}}function f(t,n,i){var r=true;var o=n.nodeType===1;if(o)u.virtualElements.normaliseVirtualElementDomStructure(n);var a=o&&i||u.bindingProvider["instance"]["nodeHasBindings"](n);if(a)r=v(n,null,t,i)["shouldBindDescendants"];if(r&&!e[u.utils.tagNameLower(n)]){d(t,n,!o)}}var p=u.utils.domData.nextKey();function h(e){var t=[],n={},i=[];u.utils.objectForEach(e,function r(o){if(!n[o]){var a=u["getBindingHandler"](o);if(a){if(a["after"]){i.push(o);u.utils.arrayForEach(a["after"],function(t){if(e[t]){if(u.utils.arrayIndexOf(i,t)!==-1){throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+i.join(", "))}else{r(t)}}});i.length--}t.push({key:o,handler:a})}n[o]=true}});return t}function v(e,t,r,o){var a=u.utils.domData.get(e,p);if(!t){if(a){throw Error("You cannot apply bindings multiple times to the same element.")}u.utils.domData.set(e,p,true)}if(!a&&o)u.storedBindingContextForNode(e,r);var s;if(t&&typeof t!=="function"){s=t}else{var d=u.bindingProvider["instance"],f=d["getBindingAccessors"]||l;var v=u.dependentObservable(function(){s=t?t(r,e):f.call(d,e,r);if(s&&r._subscribable)r._subscribable();return s},null,{disposeWhenNodeIsRemoved:e});if(!s||!v.isActive())v=null}var m;if(s){var g=v?function(e){return function(){return n(v()[e])}}:function(e){return s[e]};function y(){return u.utils.objectMap(v?v():s,n)}y["get"]=function(e){return s[e]&&n(g(e))};y["has"]=function(e){return e in s};var b=h(s);u.utils.arrayForEach(b,function(t){var n=t.handler["init"],o=t.handler["update"],a=t.key;if(e.nodeType===8){c(a)}try{if(typeof n=="function"){u.dependencyDetection.ignore(function(){var t=n(e,g(a),y,r["$data"],r);if(t&&t["controlsDescendantBindings"]){if(m!==i)throw new Error("Multiple bindings ("+m+" and "+a+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");m=a}})}if(typeof o=="function"){u.dependentObservable(function(){o(e,g(a),y,r["$data"],r)},null,{disposeWhenNodeIsRemoved:e})}}catch(e){e.message='Unable to process binding "'+a+": "+s[a]+'"\nMessage: '+e.message;throw e}})}return{shouldBindDescendants:m===i}}var m=u.utils.domData.nextKey();u.storedBindingContextForNode=function(e,t){if(arguments.length==2){u.utils.domData.set(e,m,t);if(t._subscribable)t._subscribable._addNode(e)}else{return u.utils.domData.get(e,m)}};function g(e){return e&&e instanceof u.bindingContext?e:new u.bindingContext(e)}u.applyBindingAccessorsToNode=function(e,t,n){if(e.nodeType===1)u.virtualElements.normaliseVirtualElementDomStructure(e);return v(e,t,g(n),true)};u.applyBindingsToNode=function(e,t,n){var i=g(n);return u.applyBindingAccessorsToNode(e,a(t,i,e),i)};u.applyBindingsToDescendants=function(e,t){if(t.nodeType===1||t.nodeType===8)d(g(e),t,true)};u.applyBindings=function(e,t){if(!s&&r["jQuery"]){s=r["jQuery"]}if(t&&t.nodeType!==1&&t.nodeType!==8)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");t=t||r.document.body;f(g(e),t,true)};u.contextFor=function(e){switch(e.nodeType){case 1:case 8:var t=u.storedBindingContextForNode(e);if(t)return t;if(e.parentNode)return u.contextFor(e.parentNode);break}return i};u.dataFor=function(e){var t=u.contextFor(e);return t?t["$data"]:i};u.exportSymbol("bindingHandlers",u.bindingHandlers);u.exportSymbol("applyBindings",u.applyBindings);u.exportSymbol("applyBindingsToDescendants",u.applyBindingsToDescendants);u.exportSymbol("applyBindingAccessorsToNode",u.applyBindingAccessorsToNode);u.exportSymbol("applyBindingsToNode",u.applyBindingsToNode);u.exportSymbol("contextFor",u.contextFor);u.exportSymbol("dataFor",u.dataFor)})();(function(e){var t={},n={};u.components={get:function(e,t){var o=i(n,e);if(o){if(o.isSynchronousComponent){u.dependencyDetection.ignore(function(){t(o.definition)})}else{u.tasks.schedule(function(){t(o.definition)})}}else{r(e,t)}},clearCachedDefinition:function(e){delete n[e]},_getFirstResultFromLoaders:a};function i(t,n){return t.hasOwnProperty(n)?t[n]:e}function r(e,r){var a=i(t,e),s;if(!a){a=t[e]=new u.subscribable;a.subscribe(r);o(e,function(i,r){var o=!!(r&&r["synchronous"]);n[e]={definition:i,isSynchronousComponent:o};delete t[e];if(s||o){a["notifySubscribers"](i)}else{u.tasks.schedule(function(){a["notifySubscribers"](i)})}});s=true}else{a.subscribe(r)}}function o(e,t){a("getConfig",[e],function(n){if(n){a("loadComponent",[e,n],function(e){t(e,n)})}else{t(null,null)}})}function a(t,n,i,r){if(!r){r=u.components["loaders"].slice(0)}var o=r.shift();if(o){var s=o[t];if(s){var l=false,c=s.apply(o,n.concat(function(e){if(l){i(null)}else if(e!==null){i(e)}else{a(t,n,i,r)}}));if(c!==e){l=true;if(!o["suppressLoaderExceptions"]){throw new Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}}}else{a(t,n,i,r)}}else{i(null)}}u.components["loaders"]=[];u.exportSymbol("components",u.components);u.exportSymbol("components.get",u.components.get);u.exportSymbol("components.clearCachedDefinition",u.components.clearCachedDefinition)})();(function(e){var t={};u.components.register=function(e,n){if(!n){throw new Error("Invalid configuration for "+e)}if(u.components.isRegistered(e)){throw new Error("Component "+e+" is already registered")}t[e]=n};u.components.isRegistered=function(e){return t.hasOwnProperty(e)};u.components.unregister=function(e){delete t[e];u.components.clearCachedDefinition(e)};u.components.defaultLoader={getConfig:function(e,n){var i=t.hasOwnProperty(e)?t[e]:null;n(i)},loadComponent:function(e,t,n){var i=h(e);p(i,t,function(t){a(e,i,t,n)})},loadTemplate:function(e,t,n){s(h(e),t,n)},loadViewModel:function(e,t,n){l(h(e),t,n)}};var i="createViewModel";function a(e,t,n,r){var o={},a=2,s=function(){if(--a===0){r(o)}},l=n["template"],c=n["viewModel"];if(l){p(t,l,function(t){u.components._getFirstResultFromLoaders("loadTemplate",[e,t],function(e){o["template"]=e;s()})})}else{s()}if(c){p(t,c,function(t){u.components._getFirstResultFromLoaders("loadViewModel",[e,t],function(e){o[i]=e;s()})})}else{s()}}function s(e,t,n){if(typeof t==="string"){n(u.utils.parseHtmlFragment(t))}else if(t instanceof Array){n(t)}else if(f(t)){n(u.utils.makeArray(t.childNodes))}else if(t["element"]){var i=t["element"];if(d(i)){n(c(i))}else if(typeof i==="string"){var r=o.getElementById(i);if(r){n(c(r))}else{e("Cannot find element with ID "+i)}}else{e("Unknown element type: "+i)}}else{e("Unknown template value: "+t)}}function l(e,t,n){if(typeof t==="function"){n(function(e){return new t(e)})}else if(typeof t[i]==="function"){n(t[i])}else if("instance"in t){var r=t["instance"];n(function(e,t){return r})}else if("viewModel"in t){l(e,t["viewModel"],n)}else{e("Unknown viewModel value: "+t)}}function c(e){switch(u.utils.tagNameLower(e)){case"script":return u.utils.parseHtmlFragment(e.text);case"textarea":return u.utils.parseHtmlFragment(e.value);case"template":if(f(e.content)){return u.utils.cloneNodes(e.content.childNodes)}}return u.utils.cloneNodes(e.childNodes)}function d(e){if(r["HTMLElement"]){return e instanceof HTMLElement}else{return e&&e.tagName&&e.nodeType===1}}function f(e){if(r["DocumentFragment"]){return e instanceof DocumentFragment}else{return e&&e.nodeType===11}}function p(e,t,i){if(typeof t["require"]==="string"){if(n||r["require"]){(n||r["require"])([t["require"]],i)}else{e("Uses require, but no AMD loader is present")}}else{i(t)}}function h(e){return function(t){throw new Error("Component '"+e+"': "+t)}}u.exportSymbol("components.register",u.components.register);u.exportSymbol("components.isRegistered",u.components.isRegistered);u.exportSymbol("components.unregister",u.components.unregister);u.exportSymbol("components.defaultLoader",u.components.defaultLoader);u.components["loaders"].push(u.components.defaultLoader);u.components._allRegisteredComponents=t})();(function(e){u.components["getComponentNameForNode"]=function(e){var t=u.utils.tagNameLower(e);if(u.components.isRegistered(t)){if(t.indexOf("-")!=-1||""+e=="[object HTMLUnknownElement]"||u.utils.ieVersion<=8&&e.tagName===t){return t}}};u.components.addBindingsForCustomElement=function(e,t,i,r){if(t.nodeType===1){var o=u.components["getComponentNameForNode"](t);if(o){e=e||{};if(e["component"]){throw new Error('Cannot use the "component" binding on a custom element matching a component')}var a={name:o,params:n(t,i)};e["component"]=r?function(){return a}:a}}return e};var t=new u.bindingProvider;function n(e,n){var i=e.getAttribute("params");if(i){var r=t["parseBindingsString"](i,n,e,{valueAccessors:true,bindingParams:true}),o=u.utils.objectMap(r,function(t,n){return u.computed(t,null,{disposeWhenNodeIsRemoved:e})}),a=u.utils.objectMap(o,function(t,n){var i=t.peek();if(!t.isActive()){return i}else{return u.computed({read:function(){return u.utils.unwrapObservable(t())},write:u.isWriteableObservable(i)&&function(e){t()(e)},disposeWhenNodeIsRemoved:e})}});if(!a.hasOwnProperty("$raw")){a["$raw"]=o}return a}else{return{$raw:{}}}}if(u.utils.ieVersion<9){u.components["register"]=function(e){return function(t){o.createElement(t);return e.apply(this,arguments)}}(u.components["register"]);o.createDocumentFragment=function(e){return function(){var t=e(),n=u.components._allRegisteredComponents;for(var i in n){if(n.hasOwnProperty(i)){t.createElement(i)}}return t}}(o.createDocumentFragment)}})();(function(e){var t=0;u.bindingHandlers["component"]={init:function(r,o,a,s,l){var c,d,f=function(){var e=c&&c["dispose"];if(typeof e==="function"){e.call(c)}c=null;d=null},p=u.utils.makeArray(u.virtualElements.childNodes(r));u.utils.domNodeDisposal.addDisposeCallback(r,f);u.computed(function(){var a=u.utils.unwrapObservable(o()),s,h;if(typeof a==="string"){s=a}else{s=u.utils.unwrapObservable(a["name"]);h=u.utils.unwrapObservable(a["params"])}if(!s){throw new Error("No component name specified")}var v=d=++t;u.components.get(s,function(t){if(d!==v){return}f();if(!t){throw new Error("Unknown component '"+s+"'")}n(s,t,r);var o=i(t,r,p,h),a=l["createChildContext"](o,e,function(e){e["$component"]=o;e["$componentTemplateNodes"]=p});c=o;u.applyBindingsToDescendants(a,r)})},null,{disposeWhenNodeIsRemoved:r});return{controlsDescendantBindings:true}}};u.virtualElements.allowedBindings["component"]=true;function n(e,t,n){var i=t["template"];if(!i){throw new Error("Component '"+e+"' has no template")}var r=u.utils.cloneNodes(i);u.virtualElements.setDomNodeChildren(n,r)}function i(e,t,n,i){var r=e["createViewModel"];return r?r.call(e,i,{element:t,templateNodes:n}):i}})();var A={class:"className",for:"htmlFor"};u.bindingHandlers["attr"]={update:function(e,t,n){var r=u.utils.unwrapObservable(t())||{};u.utils.objectForEach(r,function(t,n){n=u.utils.unwrapObservable(n);var r=n===false||n===null||n===i;if(r)e.removeAttribute(t);if(u.utils.ieVersion<=8&&t in A){t=A[t];if(r)e.removeAttribute(t);else e[t]=n}else if(!r){e.setAttribute(t,n.toString())}if(t==="name"){u.utils.setElementName(e,r?"":n.toString())}})}};(function(){u.bindingHandlers["checked"]={after:["value","attr"],init:function(e,t,n){var r=u.pureComputed(function(){if(n["has"]("checkedValue")){return u.utils.unwrapObservable(n.get("checkedValue"))}else if(n["has"]("value")){return u.utils.unwrapObservable(n.get("value"))}return e.value});function o(){var i=e.checked,o=h?r():i;if(u.computedContext.isInitial()){return}if(l&&!i){return}var a=u.dependencyDetection.ignore(t);if(d){var s=f?a.peek():a;if(p!==o){if(i){u.utils.addOrRemoveItem(s,o,true);u.utils.addOrRemoveItem(s,p,false)}p=o}else{u.utils.addOrRemoveItem(s,o,i)}if(f&&u.isWriteableObservable(a)){a(s)}}else{u.expressionRewriting.writeValueToProperty(a,n,"checked",o,true)}}function a(){var n=u.utils.unwrapObservable(t());if(d){e.checked=u.utils.arrayIndexOf(n,r())>=0}else if(s){e.checked=n}else{e.checked=r()===n}}var s=e.type=="checkbox",l=e.type=="radio";if(!s&&!l){return}var c=t(),d=s&&u.utils.unwrapObservable(c)instanceof Array,f=!(d&&c.push&&c.splice),p=d?r():i,h=l||d;if(l&&!e.name)u.bindingHandlers["uniqueName"]["init"](e,function(){return true});u.computed(o,null,{disposeWhenNodeIsRemoved:e});u.utils.registerEventHandler(e,"click",o);u.computed(a,null,{disposeWhenNodeIsRemoved:e});c=i}};u.expressionRewriting.twoWayBindings["checked"]=true;u.bindingHandlers["checkedValue"]={update:function(e,t){e.value=u.utils.unwrapObservable(t())}}})();var O="__ko__cssValue";u.bindingHandlers["css"]={update:function(e,t){var n=u.utils.unwrapObservable(t());if(n!==null&&typeof n=="object"){u.utils.objectForEach(n,function(t,n){n=u.utils.unwrapObservable(n);u.utils.toggleDomNodeCssClass(e,t,n)})}else{n=u.utils.stringTrim(String(n||""));u.utils.toggleDomNodeCssClass(e,e[O],false);e[O]=n;u.utils.toggleDomNodeCssClass(e,n,true)}}};u.bindingHandlers["enable"]={update:function(e,t){var n=u.utils.unwrapObservable(t());if(n&&e.disabled)e.removeAttribute("disabled");else if(!n&&!e.disabled)e.disabled=true}};u.bindingHandlers["disable"]={update:function(e,t){u.bindingHandlers["enable"]["update"](e,function(){return!u.utils.unwrapObservable(t())})}};function N(e){u.bindingHandlers[e]={init:function(t,n,i,r,o){var a=function(){var t={};t[e]=n();return t};return u.bindingHandlers["event"]["init"].call(this,t,a,i,r,o)}}}u.bindingHandlers["event"]={init:function(e,t,n,i,r){var o=t()||{};u.utils.objectForEach(o,function(o){if(typeof o=="string"){u.utils.registerEventHandler(e,o,function(e){var a;var s=t()[o];if(!s)return;try{var l=u.utils.makeArray(arguments);i=r["$data"];l.unshift(i);a=s.apply(i,l)}finally{if(a!==true){if(e.preventDefault)e.preventDefault();else e.returnValue=false}}var c=n.get(o+"Bubble")!==false;if(!c){e.cancelBubble=true;if(e.stopPropagation)e.stopPropagation()}})}})}};u.bindingHandlers["foreach"]={makeTemplateValueAccessor:function(e){return function(){var t=e(),n=u.utils.peekObservable(t);if(!n||typeof n.length=="number")return{foreach:t,templateEngine:u.nativeTemplateEngine.instance};u.utils.unwrapObservable(t);return{foreach:n["data"],as:n["as"],includeDestroyed:n["includeDestroyed"],afterAdd:n["afterAdd"],beforeRemove:n["beforeRemove"],afterRender:n["afterRender"],beforeMove:n["beforeMove"],afterMove:n["afterMove"],templateEngine:u.nativeTemplateEngine.instance}}},init:function(e,t,n,i,r){return u.bindingHandlers["template"]["init"](e,u.bindingHandlers["foreach"].makeTemplateValueAccessor(t))},update:function(e,t,n,i,r){return u.bindingHandlers["template"]["update"](e,u.bindingHandlers["foreach"].makeTemplateValueAccessor(t),n,i,r)}};u.expressionRewriting.bindingRewriteValidators["foreach"]=false;u.virtualElements.allowedBindings["foreach"]=true;var I="__ko_hasfocusUpdating";var P="__ko_hasfocusLastValue";u.bindingHandlers["hasfocus"]={init:function(e,t,n){var i=function(i){e[I]=true;var r=e.ownerDocument;if("activeElement"in r){var o;try{o=r.activeElement}catch(e){o=r.body}i=o===e}var a=t();u.expressionRewriting.writeValueToProperty(a,n,"hasfocus",i,true);e[P]=i;e[I]=false};var r=i.bind(null,true);var o=i.bind(null,false);u.utils.registerEventHandler(e,"focus",r);u.utils.registerEventHandler(e,"focusin",r);u.utils.registerEventHandler(e,"blur",o);u.utils.registerEventHandler(e,"focusout",o)},update:function(e,t){var n=!!u.utils.unwrapObservable(t());if(!e[I]&&e[P]!==n){n?e.focus():e.blur();if(!n&&e[P]){e.ownerDocument.body.focus()}u.dependencyDetection.ignore(u.utils.triggerEvent,null,[e,n?"focusin":"focusout"])}}};u.expressionRewriting.twoWayBindings["hasfocus"]=true;u.bindingHandlers["hasFocus"]=u.bindingHandlers["hasfocus"];u.expressionRewriting.twoWayBindings["hasFocus"]=true;u.bindingHandlers["html"]={init:function(){return{controlsDescendantBindings:true}},update:function(e,t){u.utils.setHtml(e,t())}};function M(e,t,n,i){u.bindingHandlers[e]={init:function(e,r,o,a,s){var l,c;u.computed(function(){var o=r(),a=u.utils.unwrapObservable(o),d=!n!==!a,f=!c,p=f||t||d!==l;if(p){if(f&&u.computedContext.getDependenciesCount()){c=u.utils.cloneNodes(u.virtualElements.childNodes(e),true)}if(d){if(!f){u.virtualElements.setDomNodeChildren(e,u.utils.cloneNodes(c))}u.applyBindingsToDescendants(i?i(s,o):s,e)}else{u.virtualElements.emptyNode(e)}l=d}},null,{disposeWhenNodeIsRemoved:e});return{controlsDescendantBindings:true}}};u.expressionRewriting.bindingRewriteValidators[e]=false;u.virtualElements.allowedBindings[e]=true}M("if");M("ifnot",false,true);M("with",true,false,function(e,t){return e.createStaticChildContext(t)});var R={};u.bindingHandlers["options"]={init:function(e){if(u.utils.tagNameLower(e)!=="select")throw new Error("options binding applies only to SELECT elements");while(e.length>0){e.remove(0)}return{controlsDescendantBindings:true}},update:function(e,t,n){function r(){return u.utils.arrayFilter(e.options,function(e){return e.selected})}var o=e.length==0,a=e.multiple,s=!o&&a?e.scrollTop:null,l=u.utils.unwrapObservable(t()),c=n.get("valueAllowUnset")&&n["has"]("value"),d=n.get("optionsIncludeDestroyed"),f={},p,h,v=[];if(!c){if(a){v=u.utils.arrayMap(r(),u.selectExtensions.readValue)}else if(e.selectedIndex>=0){v.push(u.selectExtensions.readValue(e.options[e.selectedIndex]))}}if(l){if(typeof l.length=="undefined")l=[l];h=u.utils.arrayFilter(l,function(e){return d||e===i||e===null||!u.utils.unwrapObservable(e["_destroy"])});if(n["has"]("optionsCaption")){p=u.utils.unwrapObservable(n.get("optionsCaption"));if(p!==null&&p!==i){h.unshift(R)}}}else{}function m(e,t,n){var i=typeof t;if(i=="function")return t(e);else if(i=="string")return e[t];else return n}var g=false;function y(t,r,o){if(o.length){v=!c&&o[0].selected?[u.selectExtensions.readValue(o[0])]:[];g=true}var a=e.ownerDocument.createElement("option");if(t===R){u.utils.setTextContent(a,n.get("optionsCaption"));u.selectExtensions.writeValue(a,i)}else{var s=m(t,n.get("optionsValue"),t);u.selectExtensions.writeValue(a,u.utils.unwrapObservable(s));var l=m(t,n.get("optionsText"),s);u.utils.setTextContent(a,l)}return[a]}f["beforeRemove"]=function(t){e.removeChild(t)};function b(t,i){if(g&&c){u.selectExtensions.writeValue(e,u.utils.unwrapObservable(n.get("value")),true)}else if(v.length){var r=u.utils.arrayIndexOf(v,u.selectExtensions.readValue(i[0]))>=0;u.utils.setOptionNodeSelectionState(i[0],r);if(g&&!r){u.dependencyDetection.ignore(u.utils.triggerEvent,null,[e,"change"])}}}var x=b;if(n["has"]("optionsAfterRender")&&typeof n.get("optionsAfterRender")=="function"){x=function(e,t){b(e,t);u.dependencyDetection.ignore(n.get("optionsAfterRender"),null,[t[0],e!==R?e:i])}}u.utils.setDomNodeChildrenFromArrayMapping(e,h,y,f,x);u.dependencyDetection.ignore(function(){if(c){u.selectExtensions.writeValue(e,u.utils.unwrapObservable(n.get("value")),true)}else{var t;if(a){t=v.length&&r().length<v.length}else{t=v.length&&e.selectedIndex>=0?u.selectExtensions.readValue(e.options[e.selectedIndex])!==v[0]:v.length||e.selectedIndex>=0}if(t){u.utils.triggerEvent(e,"change")}}});u.utils.ensureSelectElementIsRenderedCorrectly(e);if(s&&Math.abs(s-e.scrollTop)>20)e.scrollTop=s}};u.bindingHandlers["options"].optionValueDomDataKey=u.utils.domData.nextKey();u.bindingHandlers["selectedOptions"]={after:["options","foreach"],init:function(e,t,n){u.utils.registerEventHandler(e,"change",function(){var i=t(),r=[];u.utils.arrayForEach(e.getElementsByTagName("option"),function(e){if(e.selected)r.push(u.selectExtensions.readValue(e))});u.expressionRewriting.writeValueToProperty(i,n,"selectedOptions",r)})},update:function(e,t){if(u.utils.tagNameLower(e)!="select")throw new Error("values binding applies only to SELECT elements");var n=u.utils.unwrapObservable(t()),i=e.scrollTop;if(n&&typeof n.length=="number"){u.utils.arrayForEach(e.getElementsByTagName("option"),function(e){var t=u.utils.arrayIndexOf(n,u.selectExtensions.readValue(e))>=0;if(e.selected!=t){u.utils.setOptionNodeSelectionState(e,t)}})}e.scrollTop=i}};u.expressionRewriting.twoWayBindings["selectedOptions"]=true;u.bindingHandlers["style"]={update:function(e,t){var n=u.utils.unwrapObservable(t()||{});u.utils.objectForEach(n,function(t,n){n=u.utils.unwrapObservable(n);if(n===null||n===i||n===false){n=""}e.style[t]=n})}};u.bindingHandlers["submit"]={init:function(e,t,n,i,r){if(typeof t()!="function")throw new Error("The value for a submit binding must be a function");u.utils.registerEventHandler(e,"submit",function(n){var i;var o=t();try{i=o.call(r["$data"],e)}finally{if(i!==true){if(n.preventDefault)n.preventDefault();else n.returnValue=false}}})}};u.bindingHandlers["text"]={init:function(){return{controlsDescendantBindings:true}},update:function(e,t){u.utils.setTextContent(e,t())}};u.virtualElements.allowedBindings["text"]=true;(function(){if(r&&r.navigator){var t=function(e){if(e){return parseFloat(e[1])}};var n=r.opera&&r.opera.version&&parseInt(r.opera.version()),o=r.navigator.userAgent,a=t(o.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),s=t(o.match(/Firefox\/([^ ]*)/))}if(u.utils.ieVersion<10){var l=u.utils.domData.nextKey(),c=u.utils.domData.nextKey();var d=function(e){var t=this.activeElement,n=t&&u.utils.domData.get(t,c);if(n){n(e)}};var f=function(e,t){var n=e.ownerDocument;if(!u.utils.domData.get(n,l)){u.utils.domData.set(n,l,true);u.utils.registerEventHandler(n,"selectionchange",d)}u.utils.domData.set(e,c,t)}}u.bindingHandlers["textInput"]={init:function(t,r,o){var l=t.value,c,d;var p=function(n){clearTimeout(c);d=c=i;var a=t.value;if(l!==a){if(e&&n)t["_ko_textInputProcessedEvent"]=n.type;l=a;u.expressionRewriting.writeValueToProperty(r(),o,"textInput",a)}};var h=function(n){if(!c){d=t.value;var i=e?p.bind(t,{type:n.type}):p;c=u.utils.setTimeout(i,4)}};var v=u.utils.ieVersion==9?h:p;var m=function(){var e=u.utils.unwrapObservable(r());if(e===null||e===i){e=""}if(d!==i&&e===d){u.utils.setTimeout(m,4);return}if(t.value!==e){l=e;t.value=e}};var g=function(e,n){u.utils.registerEventHandler(t,e,n)};if(e&&u.bindingHandlers["textInput"]["_forceUpdateOn"]){u.utils.arrayForEach(u.bindingHandlers["textInput"]["_forceUpdateOn"],function(e){if(e.slice(0,5)=="after"){g(e.slice(5),h)}else{g(e,p)}})}else{if(u.utils.ieVersion<10){g("propertychange",function(e){if(e.propertyName==="value"){v(e)}});if(u.utils.ieVersion==8){g("keyup",p);g("keydown",p)}if(u.utils.ieVersion>=8){f(t,v);g("dragend",h)}}else{g("input",p);if(a<5&&u.utils.tagNameLower(t)==="textarea"){g("keydown",h);g("paste",h);g("cut",h)}else if(n<11){g("keydown",h)}else if(s<4){g("DOMAutoComplete",p);g("dragdrop",p);g("drop",p)}}}g("change",p);u.computed(m,null,{disposeWhenNodeIsRemoved:t})}};u.expressionRewriting.twoWayBindings["textInput"]=true;u.bindingHandlers["textinput"]={preprocess:function(e,t,n){n("textInput",e)}}})();u.bindingHandlers["uniqueName"]={init:function(e,t){if(t()){var n="ko_unique_"+ ++u.bindingHandlers["uniqueName"].currentIndex;u.utils.setElementName(e,n)}}};u.bindingHandlers["uniqueName"].currentIndex=0;u.bindingHandlers["value"]={after:["options","foreach"],init:function(e,t,n){if(e.tagName.toLowerCase()=="input"&&(e.type=="checkbox"||e.type=="radio")){u.applyBindingAccessorsToNode(e,{checkedValue:t});return}var i=["change"];var r=n.get("valueUpdate");var o=false;var a=null;if(r){if(typeof r=="string")r=[r];u.utils.arrayPushAll(i,r);i=u.utils.arrayGetDistinctValues(i)}var s=function(){a=null;o=false;var i=t();var r=u.selectExtensions.readValue(e);u.expressionRewriting.writeValueToProperty(i,n,"value",r)};var l=u.utils.ieVersion&&e.tagName.toLowerCase()=="input"&&e.type=="text"&&e.autocomplete!="off"&&(!e.form||e.form.autocomplete!="off");if(l&&u.utils.arrayIndexOf(i,"propertychange")==-1){u.utils.registerEventHandler(e,"propertychange",function(){o=true});u.utils.registerEventHandler(e,"focus",function(){o=false});u.utils.registerEventHandler(e,"blur",function(){if(o){s()}})}u.utils.arrayForEach(i,function(t){var n=s;if(u.utils.stringStartsWith(t,"after")){n=function(){a=u.selectExtensions.readValue(e);u.utils.setTimeout(s,0)};t=t.substring("after".length)}u.utils.registerEventHandler(e,t,n)});var c=function(){var i=u.utils.unwrapObservable(t());var r=u.selectExtensions.readValue(e);if(a!==null&&i===a){u.utils.setTimeout(c,0);return}var o=i!==r;if(o){if(u.utils.tagNameLower(e)==="select"){var s=n.get("valueAllowUnset");var l=function(){u.selectExtensions.writeValue(e,i,s)};l();if(!s&&i!==u.selectExtensions.readValue(e)){u.dependencyDetection.ignore(u.utils.triggerEvent,null,[e,"change"])}else{u.utils.setTimeout(l,0)}}else{u.selectExtensions.writeValue(e,i)}}};u.computed(c,null,{disposeWhenNodeIsRemoved:e})},update:function(){}};u.expressionRewriting.twoWayBindings["value"]=true;u.bindingHandlers["visible"]={update:function(e,t){var n=u.utils.unwrapObservable(t());var i=!(e.style.display=="none");if(n&&!i)e.style.display="";else if(!n&&i)e.style.display="none"}};N("click");u.templateEngine=function(){};u.templateEngine.prototype["renderTemplateSource"]=function(e,t,n,i){throw new Error("Override renderTemplateSource")};u.templateEngine.prototype["createJavaScriptEvaluatorBlock"]=function(e){throw new Error("Override createJavaScriptEvaluatorBlock")};u.templateEngine.prototype["makeTemplateSource"]=function(e,t){if(typeof e=="string"){t=t||o;var n=t.getElementById(e);if(!n)throw new Error("Cannot find template with ID "+e);return new u.templateSources.domElement(n)}else if(e.nodeType==1||e.nodeType==8){return new u.templateSources.anonymousTemplate(e)}else throw new Error("Unknown template type: "+e)};u.templateEngine.prototype["renderTemplate"]=function(e,t,n,i){var r=this["makeTemplateSource"](e,i);return this["renderTemplateSource"](r,t,n,i)};u.templateEngine.prototype["isTemplateRewritten"]=function(e,t){if(this["allowTemplateRewriting"]===false)return true;return this["makeTemplateSource"](e,t)["data"]("isRewritten")};u.templateEngine.prototype["rewriteTemplate"]=function(e,t,n){var i=this["makeTemplateSource"](e,n);var r=t(i["text"]());i["text"](r);i["data"]("isRewritten",true)};u.exportSymbol("templateEngine",u.templateEngine);u.templateRewriting=function(){var e=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi;var t=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;function n(e){var t=u.expressionRewriting.bindingRewriteValidators;for(var n=0;n<e.length;n++){var i=e[n]["key"];if(t.hasOwnProperty(i)){var r=t[i];if(typeof r==="function"){var o=r(e[n]["value"]);if(o)throw new Error(o)}else if(!r){throw new Error("This template engine does not support the '"+i+"' binding within its templates")}}}}function i(e,t,i,r){var o=u.expressionRewriting.parseObjectLiteral(e);n(o);var a=u.expressionRewriting.preProcessBindings(o,{valueAccessors:true});var s="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+a+" } })()},'"+i.toLowerCase()+"')";return r["createJavaScriptEvaluatorBlock"](s)+t}return{ensureTemplateIsRewritten:function(e,t,n){if(!t["isTemplateRewritten"](e,n))t["rewriteTemplate"](e,function(e){return u.templateRewriting.memoizeBindingAttributeSyntax(e,t)},n)},memoizeBindingAttributeSyntax:function(n,r){return n.replace(e,function(){return i(arguments[4],arguments[1],arguments[2],r)}).replace(t,function(){return i(arguments[1],"<!-- ko -->","#comment",r)})},applyMemoizedBindingsToNextSibling:function(e,t){return u.memoization.memoize(function(n,i){var r=n.nextSibling;if(r&&r.nodeName.toLowerCase()===t){u.applyBindingAccessorsToNode(r,e,i)}})}}}();u.exportSymbol("__tr_ambtns",u.templateRewriting.applyMemoizedBindingsToNextSibling);(function(){u.templateSources={};var e=1,t=2,n=3,r=4;u.templateSources.domElement=function(i){this.domElement=i;if(i){var o=u.utils.tagNameLower(i);this.templateType=o==="script"?e:o==="textarea"?t:o=="template"&&i.content&&i.content.nodeType===11?n:r}};u.templateSources.domElement.prototype["text"]=function(){var n=this.templateType===e?"text":this.templateType===t?"value":"innerHTML";if(arguments.length==0){return this.domElement[n]}else{var i=arguments[0];if(n==="innerHTML")u.utils.setHtml(this.domElement,i);else this.domElement[n]=i}};var o=u.utils.domData.nextKey()+"_";u.templateSources.domElement.prototype["data"]=function(e){if(arguments.length===1){return u.utils.domData.get(this.domElement,o+e)}else{u.utils.domData.set(this.domElement,o+e,arguments[1])}};var a=u.utils.domData.nextKey();function s(e){return u.utils.domData.get(e,a)||{}}function l(e,t){u.utils.domData.set(e,a,t)}u.templateSources.domElement.prototype["nodes"]=function(){var e=this.domElement;if(arguments.length==0){var t=s(e),o=t.containerData;return o||(this.templateType===n?e.content:this.templateType===r?e:i)}else{var a=arguments[0];l(e,{containerData:a})}};u.templateSources.anonymousTemplate=function(e){this.domElement=e};u.templateSources.anonymousTemplate.prototype=new u.templateSources.domElement;u.templateSources.anonymousTemplate.prototype.constructor=u.templateSources.anonymousTemplate;u.templateSources.anonymousTemplate.prototype["text"]=function(){if(arguments.length==0){var e=s(this.domElement);if(e.textData===i&&e.containerData)e.textData=e.containerData.innerHTML;return e.textData}else{var t=arguments[0];l(this.domElement,{textData:t})}};u.exportSymbol("templateSources",u.templateSources);u.exportSymbol("templateSources.domElement",u.templateSources.domElement);u.exportSymbol("templateSources.anonymousTemplate",u.templateSources.anonymousTemplate)})();(function(){var e;u.setTemplateEngine=function(t){if(t!=i&&!(t instanceof u.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");e=t};function t(e,t,n){var i,r=e,o=u.virtualElements.nextSibling(t);while(r&&(i=r)!==o){r=u.virtualElements.nextSibling(i);n(i,r)}}function n(e,n){if(e.length){var i=e[0],r=e[e.length-1],o=i.parentNode,a=u.bindingProvider["instance"],s=a["preprocessNode"];if(s){t(i,r,function(e,t){var n=e.previousSibling;var o=s.call(a,e);if(o){if(e===i)i=o[0]||t;if(e===r)r=o[o.length-1]||n}});e.length=0;if(!i){return}if(i===r){e.push(i)}else{e.push(i,r);u.utils.fixUpContinuousNodeArray(e,o)}}t(i,r,function(e){if(e.nodeType===1||e.nodeType===8)u.applyBindings(n,e)});t(i,r,function(e){if(e.nodeType===1||e.nodeType===8)u.memoization.unmemoizeDomNodeAndDescendants(e,[n])});u.utils.fixUpContinuousNodeArray(e,o)}}function r(e){return e.nodeType?e:e.length>0?e[0]:null}function o(t,i,o,a,s){s=s||{};var l=t&&r(t);var c=(l||o||{}).ownerDocument;var d=s["templateEngine"]||e;u.templateRewriting.ensureTemplateIsRewritten(o,d,c);var f=d["renderTemplate"](o,a,s,c);if(typeof f.length!="number"||f.length>0&&typeof f[0].nodeType!="number")throw new Error("Template engine must return an array of DOM nodes");var p=false;switch(i){case"replaceChildren":u.virtualElements.setDomNodeChildren(t,f);p=true;break;case"replaceNode":u.utils.replaceDomNodes(t,f);p=true;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+i)}if(p){n(f,a);if(s["afterRender"])u.dependencyDetection.ignore(s["afterRender"],null,[f,a["$data"]]);
}return f}function a(e,t,n){if(u.isObservable(e)){return e()}else if(typeof e==="function"){return e(t,n)}else{return e}}u.renderTemplate=function(t,n,s,l,c){s=s||{};if((s["templateEngine"]||e)==i)throw new Error("Set a template engine before calling renderTemplate");c=c||"replaceChildren";if(l){var d=r(l);var f=function(){return!d||!u.utils.domNodeIsAttachedToDocument(d)};var p=d&&c=="replaceNode"?d.parentNode:d;return u.dependentObservable(function(){var e=n&&n instanceof u.bindingContext?n:new u.bindingContext(n,null,null,null,{exportDependencies:true});var i=a(t,e["$data"],e),f=o(l,c,i,e,s);if(c=="replaceNode"){l=f;d=r(l)}},null,{disposeWhen:f,disposeWhenNodeIsRemoved:p})}else{return u.memoization.memoize(function(e){u.renderTemplate(t,n,s,e,"replaceNode")})}};u.renderTemplateForEach=function(e,t,r,s,l){var c;var d=function(t,n){c=l["createChildContext"](t,r["as"],function(e){e["$index"]=n});var i=a(e,t,c);return o(null,"ignoreTargetNode",i,c,r)};var f=function(e,t,i){n(t,c);if(r["afterRender"])r["afterRender"](t,e);c=null};return u.dependentObservable(function(){var e=u.utils.unwrapObservable(t)||[];if(typeof e.length=="undefined")e=[e];var n=u.utils.arrayFilter(e,function(e){return r["includeDestroyed"]||e===i||e===null||!u.utils.unwrapObservable(e["_destroy"])});u.dependencyDetection.ignore(u.utils.setDomNodeChildrenFromArrayMapping,null,[s,n,d,r,f])},null,{disposeWhenNodeIsRemoved:s})};var s=u.utils.domData.nextKey();function l(e,t){var n=u.utils.domData.get(e,s);if(n&&typeof n.dispose=="function")n.dispose();u.utils.domData.set(e,s,t&&t.isActive()?t:i)}u.bindingHandlers["template"]={init:function(e,t){var n=u.utils.unwrapObservable(t());if(typeof n=="string"||n["name"]){u.virtualElements.emptyNode(e)}else if("nodes"in n){var i=n["nodes"]||[];if(u.isObservable(i)){throw new Error('The "nodes" option must be a plain, non-observable array.')}var r=u.utils.moveCleanedNodesToContainerElement(i);new u.templateSources.anonymousTemplate(e)["nodes"](r)}else{var o=u.virtualElements.childNodes(e),r=u.utils.moveCleanedNodesToContainerElement(o);new u.templateSources.anonymousTemplate(e)["nodes"](r)}return{controlsDescendantBindings:true}},update:function(e,t,n,i,r){var o=t(),a=u.utils.unwrapObservable(o),s=true,c=null,d;if(typeof a=="string"){d=o;a={}}else{d=a["name"];if("if"in a)s=u.utils.unwrapObservable(a["if"]);if(s&&"ifnot"in a)s=!u.utils.unwrapObservable(a["ifnot"])}if("foreach"in a){var f=s&&a["foreach"]||[];c=u.renderTemplateForEach(d||e,f,a,e,r)}else if(!s){u.virtualElements.emptyNode(e)}else{var p="data"in a?r.createStaticChildContext(a["data"],a["as"]):r;c=u.renderTemplate(d||e,p,a,e)}l(e,c)}};u.expressionRewriting.bindingRewriteValidators["template"]=function(e){var t=u.expressionRewriting.parseObjectLiteral(e);if(t.length==1&&t[0]["unknown"])return null;if(u.expressionRewriting.keyValueArrayContainsKey(t,"name"))return null;return"This template engine does not support anonymous templates nested within its templates"};u.virtualElements.allowedBindings["template"]=true})();u.exportSymbol("setTemplateEngine",u.setTemplateEngine);u.exportSymbol("renderTemplate",u.renderTemplate);u.utils.findMovesInArrayComparison=function(e,t,n){if(e.length&&t.length){var i,r,o,a,s;for(i=r=0;(!n||i<n)&&(a=e[r]);++r){for(o=0;s=t[o];++o){if(a["value"]===s["value"]){a["moved"]=s["index"];s["moved"]=a["index"];t.splice(o,1);i=o=0;break}}i+=o}}};u.utils.compareArrays=function(){var e="added",t="deleted";function n(n,r,o){o=typeof o==="boolean"?{dontLimitMoves:o}:o||{};n=n||[];r=r||[];if(n.length<r.length)return i(n,r,e,t,o);else return i(r,n,t,e,o)}function i(e,t,n,i,r){var o=Math.min,a=Math.max,s=[],l,c=e.length,d,f=t.length,p=f-c||1,h=c+f+1,v,m,g,y;for(l=0;l<=c;l++){m=v;s.push(v=[]);g=o(f,l+p);y=a(0,l-1);for(d=y;d<=g;d++){if(!d)v[d]=l+1;else if(!l)v[d]=d+1;else if(e[l-1]===t[d-1])v[d]=m[d-1];else{var b=m[d]||h;var x=v[d-1]||h;v[d]=o(b,x)+1}}}var w=[],k,S=[],E=[];for(l=c,d=f;l||d;){k=s[l][d]-1;if(d&&k===s[l][d-1]){S.push(w[w.length]={status:n,value:t[--d],index:d})}else if(l&&k===s[l-1][d]){E.push(w[w.length]={status:i,value:e[--l],index:l})}else{--d;--l;if(!r["sparse"]){w.push({status:"retained",value:t[d]})}}}u.utils.findMovesInArrayComparison(E,S,!r["dontLimitMoves"]&&c*10);return w.reverse()}return n}();u.exportSymbol("utils.compareArrays",u.utils.compareArrays);(function(){function e(e,t,n,r,o){var a=[];var s=u.dependentObservable(function(){var i=t(n,o,u.utils.fixUpContinuousNodeArray(a,e))||[];if(a.length>0){u.utils.replaceDomNodes(a,i);if(r)u.dependencyDetection.ignore(r,null,[n,i,o])}a.length=0;u.utils.arrayPushAll(a,i)},null,{disposeWhenNodeIsRemoved:e,disposeWhen:function(){return!u.utils.anyDomNodeIsAttachedToDocument(a)}});return{mappedNodes:a,dependentObservable:s.isActive()?s:i}}var t=u.utils.domData.nextKey(),n=u.utils.domData.nextKey();u.utils.setDomNodeChildrenFromArrayMapping=function(r,o,a,s,l){o=o||[];s=s||{};var c=u.utils.domData.get(r,t)===i;var d=u.utils.domData.get(r,t)||[];var f=u.utils.arrayMap(d,function(e){return e.arrayEntry});var p=u.utils.compareArrays(f,o,s["dontLimitMoves"]);var h=[];var v=0;var m=0;var g=[];var y=[];var b=[];var x=[];var w=[];var k;function S(e,t){k=d[t];if(m!==t)x[e]=k;k.indexObservable(m++);u.utils.fixUpContinuousNodeArray(k.mappedNodes,r);h.push(k);y.push(k)}function E(e,t){if(e){for(var n=0,i=t.length;n<i;n++){if(t[n]){u.utils.arrayForEach(t[n].mappedNodes,function(i){e(i,n,t[n].arrayEntry)})}}}}for(var C=0,T,D;T=p[C];C++){D=T["moved"];switch(T["status"]){case"deleted":if(D===i){k=d[v];if(k.dependentObservable){k.dependentObservable.dispose();k.dependentObservable=i}if(u.utils.fixUpContinuousNodeArray(k.mappedNodes,r).length){if(s["beforeRemove"]){h.push(k);y.push(k);if(k.arrayEntry===n){k=null}else{b[C]=k}}if(k){g.push.apply(g,k.mappedNodes)}}}v++;break;case"retained":S(C,v++);break;case"added":if(D!==i){S(C,D)}else{k={arrayEntry:T["value"],indexObservable:u.observable(m++)};h.push(k);y.push(k);if(!c)w[C]=k}break}}u.utils.domData.set(r,t,h);E(s["beforeMove"],x);u.utils.arrayForEach(g,s["beforeRemove"]?u.cleanNode:u.removeNode);for(var C=0,B=u.virtualElements.firstChild(r),A,O;k=y[C];C++){if(!k.mappedNodes)u.utils.extend(k,e(r,a,k.arrayEntry,l,k.indexObservable));for(var N=0;O=k.mappedNodes[N];B=O.nextSibling,A=O,N++){if(O!==B)u.virtualElements.insertAfter(r,O,A)}if(!k.initialized&&l){l(k.arrayEntry,k.mappedNodes,k.indexObservable);k.initialized=true}}E(s["beforeRemove"],b);for(C=0;C<b.length;++C){if(b[C]){b[C].arrayEntry=n}}E(s["afterMove"],x);E(s["afterAdd"],w)}})();u.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",u.utils.setDomNodeChildrenFromArrayMapping);u.nativeTemplateEngine=function(){this["allowTemplateRewriting"]=false};u.nativeTemplateEngine.prototype=new u.templateEngine;u.nativeTemplateEngine.prototype.constructor=u.nativeTemplateEngine;u.nativeTemplateEngine.prototype["renderTemplateSource"]=function(e,t,n,i){var r=!(u.utils.ieVersion<9),o=r?e["nodes"]:null,a=o?e["nodes"]():null;if(a){return u.utils.makeArray(a.cloneNode(true).childNodes)}else{var s=e["text"]();return u.utils.parseHtmlFragment(s,i)}};u.nativeTemplateEngine.instance=new u.nativeTemplateEngine;u.setTemplateEngine(u.nativeTemplateEngine.instance);u.exportSymbol("nativeTemplateEngine",u.nativeTemplateEngine);(function(){u.jqueryTmplTemplateEngine=function(){var e=this.jQueryTmplVersion=function(){if(!s||!s["tmpl"])return 0;try{if(s["tmpl"]["tag"]["tmpl"]["open"].toString().indexOf("__")>=0){return 2}}catch(e){}return 1}();function t(){if(e<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}function n(e,t,n){return s["tmpl"](e,t,n)}this["renderTemplateSource"]=function(e,i,r,a){a=a||o;r=r||{};t();var l=e["data"]("precompiled");if(!l){var u=e["text"]()||"";u="{{ko_with $item.koBindingContext}}"+u+"{{/ko_with}}";l=s["template"](null,u);e["data"]("precompiled",l)}var c=[i["$data"]];var d=s["extend"]({koBindingContext:i},r["templateOptions"]);var f=n(l,c,d);f["appendTo"](a.createElement("div"));s["fragments"]={};return f};this["createJavaScriptEvaluatorBlock"]=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"};this["addTemplate"]=function(e,t){o.write("<script type='text/html' id='"+e+"'>"+t+"<"+"/script>")};if(e>0){s["tmpl"]["tag"]["ko_code"]={open:"__.push($1 || '');"};s["tmpl"]["tag"]["ko_with"]={open:"with($1) {",close:"} "}}};u.jqueryTmplTemplateEngine.prototype=new u.templateEngine;u.jqueryTmplTemplateEngine.prototype.constructor=u.jqueryTmplTemplateEngine;var e=new u.jqueryTmplTemplateEngine;if(e.jQueryTmplVersion>0)u.setTemplateEngine(e);u.exportSymbol("jqueryTmplTemplateEngine",u.jqueryTmplTemplateEngine)})()})})()})()},{}],11:[function(e,t,n){var i=t.exports={};var r;var o;function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){r=setTimeout}else{r=a}}catch(e){r=a}try{if(typeof clearTimeout==="function"){o=clearTimeout}else{o=s}}catch(e){o=s}})();function l(e){if(r===setTimeout){return setTimeout(e,0)}if((r===a||!r)&&setTimeout){r=setTimeout;return setTimeout(e,0)}try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function u(e){if(o===clearTimeout){return clearTimeout(e)}if((o===s||!o)&&clearTimeout){o=clearTimeout;return clearTimeout(e)}try{return o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}var c=[];var d=false;var f;var p=-1;function h(){if(!d||!f){return}d=false;if(f.length){c=f.concat(c)}else{p=-1}if(c.length){v()}}function v(){if(d){return}var e=l(h);d=true;var t=c.length;while(t){f=c;c=[];while(++p<t){if(f){f[p].run()}}p=-1;t=c.length}f=null;d=false;u(e)}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}}c.push(new m(e,t));if(c.length===1&&!d){l(v)}};function m(e,t){this.fun=e;this.array=t}m.prototype.run=function(){this.fun.apply(null,this.array)};i.title="browser";i.browser=true;i.env={};i.argv=[];i.version="";i.versions={};function g(){}i.on=g;i.addListener=g;i.once=g;i.off=g;i.removeListener=g;i.removeAllListeners=g;i.emit=g;i.prependListener=g;i.prependOnceListener=g;i.listeners=function(e){return[]};i.binding=function(e){throw new Error("process.binding is not supported")};i.cwd=function(){return"/"};i.chdir=function(e){throw new Error("process.chdir is not supported")};i.umask=function(){return 0}},{}],12:[function(e,t,n){function i(e){var t;if(e.nodeName==="SELECT"){e.focus();t=e.value}else if(e.nodeName==="INPUT"||e.nodeName==="TEXTAREA"){var n=e.hasAttribute("readonly");if(!n){e.setAttribute("readonly","")}e.select();e.setSelectionRange(0,e.value.length);if(!n){e.removeAttribute("readonly")}t=e.value}else{if(e.hasAttribute("contenteditable")){e.focus()}var i=window.getSelection();var r=document.createRange();r.selectNodeContents(e);i.removeAllRanges();i.addRange(r);t=i.toString()}return t}t.exports=i},{}],13:[function(e,t,n){t.exports=function(){"use strict";var e={};var t=0;var n=1;var i=2;var r=3;var o=4;var a=5;var s=6;function l(e){return e>="0"&&e<="9"}function u(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}e.invalidToken={string:"",cat:t};e.Parser=function e(t,n,i,r){this.buffer=t;this.begin=n;this.state=i;i.error="";i.position=0;this.symbolTable=r};e.Parser.prototype.markError=function(e,t){this.state.error=e;this.state.position=t};e.Parser.prototype.empty=function(){return this.begin>=this.buffer.length};e.Parser.prototype.skipSpace=function e(){var t=this.begin;var n=this.buffer.length;while(t<n){var i=this.peekChar();if(i===" "||i==="\n"||i==="\r"||i==="\t"){this.readChar();continue}else if(i==="/"&&t+1<n&&this.buffer[t+1]==="/"){this.readChar();this.readChar();do{i=this.readChar()}while(i!=="\n"&&!this.empty())}else{break}}};e.Parser.prototype.peekChar=function(){return this.buffer[this.begin]};e.Parser.prototype.readChar=function(){var e="";if(this.begin<this.buffer.length){e=this.buffer[this.begin];this.begin+=1}return e};e.Parser.prototype.scanNumberToken=function(e){var t=e?"-":"";var n="";do{t+=this.readChar();n=this.peekChar()}while(l(n)||n===".");return{string:t,category:o}};e.Parser.prototype.scanSymbolToken=function(t){var n=t?"-":"";var i=a;do{n+=this.readChar();var r=this.peekChar()}while(l(r)||u(r));if(r===":"){if(t){this.markError("Invalid negated name",this.begin);return e.invalidToken}i=s;this.readChar()}return{string:n,category:i}};e.Parser.prototype.scanStringToken=function(){this.readChar();var e="";var t=this.begin;var n=this.readChar();while(n!=="'"&&!this.empty()){if(n!=="\\"){e+=n;n=this.readChar()}else{n=this.readChar();if(n==="n"){e+="\n"}else if(n==="'"){e+="'"}else if(n==='"'){e+='"'}else if(n==="\\"){e+="\\"}else if(n==="u"){}else{this.markError("Invalid string escape",this.begin)}n=this.readChar()}}if(n!=="'"){this.markError("Invalid string",t)}return{string:e,category:r}};e.Parser.prototype.readToken=function(){this.skipSpace();var t=this.peekChar();var r=false;if(t==="("){return{string:this.readChar(),category:n}}else if(t===")"){return{string:this.readChar(),category:i}}else if(t==="'"){return this.scanStringToken()}else if(t==="-"){r=true;this.readChar();t=this.peekChar()}if(l(t)){return this.scanNumberToken(r)}else if(u(t)){return this.scanSymbolToken(r)}else{return e.invalidToken}};e.Parser.prototype.tokenToObject=function(e){var n=e.string;if(e.category===o){if(n.includes(".")){return parseFloat(n,10)}else{return parseInt(n,10)}}else if(e.category===r){return n}else if(e.category===a){if(n==="true"){return true}else if(n==="false"){return false}else if(n==="null"){return null}else if(n==="nan"){return Number.NaN}else if(n==="inf"){return Number.POSITIVE_INFINITY}else if(n==="-inf"){return Number.NEGATIVE_INFINITY}else{return this.lookupSymbol(n)}}else if(e.category===t){this.markError("Invalid token",this.begin);return null}else{this.markError("Invalid token category :"+e.category,this.begin)}};e.Parser.prototype.lookupSymbol=function(e){var t=undefined;if(Array.isArray(this.symbolTable)){for(var n=0;n<this.symbolTable.length;n++){t=this.symbolTable[n][e];if(t!==undefined){break}}}else if(typeof this.symbolTable==="function"){return this.symbolTable(e)}else{t=this.symbolTable[e]}return t};e.Parser.prototype.parseObject=function(e){var t=null;var r=[];var o=0;if(e.category===n){var a=[];e=this.readToken();while(e.category!==i&&!this.empty()){if(e.category===s){r[o]=e.string;e=this.readToken()}if(e.category===s){this.markError("Invalid token",this.begin);return null}a.push(this.parseObject(e));e=this.readToken();o+=1}if(r.length>0){var l={};var u=a.length;for(var c=0;c<u;c++){var d=r[c];if(d===undefined){d="_"+c}l[d]=a[c]}t=l}else{t=a}if(e.category!==i){this.markError("Invalid expression",this.begin);return null}}else{t=this.tokenToObject(e)}return t};e.parse=function(t,n,i){if(n===undefined||n===null){n={}}if(i===undefined||n===null){i={}}var r="";if(!Array.from){r=new e.Parser(t.split(""),0,n,i)}else{r=new e.Parser(Array.from(t),0,n,i)}var o=r.readToken();return r.parseObject(o)};return e}()},{}],14:[function(e,t,n){function i(){}i.prototype={on:function(e,t,n){var i=this.e||(this.e={});(i[e]||(i[e]=[])).push({fn:t,ctx:n});return this},once:function(e,t,n){var i=this;function r(){i.off(e,r);t.apply(n,arguments)}r._=t;return this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1);var n=((this.e||(this.e={}))[e]||[]).slice();var i=0;var r=n.length;for(i;i<r;i++){n[i].fn.apply(n[i].ctx,t)}return this},off:function(e,t){var n=this.e||(this.e={});var i=n[e];var r=[];if(i&&t){for(var o=0,a=i.length;o<a;o++){if(i[o].fn!==t&&i[o].fn._!==t)r.push(i[o])}}r.length?n[e]=r:delete n[e];return this}};t.exports=i},{}],15:[function(e,t,n){t.exports=function e(t){return t&&typeof t==="object"&&typeof t.copy==="function"&&typeof t.fill==="function"&&typeof t.readUInt8==="function"}},{}],16:[function(e,t,n){(function(t,i){var r=/%[sdj%]/g;n.format=function(e){if(!k(e)){var t=[];for(var n=0;n<arguments.length;n++){t.push(s(arguments[n]))}return t.join(" ")}var n=1;var i=arguments;var o=i.length;var a=String(e).replace(r,function(e){if(e==="%%")return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}});for(var l=i[n];n<o;l=i[++n]){if(b(l)||!T(l)){a+=" "+l}else{a+=" "+s(l)}}return a};n.deprecate=function(e,r){if(E(i.process)){return function(){return n.deprecate(e,r).apply(this,arguments)}}if(t.noDeprecation===true){return e}var o=false;function a(){if(!o){if(t.throwDeprecation){throw new Error(r)}else if(t.traceDeprecation){console.trace(r)}else{console.error(r)}o=true}return e.apply(this,arguments)}return a};var o={};var a;n.debuglog=function(e){if(E(a))a=t.env.NODE_DEBUG||"";e=e.toUpperCase();if(!o[e]){if(new RegExp("\\b"+e+"\\b","i").test(a)){var i=t.pid;o[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,i,t)}}else{o[e]=function(){}}}return o[e]};function s(e,t){var i={seen:[],stylize:u};if(arguments.length>=3)i.depth=arguments[2];if(arguments.length>=4)i.colors=arguments[3];if(y(t)){i.showHidden=t}else if(t){n._extend(i,t)}if(E(i.showHidden))i.showHidden=false;if(E(i.depth))i.depth=2;if(E(i.colors))i.colors=false;if(E(i.customInspect))i.customInspect=true;if(i.colors)i.stylize=l;return d(i,e,i.depth)}n.inspect=s;s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(e,t){var n=s.styles[t];if(n){return"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m"}else{return e}}function u(e,t){return e}function c(e){var t={};e.forEach(function(e,n){t[e]=true});return t}function d(e,t,i){if(e.customInspect&&t&&A(t.inspect)&&t.inspect!==n.inspect&&!(t.constructor&&t.constructor.prototype===t)){var r=t.inspect(i,e);if(!k(r)){r=d(e,r,i)}return r}var o=f(e,t);if(o){return o}var a=Object.keys(t);var s=c(a);if(e.showHidden){a=Object.getOwnPropertyNames(t)}if(B(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0)){return p(t)}if(a.length===0){if(A(t)){var l=t.name?": "+t.name:"";return e.stylize("[Function"+l+"]","special")}if(C(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}if(D(t)){return e.stylize(Date.prototype.toString.call(t),"date")}if(B(t)){return p(t)}}var u="",y=false,b=["{","}"];if(g(t)){y=true;b=["[","]"]}if(A(t)){var x=t.name?": "+t.name:"";u=" [Function"+x+"]"}if(C(t)){u=" "+RegExp.prototype.toString.call(t)}if(D(t)){u=" "+Date.prototype.toUTCString.call(t)}if(B(t)){u=" "+p(t)}if(a.length===0&&(!y||t.length==0)){return b[0]+u+b[1]}if(i<0){if(C(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}else{return e.stylize("[Object]","special")}}e.seen.push(t);var w;if(y){w=h(e,t,i,s,a)}else{w=a.map(function(n){return v(e,t,i,s,n,y)})}e.seen.pop();return m(w,u,b)}function f(e,t){if(E(t))return e.stylize("undefined","undefined");if(k(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(w(t))return e.stylize(""+t,"number");if(y(t))return e.stylize(""+t,"boolean");if(b(t))return e.stylize("null","null")}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,i,r){var o=[];for(var a=0,s=t.length;a<s;++a){if(R(t,String(a))){o.push(v(e,t,n,i,String(a),true))}else{o.push("")}}r.forEach(function(r){if(!r.match(/^\d+$/)){o.push(v(e,t,n,i,r,true))}});return o}function v(e,t,n,i,r,o){var a,s,l;l=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]};if(l.get){if(l.set){s=e.stylize("[Getter/Setter]","special")}else{s=e.stylize("[Getter]","special")}}else{if(l.set){s=e.stylize("[Setter]","special")}}if(!R(i,r)){a="["+r+"]"}if(!s){if(e.seen.indexOf(l.value)<0){if(b(n)){s=d(e,l.value,null)}else{s=d(e,l.value,n-1)}if(s.indexOf("\n")>-1){if(o){s=s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2)}else{s="\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")}}}else{s=e.stylize("[Circular]","special")}}if(E(a)){if(o&&r.match(/^\d+$/)){return s}a=JSON.stringify(""+r);if(a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){a=a.substr(1,a.length-2);a=e.stylize(a,"name")}else{a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");a=e.stylize(a,"string")}}return a+": "+s}function m(e,t,n){var i=0;var r=e.reduce(function(e,t){i++;if(t.indexOf("\n")>=0)i++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(r>60){return n[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]}return n[0]+t+" "+e.join(", ")+" "+n[1]}function g(e){return Array.isArray(e)}n.isArray=g;function y(e){return typeof e==="boolean"}n.isBoolean=y;function b(e){return e===null}n.isNull=b;function x(e){return e==null}n.isNullOrUndefined=x;function w(e){return typeof e==="number"}n.isNumber=w;function k(e){return typeof e==="string"}n.isString=k;function S(e){return typeof e==="symbol"}n.isSymbol=S;function E(e){return e===void 0}n.isUndefined=E;function C(e){return T(e)&&N(e)==="[object RegExp]"}n.isRegExp=C;function T(e){return typeof e==="object"&&e!==null}n.isObject=T;function D(e){return T(e)&&N(e)==="[object Date]"}n.isDate=D;function B(e){return T(e)&&(N(e)==="[object Error]"||e instanceof Error)}n.isError=B;function A(e){return typeof e==="function"}n.isFunction=A;function O(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}n.isPrimitive=O;n.isBuffer=e("./support/isBuffer");function N(e){return Object.prototype.toString.call(e)}function I(e){return e<10?"0"+e.toString(10):e.toString(10)}var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function M(){var e=new Date;var t=[I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}n.log=function(){console.log("%s - %s",M(),n.format.apply(n,arguments))};n.inherits=e("inherits");n._extend=function(e,t){if(!t||!T(t))return e;var n=Object.keys(t);var i=n.length;while(i--){e[n[i]]=t[n[i]]}return e};function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":15,_process:11,inherits:8}],17:[function(e,t,n){"use strict";t.exports=function(){var t={};var n=e("./svgbuilder.js");t.addActionButtons=function(e,t){var i=null;var r=null;var o="";var a=0;var s="";var l=0;var u=[];var c=null;var d=null;var f=null;var p=null;var h=document.getElementsByClassName("buttonGroup");var v=document.getElementsByClassName("dropdown-buttons").length;if(h[0]!==undefined){while(h.length>0){h[0].parentNode.removeChild(h[0])}}for(var m=0;m<e.length;m++){if(e[m].alignment==="M"&&e[m].position>l){l=e[m].position}}var g=window.innerWidth/2;var y=g-(l+1)*.05*window.innerWidth;var b=0;for(var x=e.length-1;x>=0;x--){i=e[x].position;r=e[x].alignment;o=e[x].command;a=e[x].tweakx;if(a===undefined){a=0}s=e[x].label;if(r==="L"){b=.1*window.innerWidth*i}else if(r==="M"){b=y+.1*window.innerWidth*i}else if(r==="R"){b=window.innerWidth-.1*window.innerWidth*i}c=n.createGroup("buttonGroup",0,0);d=n.createCircle("action-dot",b,40,33);if(s.length>1){f=n.createText("fa action-dot-text",b+a,53,s.substring(0,1));p=n.createText("action-dot-doc-label",b+a,53,s.substring(1));c.appendChild(d);c.appendChild(f);c.appendChild(p)}else{f=n.createText("fa action-dot-text",b+a,53,s);c.appendChild(d);c.appendChild(f)}t.svg.appendChild(c);e[x].svgText=f;e[x].svgCircle=d;d.setAttribute("command",o);c.setAttribute("id",e[x].command+"Command");u[e.length-x-1]=[d,f]}var w=document.getElementsByClassName("buttonGroupUnderlay");if(w[0]!==undefined){if(w[0].getAttribute("transform")===null){w[0].setAttribute("transform","translate (0 0)")}var k={frame:20,adx:0,ady:-(v*80)/20};this.slideButton(k,w[0],"delete");if(w[1].getAttribute("transform")===null){w[1].setAttribute("transform","translate (0 0)")}k={frame:20,adx:0,ady:0};this.slideButton(k,w[1],"delete")}w=document.getElementsByClassName("action-dot-rect-pages");if(w[0]!==undefined){w[0].setAttribute("class","action-dot-rect-remove-pages")}w=document.getElementsByClassName("action-dot-rect-edit");if(w[0]!==undefined){w[0].setAttribute("class","action-dot-rect-remove-edit")}return u};t.createDropdown=function(e,t,i,r){var o=document.getElementById(r+"Command").childNodes;var a=o[0].getAttribute("cx");var s=o[0].getAttribute("cy");var l=n.createGroup("buttonGroupUnderlay",0,0);var u=n.createCircle("action-dot-underlay",a,40,40);u.setAttribute("transform","translate (0 0)");l.appendChild(u);t.svg.appendChild(l);var c={frame:20,adx:0,ady:e.length*80/20};this.slideButton(c,l);var d=n.createRect("action-dot-rect-"+r,a-40,40,80,e.length*80);l=n.createGroup("buttonGroupUnderlay",0,0);u=n.createCircle("action-dot-underlay",a,40,40);u.setAttribute("transform","translate (0 0)");l.appendChild(u);t.svg.appendChild(l);t.svg.appendChild(d);this.addButton(i,a,s,t,"pullUp"+r,"pullUp"+r);o[0].parentNode.parentNode.removeChild(o[0].parentNode);var f=[];for(var p=0;p<e.length;p++){var h=e[p].label;console.log(h,h.match(/[a-z]/i));if(h.match(/[a-z]/i)!==null){f[p]=this.addButton(h,a,s,t,e[p].command,undefined,"dropdown-buttons","text-buttons")}else{f[p]=this.addButton(h,a,s,t,e[p].command,undefined,"dropdown-buttons")}}for(var v=0;v<f.length;v++){c={frame:20,adx:0,ady:80*(v+1)/20};this.slideButton(c,f[v])}return f};t.deleteDropdown=function(e,t,n,i){for(var r=0;r<e.length;r++){var o={frame:20,adx:0,ady:-(80*(r+1)/20)};this.slideButton(o,e[r],"delete")}var a=document.getElementById("pullUp"+i).childNodes;var s=a[0].getAttribute("cx");var l=a[0].getAttribute("cy");this.addButton(n,s,l,t,i,i);a[0].parentNode.parentNode.removeChild(a[0].parentNode);var u=document.getElementsByClassName("buttonGroupUnderlay");var c={frame:20,adx:0,ady:-(e.length*80)/20};this.slideButton(c,u[0],"delete");c={frame:20,adx:0,ady:0};this.slideButton(c,u[1],"delete");u=document.getElementsByClassName("action-dot-rect-"+i);u[0].setAttribute("class","action-dot-rect-remove-"+i)};t.addButton=function(e,t,i,r,o,a,s,l){var u=n.createGroup("buttonGroup",0,0);var c=n.createCircle("action-dot",t,i,33);var d=n.createText("fa action-dot-text",t,parseInt(i,10)+13,e);if(o!==undefined){c.setAttribute("command",o)}if(a!==undefined){u.setAttribute("id",a)}if(l!==undefined){d.setAttribute("class","fa action-dot-text "+l)}if(s!==undefined){u.setAttribute("class","buttonGroup "+s);if(o==="copy"){var f=u.getAttribute("class");u.setAttribute("class",f+" copy-button")}}u.appendChild(c);u.appendChild(d);r.svg.appendChild(u);return u};t.slideButton=function e(t,n,i){var r=t.frame;var o=n.getAttribute("transform");var a=o.lastIndexOf(")");var s=o.lastIndexOf(" ");var l=parseInt(o.substring(s,a),10);n.setAttribute("transform","translate("+t.adx+" "+(l+t.ady)+")");if(r>1){t.frame=r-1;requestAnimationFrame(function(){e(t,n,i)})}else if(i==="delete"){n.parentNode.removeChild(n)}};return t}()},{"./svgbuilder.js":41}],18:[function(e,t,n){"use strict";t.exports=function(){var t=e("knockout");var n={showCode:t.observable(false),editorSounds:t.observable(true)};n.insert=function(e){var t=document.createElement("div");t.innerHTML="";n.domId="app-settings";e.appendChild(t)};return n}()},{knockout:10}],19:[function(e,t,n){"use strict";t.exports=function(){var t={};t.start=function(){var n=e("knockout");var i=e("clipboard");t.tbe=e("./teakblocks.js");t.conductor=e("./conductor.js");var r=e("./actionButtons.js");var o=e("./teaktext.js");var a=t.tbe;t.overlayDom=document.getElementById("overlayLayer");t.driverOverlay=e("./overlays/driveOverlay.js");t.debugOverlay=e("./overlays/debugOverlay.js");t.fileOverlay=e("./overlays/fileOverlay.js");t.settingsOverlay=e("./overlays/settings.js");t.splashOverlay=e("./overlays/splashOverlay.js");t.storage=t.fileOverlay.localStorage();var s={play:"",pause:"",stop:"",file:"",trash:"",folder:"",undo:"",redo:"",settings:"",copy:"",paste:"",page:"",edit:"",save:"",gamepad:"",debug:"",camera:""};a.components={};a.components.appSettings=e("./app-settings.js");a.components.blockSettings=e("./block-settings.js");n.applyBindings(a.components);var l=document.getElementById("tbe-forms");a.components.appSettings.insert(l);a.components.blockSettings.insert(l);a.audio={shortClick:document.getElementById("short-click"),poof:document.getElementById("poof"),playSound:function e(t){if(a.components.appSettings.editorSounds()){t.play()}}};a.audio.shortClick.preload="true";a.audio.poof.preload="true";a.init(document.getElementById("editorSvgCanvas"));var u=[{label:"A",command:"loadDocA"},{label:"B",command:"loadDocB"},{label:"C",command:"loadDocC"},{label:"D",command:"loadDocD"},{label:"E",command:"loadDocE"}];var c=[{label:s.trash,command:"trash"},{label:s.copy,command:"copy"},{label:s.paste,command:"paste"},{label:s.save,command:"save"},{label:s.settings,command:"splashOverlay"}];a.deleteRay=null;a.commands={play:function e(){t.conductor.playAll()},stop:function e(){t.conductor.stopAll()},trash:function e(){a.clearAllBlocks()},pages:function e(){a.clearStates();a.dropdownButtons=r.createDropdown(u,a,s.folder,"pages")},edit:function e(){a.clearStates();a.dropdownButtons=r.createDropdown(c,a,s.edit,"edit")},loadDocA:function e(){a.loadDoc("docA")},loadDocB:function e(){a.loadDoc("docB")},loadDocC:function e(){a.loadDoc("docC")},loadDocD:function e(){a.loadDoc("docD")},loadDocE:function e(){a.loadDoc("docE")},docSnapShot:function e(){t.fileOverlay.cameraFlash()},driveOverlay:function e(){t.showOverlay(t.driverOverlay)},debugOverlay:function e(){t.showOverlay(t.debugOverlay)},splashOverlay:function e(){t.showOverlay(t.splashOverlay)},settings:function e(){a.loadSettings()},undo:function e(){a.undoAction()},redo:function e(){a.redoAction()},pullUppages:function e(){r.deleteDropdown(a.dropdownButtons,a,s.folder,"pages")},pullUpedit:function e(){r.deleteDropdown(a.dropdownButtons,a,s.edit,"edit")},copy:function e(){a.copyText=o.blocksToText(a.forEachDiagramChain)},paste:function e(){if(a.copyTest!==null){o.textToBlocks(a,a.copyText)}},save:function e(){var n=o.blocksToText(a.forEachDiagramChain);t.fileOverlay.saveFile(a.currentDoc,n)}};var d=new i(".copy-button",{text:function e(){return o.blocksToText(a.forEachDiagramChain)}});d.on("success",function(e){console.log(e)});d.on("error",function(e){console.log(e)});var f={name:"A",blocks:{identity:{},picture:{},sound:{},motor:{},twoMotor:{},wait:{},loop:{}}};a.addPalette(f);var p=[{alignment:"L",position:1,label:s.play,command:"play",tweakx:4},{alignment:"L",position:2,label:s.stop,command:"stop"},{alignment:"M",position:1,label:s.gamepad,command:"driveOverlay"},{alignment:"M",position:2,label:s.debug,command:"debugOverlay"},{alignment:"M",position:3,label:s.folder,command:"pages"},{alignment:"M",position:4,label:s.camera,command:"docSnapShot"},{alignment:"M",position:5,label:s.edit,command:"edit"}];a.actionButtons=p;r.addActionButtons(p,a);document.body.onresize=a.updateScreenSizes;t.conductor.attachToScoreEditor(a);if(t.splashOverlay.showLaunchAboutBox()){t.doCommand("splashOverlay")}};t.doCommand=function(e){var n=t.tbe.commands[e];if(typeof n==="function"){n()}};t.showOverlay=function(e){t.tbe.undoArray={};t.tbe.undoTransactionIndex=0;t.tbe.saveCurrentDoc();t.tbe.clearStates();e.start()};return t}()},{"./actionButtons.js":17,"./app-settings.js":18,"./block-settings.js":21,"./conductor.js":32,"./overlays/debugOverlay.js":36,"./overlays/driveOverlay.js":37,"./overlays/fileOverlay.js":38,"./overlays/settings.js":39,"./overlays/splashOverlay.js":40,"./teakblocks.js":43,"./teaktext.js":45,clipboard:3,knockout:10}],20:[function(e,t,n){"use strict";t.exports=function t(){var n=e("knockout");var i={};i.connectionChanged=n.observable({});
i.connectionChanged.extend({notify:"always"});i.messages=[];i.accelerometer=0;i.compass=0;i.temp=0;i.statusEnum={NOT_THERE:0,BEACON:1,CONNECTING:2,CONNECTED:3,CONNECTION_ERROR:4};var r={serviceUUID:"6e400001-b5a3-f393-e0a9-e50e24dcca9e",txCharacteristic:"6e400002-b5a3-f393-e0a9-e50e24dcca9e",rxCharacteristic:"6e400003-b5a3-f393-e0a9-e50e24dcca9e"};function o(e){var t=new Uint8Array(e.length);for(var n=0,i=e.length;n<i;n++){t[n]=e.charCodeAt(n)}return t.buffer}function a(e){return String.fromCharCode.apply(null,new Uint8Array(e))}if(typeof ble!=="undefined"){i.appBLE=ble;i.webBLE=null}else if(navigator.bluetooth!==null&&navigator.bluetooth!==undefined){i.appBLE=null;i.webBLE=navigator.bluetooth}else{i.appBLE=null;i.webBLE=null}var s=0;var l=[{name:"BBC micro:bit [aragorn]",mac:"0000000A",delay:500},{name:"puck.js 4e75",mac:"00004e75",delay:500},{name:"BBC micro:bit [frodo]",mac:"0000000F",delay:1e3},{name:"BBC micro:bit [aragorn]",mac:"0000000A",delay:1e3},{name:"BBC micro:bit [frodo]",mac:"0000000F",delay:500},{name:"BBC micro:bit [aslan]",mac:"000000AA",delay:100},{name:"puck.js 4e75",mac:"0000000A",delay:1e3},{name:"BBC micro:bit [aragorn]",mac:"0000000A",delay:1e3},{name:"BBC micro:bit [aragorn]",mac:"0000000A",delay:200},{name:"BBC micro:bit [zorgav]",mac:"000000FF",delay:500}];i.devices={};i.scanning=false;i.psedoScan=function(){if(s>=l.length){s=0}var e=l[s];i.beaconReceived(e);s+=1;if(i.scanning){setTimeout(function(){i.psedoScan()},e.delay)}};i.stopObserving=function(){i.scanning=true;if(i.appBLE){i.appBLE.stopScan()}};i.findDeviceByMac=function(e){for(var t in i.devices){var n=i.devices[t];if(e===n.mac){return n}}return null};i.bleNameToBotName=function(e){if(e.startsWith("BBC micro:bit [")){return e.split("[",2)[1].split("]",1)[0]}else{return null}};i.beaconReceived=function(e){if(e.name!==undefined){var t=i.bleNameToBotName(e.name);if(t!==null){if(!this.devices.hasOwnProperty(t)){this.devices[t]={name:t,mac:e.id};i.setConnectionStatus(t,i.statusEnum.BEACON)}this.devices[t].ts=Date.now();if(Number.isInteger(e.rssi)){this.devices[t].rssi=e.rssi}this.cullList()}}};i.cullList=function(){var e=Date.now();for(var t in i.devices){var n=i.devices[t];if(n.status===i.statusEnum.BEACON&&e-n.ts>4e3){delete i.devices[t]}}i.connectionChanged(i.devices)};i.startObserving=function(){i.scanning=true;if(i.webBLE){i.webBTConnect()}else if(i.appBLE){i.appBLE.startScanWithOptions([],{reportDuplicates:true},function(e){i.beaconReceived(e)},function(e){console.log("error1:"+e)})}else{console.log("simulated bluetooth scan");i.psedoScan()}};i.webBTConnect=function(){var e={filters:[{services:["generic_attribute"]},{namePrefix:"BBC micro:bit"}],optionalServices:[r.serviceUUID]};navigator.bluetooth.requestDevice(e).then(function(e){console.log("> device:",e);var t={name:e.name,id:e.id,rssi:-1,autoSelect:true};i.beaconReceived(t);return e.gatt.connect()}).then(function(e){console.log("> primary service:",e);return e.getPrimaryService(r.serviceUUID)}).then(function(e){console.log("> primary Service:",e);return e.getCharacteristics()}).then(function(e){var t=e[0].service.device.name;console.log("> characteristics:",t,e);var n=i.bleNameToBotName(t);i.setConnectionStatus(n,i.statusEnum.CONNECTED)}).catch(function(e){console.log("cancel or error :"+e)})};i.connectionStatus=function(e){if(i.devices.hasOwnProperty(e)){return i.devices[e].status}else{return i.statusEnum.NOT_THERE}};i.setConnectionStatus=function(e,t){i.devices[e].status=t;i.connectionChanged(i.devices)};i.disconnect=function(e){if(i.appBLE){i.appBLE.disconnect(e)}};i.connect=function(e){if(i.devices.hasOwnProperty(e)){var t=i.devices[e].mac;if(i.appBLE){i.setConnectionStatus(e,i.statusEnum.CONNECTING);i.appBLE.connect(t,i.onConnect,i.onDisconnect,i.onError)}else if(i.webBLE){}else{i.setConnectionStatus(e,i.statusEnum.CONNECTED)}}};i.onConnect=function(e){console.log("On Connected:",e.name,e);i.appBLE.startNotification(e.id,r.serviceUUID,r.rxCharacteristic,function(t){i.onData(e.name,t)},i.onError);var t=i.findDeviceByMac(e.id);if(t!==null){i.setConnectionStatus(t.name,i.statusEnum.CONNECTED)}};i.onDisconnect=function(e){console.log("On Disconnect:"+e.name)};i.onData=function(e,t){var n=a(t);console.log("On Data:",e,n);i.messages.push(e+":"+n);if(n.includes("accel")){i.accelerometer=n.substring(7,n.length-2)}else if(n.includes("compass")){i.compass=n.substring(9,n.length-2)}else if(n.includes("temp")){i.temp=n.substring(6,n.length-2)}};i.onError=function(e){console.log("Error2:",e)};i.write=function(e,t){console.log("ble write",e,t);if(i.devices.hasOwnProperty(e)){var n=i.devices[e].mac;if(i.appBLE){var a=o(t);i.appBLE.write(n,r.serviceUUID,r.txCharacteristic,a,i.onWriteOK,i.onWriteFail)}}};i.onWriteOK=function(e){console.log("write ok",e)};i.onWriteFail=function(e){console.log("write fail",e)};return i}()},{knockout:10}],21:[function(e,t,n){"use strict";t.exports=function(){var t=e("knockout");var n=e("./teakblocks.js");var i=e("./conductor.js");var r={visible:t.observable(true),activeBlock:null};r.insert=function(e){var t=document.createElement("div");var o=document.createElement("div");t.innerHTML='<div id="block-settings" class="block-config-form blockform">\n        <div class="block-settings-editops"><button class="block-run">\n            <i class="fa fa-step-forward" aria-hidden="true"></i>\n          </button><button class="block-clone">\n            <i class="fa fa-clone" aria-hidden="true"></i>\n          </button><button class="block-clear">\n            <i class="fa fa-trash-o" aria-hidden="true"></i>\n          </button></div>\n        <div id="block-settings-custom"></div>\n        <div id="block-controller-tabs"></div>\n    </div>';o.innerHTML='<div id="block-settings" class="block-config-form blockform">\n        <div class="block-settings-editops"><button class="block-run">\n            <i class="fa fa-step-forward" aria-hidden="true"></i>\n          </button><button class="block-clone">\n            <i class="fa fa-clone" aria-hidden="true"></i>\n          </button><button class="block-clear">\n            <i class="fa fa-trash-o" aria-hidden="true"></i>\n          </button></div>\n    </div>';e.appendChild(t);e.appendChild(o);r.commonDiv=t;r.groupDiv=o;for(var a=0;a<2;a++){document.getElementsByClassName("block-run")[a].onclick=function(){i.playOne(r.activeBlock)};document.getElementsByClassName("block-clone")[a].onclick=function(){if(r.activeBlock!==null){var e=n.findChunkStart(r.activeBlock);if(e.isLoopTail()){e=e.flowHead}var t=e;if(t.isLoopHead()){t=t.flowTail}if(e.isGroupSelected()){while(t.next!==null&&t.next.isSelected()){t=t.next}}var i=n.replicateChunk(e,t);var o=-140;if(i.top<140){o=140}n.animateMove(i,i.last,0,o,20)}};document.getElementsByClassName("block-clear")[a].onclick=function(){if(r.activeBlock!==null){var e=n.findChunkStart(r.activeBlock);var t=null;var i=e;while(i.next!==null&&i.next.isSelected()){i=i.next}if(e.isLoopTail()){t=e.flowHead}else if(e.isLoopHead()&&e.flowTail.next!==null&&!e.flowTail.next.isSelected()){t=e;e=e.flowTail}if(t!==null){n.deleteChunk(t,e)}else{n.deleteChunk(e,i)}}}}r.customDiv=document.getElementById("block-settings-custom");r.controllersDiv=document.getElementById("block-controller-tabs")};r.hide=function(e,t){var i=true;var r=false;var o=this.activeBlock;if(o!==null&&o.isGroupSelected()){if(!o.isIsolatedLoop()){r=true}}if(o!==null&&o!==e){if(o.funcs.configuratorClose!==undefined){o.funcs.configuratorClose(this.customDiv,o)}this.activeBlock=null;var a=null;if(r){a=this.groupDiv}else{a=this.commonDiv}a.style.transition="all 0.2s ease";a.style.position="absolute";a.style.transform="scale(0.33, 0.0)";a.style.pointerEvents="all";this.customDiv.innerHTML="";this.tabNames=[];this.tabButtons=[]}if(t!==undefined){i=t}if(i){n.diagramChanged()}};r.tap=function(e){if(this.activeBlock===e){n.clearStates()}else if(this.activeBlock!==null){n.clearStates();this.activeBlock=e;if(e.name==="tail"){e.markSelected(true);e.flowHead.markSelected(true)}else if(e.name==="loop"){e.markSelected(true);e.flowTail.markSelected(true)}else{e.markSelected(true)}setTimeout(function(){r.showActive()},400)}else{if(e.name==="tail"){e.markSelected(true);e.flowHead.markSelected(true)}else if(e.name==="loop"){e.markSelected(true);e.flowTail.markSelected(true)}else{e.markSelected(true)}this.activeBlock=e;this.showActive(null)}};r.buildControllerTabs=function(){r.controllersDiv.innerHTML="";var e=this.activeBlock.funcs.tabs;this.tabButtons=[];if(e!==undefined){this.tabNames=Object.keys(e);var t=this.tabNames.length;var n=document.createElement("div");var i=100/t+"%";for(var o=0;o<t;o++){var a=document.createElement("button");var s=this.tabNames[o];r.tabButtons.push(a);n.appendChild(a);a.id=s;a.className="block-settings-tab";a.style.width=i;if(o===0){a.style.borderRadius="0px 0px 0px 10px"}else if(o===t-1){a.style.borderRadius="0px 0px 10px 0px"}else{a.style.borderRadius="0px"}a.innerHTML=e[s];a.onclick=r.onClickTab}this.controllersDiv.appendChild(n);this.selectActiveTab(this.activeBlock.controllerSettings.controller)}else{var l=this.activeBlock.funcs.controllers;if(typeof l==="function"){l(r.controllersDiv)}else{r.controllersDiv.innerHTML=""}}};r.onClickTab=function(){r.selectActiveTab(this.id)};r.selectActiveTab=function(e){var t=this.tabNames.length;for(var n=0;n<t;n++){if(this.tabNames[n]===e){this.tabButtons[n].classList.add("tab-selected")}else{this.tabButtons[n].classList.remove("tab-selected")}}};r.buildController=function(){var e=this.activeBlock.funcs.configuratorOpen;if(typeof e==="function"){e(r.customDiv,this.activeBlock)}else{r.customDiv.innerHTML='<div>\n          <label><input type="checkbox">\n            <span class="label-text">Power</span>\n          </label>\n      </div>'}};r.showActive=function(e){var t=false;var n=0;var i=0;var o=this.activeBlock;if(o!==null&&o.isGroupSelected()){if(!o.isIsolatedLoop()){t=true}}if(e!==null){}if(o===null){return}this.buildControllerTabs();this.buildController();var a=o.left;var s=o.bottom;var l=null;if(t){l=r.groupDiv}else{l=r.commonDiv}var u=0;if(o.funcs.tabs!==undefined&&Object.keys(o.funcs.tabs).length!==0){u=260}else{u=220}if(a-80<0){n=85-a}else if(a+160>window.innerWidth){n=window.innerWidth-(a+165)}if(s+u>window.innerHeight&&(!o.isGroupSelected()||o.isIsolatedLoop())){i=-u-10-o.height}l.style.transition="all 0.0s ease";l.style.left=a-80+n+"px";l.style.right=a+80+n+"px";l.style.top=s+5+i+"px";setTimeout(function(){l.style.transition="all 0.2s ease";l.style.position="absolute";l.style.width="240px";l.style.transform="scale(1.0, 1.0)";l.style.pointerEvents="all"},10)};return r}()},{"./conductor.js":32,"./teakblocks.js":43,knockout:10}],22:[function(e,t,n){"use strict";t.exports=function(){var e={};e.svg=function(e){return e};return e}()},{}],23:[function(e,t,n){"use strict";t.exports=function(){var t=e("./../svgbuilder.js");var n=e("./keypadTab.js");var i=e("knockout");var r={};var o={};var a=50;r.tabs={};r.keyPadValue=i.observable(0+" times");r.svg=function(e,n){var i=t.createText("svg-clear block-flowhead-loop",10,40,"");e.appendChild(i);var r=n.controllerSettings.data.duration;var o=t.createText("svg-clear block-flowhead-count block-stencil-fill",25,70,r);o.setAttribute("text-anchor","middle");e.appendChild(o);return e};r.defaultSettings=function(){return{data:{duration:5},controller:"forLoop",width:a}};o.defaultSettings=r.defaultSettings;o.calculateEnclosedScopeDepth=function(e){var t=0;var n=0;var i=e.prev;while(i!==null&&i!==e.flowHead){if(i.flowHead!==null){t+=1;if(t>n){n=t}}else if(i.flowTail!==null){t-=1}i=i.prev}return n};o.svg=function(){};o.crossBlockSvg=function(e){var n=e.svgCrossBlock;if(n!==undefined){e.svgGroup.removeChild(n)}var i=this.calculateEnclosedScopeDepth(e)+1;var r=a/2-(e.left-e.flowHead.left);var o=e.right-e.flowHead.left-a;var s=8*i;var l=4*i;var u=8;var c=t.pathBuilder;var d="";d=c.move(r,0);d+=c.line(l,-s);d+=c.arc(u,60,0,1,u*.9,-(u*.7));d+=c.hline(o-2*u-2*l);d+=c.arc(u,60,0,1,u*.9,u*.7);d+=c.line(l,s);n=t.createPath("flow-path svg-clear",d);e.svgGroup.insertBefore(n,e.svgRect);e.svgCrossBlock=n};r.configuratorOpen=function(e,t){n.openTabs({getValue:function e(){return t.controllerSettings.data.duration},setValue:function e(n){t.controllerSettings.data.duration=n},type:r,div:e,block:t,min:1,max:100,suffix:" times",numArray:["+1","C","+10","-1",undefined,"-10"],calcLayout:"simple"})};r.configuratorClose=function(e){n.closeTabs({div:e})};o.configuratorOpen=function(e,t){r.configuratorOpen(e,t.flowHead)};o.configuratorClose=function(e){r.configuratorClose(e)};return{flowBlockHead:r,flowBlockTail:o}}()},{"./../svgbuilder.js":41,"./keypadTab.js":25,knockout:10}],24:[function(e,t,n){"use strict";t.exports=function(){var t=e("./../svgbuilder.js");var n=e("./../bleConnections.js");var i=e("knockout");var r=t.pathBuilder;var o={};o.devices=i.observableArray([]);o.onDeviceClick=function(){var e=this.name;if(typeof name==="string"){var t=o.activeBlock;var n=t.controllerSettings.data.deviceName;if(n!==e){var r=i.utils.arrayFirst(o.devices(),function(e){return e().name===n});if(r){r().selected(false)}this.selected(true)}t.controllerSettings.data.deviceName=e;t.updateSvg()}};o.tabs={};o.defaultSettings=function(){return{data:{start:"click",deviceName:"-?-",bus:"ble"},controller:"target-bt",status:0}};o.configuratorOpen=function(e,t){o.activeBlock=t;e.innerHTML="<div class='list-box-shell'>\n          <ul class='list-box' data-bind='foreach: devices'>\n            <li data-bind= \"css:{'list-item-selected':selected()}\">\n              <span data-bind= \"text:name, click:$parent.onDeviceClick\"></span>\n            </li>\n          </ul>\n      </div>";i.applyBindings(o,e);o.refreshList(n.devices);o.watch=n.connectionChanged.subscribe(o.refreshList);n.startObserving()};o.refreshList=function(e){o.devices.removeAll();for(var t in e){if(e.hasOwnProperty(t)){o.addItem(t)}}};o.configuratorClose=function(e){n.stopObserving();o.watch.dispose();o.watch=null;o.activeBlock=null;i.cleanNode(e)};o.svg=function(e,i){var o="";o=r.move(31,11);o+=r.hline(18);o+=r.arc(9,180,0,1,0,18);o+=r.hline(-18);o+=r.arc(9,180,0,1,0,-18);var a=t.createPath("svg-clear block-stencil",o);e.appendChild(a);e.appendChild(t.createCircle("svg-clear block-stencil-fill",31,20,2));e.appendChild(t.createCircle("svg-clear block-stencil-fill",49,20,2));var s=i.controllerSettings.data.deviceName;var l=t.createText("block-identity-text svg-clear",40,50,s);l.setAttribute("text-anchor","middle");e.appendChild(l);var u=n.connectionStatus(s);if(s!=="-?-"){var c=0;if(u===n.statusEnum.NOT_THERE){c="block-bot-not-found"}else if(u===n.statusEnum.BEACON){c="block-bot-visible"}else if(u===n.statusEnum.CONNECTING){c="block-bot-connecting"}else if(u===n.statusEnum.CONNECTED){c="block-bot-connected"}else{c="block-bot-connection-error"}e.appendChild(t.createCircle("svg-clear "+c,40,65,5))}};o.addItem=function(e){var t=o.activeBlock;if(t!==null){var n=t.controllerSettings.data.deviceName;var r=i.observable({name:e,selected:i.observable(e===n)});o.devices.unshift(r)}};return o}()},{"./../bleConnections.js":20,"./../svgbuilder.js":41,knockout:10}],25:[function(e,t,n){"use strict";t.exports=function(){var t=e("./../svgbuilder.js");var n=e("interact.js");var i=e("knockout");var r={};r.tabbedButtons=function(e){e.inner="<div id='keypadDiv' class='editorDiv'>\n              <div id=\"numeric-display\" class = \"numeric-display-half svg-clear selectedDisplay\" width='80px' height='80px' data-bind='text: keyPadValue'>\n\n              </div>\n              <div id=\"beats-display\" class = \"beats-display svg-clear\" width='80px' height='80px' data-bind='text: beatsValue'>\n\n              </div>\n              <svg id=\"keypadSvg\" class='area' width='225px' height='200px' xmlns='http://www.w3.org/2000/svg'></svg>\n              <svg id=\"beatsSvg\" class='area' width='225px' height='200px' xmlns='http://www.w3.org/2000/svg'></svg>\n          </div>";r.openTabs(e);var t=document.getElementById("beats-display");var n=document.getElementById("numeric-display");t.onclick=function(){var i=document.getElementsByClassName("dataButton");t.className+=" selectedDisplay";n.className="numeric-display-half svg-clear";var o=i.length;for(var a=0;a<o;a++){i[0].parentNode.removeChild(i[0])}var s=document.getElementById("keypadSvg");s.parentNode.removeChild(s);r.openBeats(e)};n.onclick=function(){var o=document.getElementsByClassName("beatsButton");n.className+=" selectedDisplay";t.className="beats-display svg-clear";var a=o.length;for(var s=0;s<a;s++){o[0].parentNode.removeChild(o[0])}i.cleanNode(e.div);r.tabbedButtons(e)}};r.openTabs=function(e){var r=e.div;var o=e.block;var a=e.min;var s=e.max;var l=e.suffix;var u=e.type;var c=e.setValue;var d=e.getValue;var f=e.numArray;var p=e.calcLayout;if(e.inner===undefined){r.innerHTML="<div id='keypadDiv' class='editorDiv'>\n                <div id=\"numeric-display\" class = \"numeric-display svg-clear\" width='80px' height='80px' data-bind='text: keyPadValue'>\n\n                </div>\n                <svg id=\"keypadSvg\" class='area' width='225px' height='200px' xmlns='http://www.w3.org/2000/svg'></svg>\n            </div>"}else{r.innerHTML=e.inner}i.applyBindings(u,r);var h=document.getElementById("numeric-display");var v=document.getElementById("keypadSvg");var m=d().toString();u.keyPadValue(m.toString()+l);var g="";for(var y=0;y<4;y++){for(var b=0;b<3;b++){if(f[y*3+b]!==undefined){var x=t.createGroup("dataButton",0,0);var w=t.createRect("calcButtons",2.5+b*75,5+y*35,70,30,6);var k=t.createText("svg-clear",37.5+b*75,27.5+y*35,f[y*3+b]);k.setAttribute("text-anchor","middle");x.appendChild(w);x.appendChild(k);w.setAttribute("name",f[y*3+b]);v.appendChild(x)}}}n(".calcButtons",{context:v}).on("tap",function(e){g=e.target.getAttribute("name");if(p==="simple"){var t="";h.classList.remove("error");if(g.substring(0,1)==="+"||g.substring(0,1)==="-"){t=g.substring(0,1);g=g.substring(1)}if(g==="<-"||g==="C"){m="0"}if(t==="-"){if(parseInt(m,10)-parseInt(g,10)>=a){m=(parseInt(m,10)-parseInt(g,10)).toString()}else{m=a;h.classList.add("error")}}else if(t==="+"){if(parseInt(m,10)+parseInt(g,10)<=s){m=(parseInt(m,10)+parseInt(g,10)).toString()}else{m=s;h.classList.add("error")}}}else if(p==="complex"){var n=g==="+/-";if(g==="<-"||g==="C"){m="0";h.classList.remove("error")}else if(n&&m!=="0"){h.classList.remove("error");if(m.substring(0,1)==="-"){m=m.substring(1)}else{m="-"+m}}else if(m==="0"&&!n){h.classList.remove("error");m=g}else if(parseInt(m+g,10)<=s&&parseInt(m+g,10)>=a&&!n){m+=g}else if(!n){h.classList.add("error")}}else if(p==="defined"){m=g}u.keyPadValue(m.toString()+l);c(m);o.updateSvg()});return};r.openBeats=function(e){var i=e.getBeats;var r=e.setBeats;var o=e.type;var a=e.block;var s=e.beatsRay;if(s===undefined){s=["1","2","3","4","5","6","7","8","9"]}var l=document.getElementById("beatsSvg");var u=i().toString();if(u==="1"){o.beatsValue(u.toString()+" beat")}else{o.beatsValue(u.toString()+" beats")}for(var c=0;c<4;c++){for(var d=0;d<3;d++){if(s[c*3+d]!==undefined){var f=t.createGroup("",0,0);var p=t.createRect("beatsButtons",2.5+d*75,5+c*35,70,30,6);var h=t.createText("svg-clear",37.5+d*75,27.5+c*35,s[c*3+d]);h.setAttribute("text-anchor","middle");f.appendChild(p);f.appendChild(h);p.setAttribute("name",s[c*3+d]);l.appendChild(f)}}}n(".beatsButtons",{context:l}).on("tap",function(e){var t=e.target.getAttribute("name");u=t;if(u==="1"){o.beatsValue(u.toString()+" beat")}else{o.beatsValue(u.toString()+" beats")}r(u);a.updateSvg()})};r.openTabsWithBeats=function(e){e.inner="<div id='keypadDiv' class='editorDiv'>\n              <div id=\"numeric-display\" class = \"numeric-display-half svg-clear\" width='80px' height='80px' data-bind='text: keyPadValue'>\n\n              </div>\n              <div id=\"beats-display\" class = \"beats-display svg-clear\" width='80px' height='80px' data-bind='text: beatsValue'>\n\n              </div>\n              <svg id=\"keypadSvg\" class='area' width='225px' height='72px' xmlns='http://www.w3.org/2000/svg'></svg>\n              <svg id=\"beatsSvg\" class='area' width='225px' height='80px' xmlns='http://www.w3.org/2000/svg'></svg>\n          </div>";r.openTabs(e);e.beatsRay=["1","2","3","4","5","6"];r.openBeats(e)};r.closeTabs=function e(t){i.cleanNode(t.div)};return r}()},{"./../svgbuilder.js":41,"interact.js":9,knockout:10}],26:[function(e,t,n){"use strict";t.exports=function(){var t=e("./../svgbuilder.js");var n=e("./keypadTab.js");var i=e("knockout");var r=t.pathBuilder;var o={};o.tabs={1:"1",2:"2"};o.keyPadValue=i.observable(100+"%");o.beatsValue=i.observable("1 beat");o.defaultSettings=function(){return{data:{speed:100,duration:1,motor:"1"},controller:"speed"}};o.svg=function(e,n){var i=t.createCircle("svg-clear block-motor-body",40,30,20);e.appendChild(i);var o=t.createCircle("svg-clear block-motor-shaft",40,30,4);e.appendChild(o);var a=n.controllerSettings.data.speed;var s=a/100*180;var l=Math.cos(s*(Math.PI/180));var u=Math.sin(s*(Math.PI/180));var c=1;if(s<0){c=0}var d="";d=r.move(40,30);d+=r.line(0,-20);d+=r.arc(20,s,0,c,u*20,-(l*20-20));d+=r.close();var f=t.createPath("svg-clear block-stencil-fill-back",d);e.appendChild(f);d="";d=r.move(37,30);d+=r.line(2.5,-19);d+=r.hline(1);d+=r.line(2.5,19);d+=r.arc(3,180,1,1,-6,0);d+=r.close();f=t.createPath("svg-clear block-stencil-fill",d);f.setAttribute("transform","rotate("+s+" 40 30)");e.appendChild(f);var p=n.controllerSettings.data.duration;var h=t.createGroup("displayText",0,0);var v=t.createText("svg-clear block-motor-text-duration block-stencil-fill",40,70,p+" ");h.appendChild(v);h.setAttribute("text-anchor","middle");e.appendChild(h);return e};o.configuratorOpen=function(e,t){var i=document.getElementsByClassName("block-settings-tab");for(var r=0;r<i.length;r++){if(i[r].textContent===t.controllerSettings.data.motor){i[r].classList.add("tab-selected")}}n.tabbedButtons({getValue:function e(){return t.controllerSettings.data.speed},setValue:function e(n){t.controllerSettings.data.speed=n},type:o,div:e,block:t,min:-100,max:100,suffix:" %",numArray:["+1","+10","+50","-1","-10","-50",undefined,"C"],calcLayout:"simple",getBeats:function e(){return t.controllerSettings.data.duration},setBeats:function e(n){t.controllerSettings.data.duration=n}})};o.configuratorClose=function(e,t){var i=document.getElementsByClassName("block-settings-tab");for(var r=0;r<i.length;r++){if(i[r].classList.contains("tab-selected")){t.controllerSettings.data.motor=i[r].textContent}}n.closeTabs({div:e})};return o}()},{"./../svgbuilder.js":41,"./keypadTab.js":25,knockout:10}],27:[function(e,t,n){"use strict";t.exports=function(){var t=e("interact.js");var n=e("./../svgbuilder.js");var i={};function r(e,t){if(e===undefined){return}if(t===1){e.setAttribute("class","svg-clear block-picture-led-on")}else{e.setAttribute("class","svg-clear block-picture-led-off")}}function o(e){var t=e.target.parentNode.getBoundingClientRect();var n=Math.floor((e.pageX-t.left)/35);var i=Math.floor((e.pageY-t.top)/35);if(n>4||i>4){return-1}else{return i*5+n}}i.tabs={};i.defaultSettings=function(){return{data:{pix:[0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0,0,0,1,0,1,1,1,0]},controller:"5x5picture"}};i.svg=function(e,t){var i=t.controllerSettings.data.pix;var r=n.createGroup("svg-clear",26,15);var o=n.createRect("svg-clear block-picture-board",-7,-7,42,42,4);r.appendChild(o);for(var a=0;a<5;a++){for(var s=0;s<5;s++){var l="";if(i[s+a*5]===0){l="svg-clear block-picture-led-off"}else{l="svg-clear block-picture-led-on"}var u=n.createCircle(l,s*7,a*7,3);r.appendChild(u)}}e.appendChild(r)};i.configuratorClose=function(e,t){console.log("configurator closing",t)};i.configuratorOpen=function(e,i){e.innerHTML="<div id='pictureEditorDiv' class='editorDiv'>\n          <svg id='pictureEditor' width=175px height=175px xmlns='http://www.w3.org/2000/svg'>\n            <rect id='pictureRect' width=175px height=175px rx=10 ry=10 class='pix-editor block-picture-board'/>\n          </svg>\n        </div>";var a=document.getElementById("pictureEditor");var s=i.controllerSettings.data.pix;var l=0;var u=0;for(var c=0;c<5;c++){for(var d=0;d<5;d++){var f=n.createCircle("",17.5+d*35,17.5+c*35,13);r(f,s[u]);a.appendChild(f);u+=1}}t(".pix-editor",{context:a}).on("down",function(e){var t=o(e);if(t>=0){if(s[t]===0){l=1}else{l=0}}s[t]=l;r(e.target.parentNode.children[t+1],s[t]);i.updateSvg()}).on("move",function(e){if(e.interaction.pointerIsDown){var t=o(e);if(t>=0&&s[t]!==l){s[t]=l;r(e.target.parentNode.children[t+1],s[t]);i.updateSvg()}}});return};return i}()},{"./../svgbuilder.js":41,"interact.js":9}],28:[function(e,t,n){"use strict";t.exports=function(){var t=e("./../svgbuilder.js");var n=e("./keypadTab.js");var i=t.pathBuilder;var r={};var o=e("knockout");r.keyPadValue=o.observable(0+"%");r.defaultSettings=function(){return{data:{pos:0}}};r.svg=function(e,n){var r=t.createRect("svg-clear block-micro-servo-body",18,20,44,24,2.5);e.appendChild(r);var o="";o=i.move(45,32);o+=i.line(2.5,-19);o+=i.hline(1);o+=i.line(2.5,19);o+=i.arc(3,180,1,1,-6,0);o+=i.close();var a=t.createPath("svg-clear block-stencil-fill",o);var s=n.controllerSettings.data.pos;a.setAttribute("transform","rotate("+s+" 48 32)");e.appendChild(a);var l=t.createText("svg-clear block-servo-text block-stencil-fill",40,70,s+"");l.setAttribute("text-anchor","middle");e.appendChild(l);return e};r.testExpression=function(e){var n="";n=i.move(24,52);n+=i.line(-9,0);n+=i.line(9,2.5);n+=i.line(-9,2.5);n+=i.line(9,2.5);n+=i.line(-9,2.5);n+=i.line(9,2.5);n+=i.line(-9,2.5);n+=i.line(9,2.5);n+=i.line(-9,2.5);n+=i.line(9,0);var r=t.createPath("svg-clear block-sensor-stencil",n);e.appendChild(r);var o=t.createCircle("svg-clear block-sensor-stencil-value",19.5,62,4);e.appendChild(o);o=t.createCircle("svg-clear",19.5,62,1);e.appendChild(o);return e};r.configuratorOpen=function(e,t){n.openTabs({getValue:function e(){return t.controllerSettings.data.pos},setValue:function e(n){t.controllerSettings.data.pos=n},type:r,div:e,block:t,min:0,max:180,suffix:"",numArray:["+50","+10","+1","-50","-10","-1",undefined,"C"],calcLayout:"simple"})};r.configuratorClose=function(e){n.closeTabs({div:e})};return r}()},{"./../svgbuilder.js":41,"./keypadTab.js":25,knockout:10}],29:[function(e,t,n){"use strict";t.exports=function(){var t=e("interact.js");var n=e("./../svgbuilder.js");var i=n.pathBuilder;var r={};r.tabs={};r.defaultSettings=function(){return{data:{description:"C4",period:"1/4"},controller:"pianoKeyboard"}};var o=[{name:"C4",f:261.6},{name:"D4",f:293.7},{name:"E4",f:329.6},{name:"F4",f:349.2},{name:"G4",f:392},{name:"A4",f:440},{name:"B4",f:493.9},{name:"C5",f:523.2},{name:"C#4",f:277.2,keyShift:-3},{name:"D#4",f:311.1,keyShift:3},{name:"F#4",f:370,keyShift:-4},{name:"G#4",f:415.3,keyShift:0},{name:"A#4",f:466.1,keyShift:4}];r.configuratorOpen=function(e,i){r.activeBlock=i;e.innerHTML="<div id='pictureEditorDiv'>\n          <svg id='pianoSvg'width=231px height=145px xmlns='http://www.w3.org/2000/svg'>\n            <rect id='pictureRect' y=40px width=231px height=100px rx=4 ry=4 class='block-sound-piano'/>\n          </svg>\n        </div>";var a=document.getElementById("pianoSvg");var s=0;for(var l=0;l<8;l++){var u=n.createRect("piano-key block-sound-piano-w",4+l*28,53,27,84,3);u.setAttribute("key",s);s+=1;a.appendChild(u)}for(var c=0;c<7;c++){if(c!==2&&c!==6){var d=21+c*28+o[s].keyShift;var f=n.createRect("piano-key block-sound-piano-b",d,53,22,45,3);f.setAttribute("key",s);s+=1;a.appendChild(f)}}var p=n.createRect("svg-clear block-sound-piano",0,40,231,15,4);a.appendChild(p);r.audioContext=new(window.AudioContext||window.webkitAudioContext);t(".piano-key ",{context:a}).on("down",function(e){r.lastKey=e.target;r.playKey(e.target)}).on("move",function(e){if(e.interaction.pointerIsDown){if(r.currentKey!==e.target&&r.lastKey!==e.target){r.lastKey=e.target;r.playKey(e.target)}}}).on("up",function(){r.stopCurrentKey()})};r.configuratorClose=function(){r.audioContext.close();r.audioContext=null};r.currentKey=null;r.originalClass=null;r.lastKey=null;r.playKey=function(e){var t=Number(e.getAttribute("key"));e.setAttribute("key",t);r.stopCurrentKey();r.currentKey=e;r.originalClass=e.getAttribute("class");var n=r.originalClass+"-pressed";e.setAttribute("class",n);var i=r.audioContext;var a=i.createOscillator();var s=i.createGain();a.connect(s);s.connect(i.destination);s.gain.value=.3;a.type="sine";a.frequency.value=o[t].f;a.start();a.stop(i.currentTime+.4);s.gain.setTargetAtTime(0,i.currentTime+.3,.015);r.keyTimer=setTimeout(function(){r.stopCurrentKey()},400);r.activeBlock.controllerSettings.data.description=o[t].name;r.activeBlock.updateSvg()};r.stopCurrentKey=function(){if(r.currentKey!==null){clearTimeout(r.keyTimer);r.keyTimer=undefined;r.currentKey.setAttribute("class",r.originalClass);r.currentKey=null}};r.svg=function(e,t){var r="";r=i.move(20,25);r+=i.hline(9);r+=i.line(10,-10);r+=i.vline(30);r+=i.line(-10,-10);r+=i.hline(-9);r+=i.vline(-10);r+=i.close();var o=n.createPath("svg-clear block-stencil-fill",r);e.appendChild(o);r="";r=i.move(45,25);r+=i.arc(12,90,0,1,0,10);r+=i.move(5,-15);r+=i.arc(20,90,0,1,0,20);r+=i.move(5,-25);r+=i.arc(28,90,0,1,0,30);var a=n.createPath("svg-clear block-stencil",r);a.setAttribute("stroke-linecap","round");e.appendChild(a);var s=t.controllerSettings.data.description;var l=n.createText("block-identity-text svg-clear",40,70,s);l.setAttribute("text-anchor","middle");e.appendChild(l);return e};return r}()},{"./../svgbuilder.js":41,"interact.js":9}],30:[function(e,t,n){"use strict";t.exports=function(){var t=e("./../svgbuilder.js");var n=e("./keypadTab.js");var i=e("knockout");var r=t.pathBuilder;var o={};o.keyPadValue=i.observable(100+"%");o.beatsValue=i.observable("1 beat");o.defaultSettings=function(){return{data:{speed:100,duration:1},controller:"speed"}};o.svg=function(e,n){var i=t.createCircle("svg-clear block-motor-body",27,30,20);e.appendChild(i);var o=t.createCircle("svg-clear block-motor-shaft",27,30,4);e.appendChild(o);i=t.createCircle("svg-clear block-motor-body",53,30,20);e.appendChild(i);o=t.createCircle("svg-clear block-motor-shaft",53,30,4);e.appendChild(o);var a=n.controllerSettings.data.speed;var s=a/100*180;var l=Math.cos(s*(Math.PI/180));var u=Math.sin(s*(Math.PI/180));var c=1;if(s<0){c=0}var d="";d=r.move(53,30);d+=r.line(0,-20);d+=r.arc(20,s,0,c,u*20,-(l*20-20));d+=r.close();var f=t.createPath("svg-clear block-stencil-fill-back",d);e.appendChild(f);d="";d=r.move(50,30);d+=r.line(2.5,-19);d+=r.hline(1);d+=r.line(2.5,19);d+=r.arc(3,180,1,1,-6,0);d+=r.close();f=t.createPath("svg-clear block-stencil-fill",d);f.setAttribute("transform","rotate("+s+" 53 30)");e.appendChild(f);var p=n.controllerSettings.data.duration;var h=t.createGroup("displayText",0,0);var v=t.createText("svg-clear block-motor-text-duration block-stencil-fill",40,70,p+" ");h.appendChild(v);h.setAttribute("text-anchor","middle");e.appendChild(h);return e};o.configuratorOpen=function(e,t){n.tabbedButtons({getValue:function e(){return t.controllerSettings.data.speed},setValue:function e(n){t.controllerSettings.data.speed=n},type:o,div:e,block:t,min:-100,max:100,suffix:"%",numArray:["+1","+10","+50","-1","-10","-50",undefined,"C"],calcLayout:"simple",getBeats:function e(){return t.controllerSettings.data.duration},setBeats:function e(n){t.controllerSettings.data.duration=n}})};o.configuratorClose=function(e){n.closeTabs({div:e})};return o}()},{"./../svgbuilder.js":41,"./keypadTab.js":25,knockout:10}],31:[function(e,t,n){"use strict";t.exports=function(){var t=e("./../svgbuilder.js");var n=e("./keypadTab.js");var i=e("knockout");var r=t.pathBuilder;var o={};o.keyPadValue=i.observable(1);o.defaultSettings=function(){return{data:{duration:1}}};o.svg=function(e,n){var i="";i=r.move(40,19);i+=r.vline(-7);i+=r.arc(19,340,1,1,-12,4);i+=r.move(10.6,16.5);i+=r.arc(1.3,300,0,0,2.2,-.8);i+=r.line(-7.8,-10.5);i+=r.close();var o=t.createPath("svg-clear block-stencil",i);e.appendChild(o);var a=n.controllerSettings.data.duration;var s=t.createText("svg-clear block-wait-text block-stencil-fill",40,70,a+" ");
s.setAttribute("text-anchor","middle");e.appendChild(s);return e};o.configuratorOpen=function(e,t){n.openTabs({getValue:function e(){return t.controllerSettings.data.duration},setValue:function e(n){t.controllerSettings.data.duration=n},type:o,div:e,block:t,min:1,max:50,suffix:" beats",numArray:["+1","C","-1","+10",undefined,"-10"],calcLayout:"simple"})};o.configuratorClose=function(e){n.closeTabs({div:e})};return o}()},{"./../svgbuilder.js":41,"./keypadTab.js":25,knockout:10}],32:[function(e,t,n){"use strict";t.exports=function(){var t={};t.ble=e("./bleConnections.js");t.tbe=null;t.hbTimer=0;t.runningBlocks=[];t.count=null;t.defaultPix="0000000000";t.activeBits=[];t.attachToScoreEditor=function(e){console.log("attached to ",e);t.tbe=e;t.linkHeartBeat();t.ble.connectionChanged.subscribe(t.updateIndentiyBlocks)};t.updateIndentiyBlocks=function(){console.log(" updating identity blocks");var e=t.tbe.forEachDiagramChain;e(function(e){if(e.name==="identity"){var n=e.controllerSettings.data.deviceName;var i=t.ble.connectionStatus(n);if(i===t.ble.statusEnum.BEACON){t.ble.connect(n)}e.updateSvg()}})};t.linkHeartBeat=function(){t.hbTimer=0;t.tbe.forEachDiagramBlock(function(e){e.svgRect.classList.remove("running-block")});if(t.runningBlocks.length>0){for(var e=0;e<t.runningBlocks.length;e++){var n=t.runningBlocks[e];if(n!==null){if(t.loopCount===undefined&&n.isLoopHead()){t.loopCount=n.controllerSettings.data.duration}if(n.name==="tail"&&t.loopCount>1){n=n.flowHead;t.loopCount-=1}else if(n.name==="tail"&&t.loopCount===1){t.loopCount=undefined;if(n.next!==null){n=n.next}else{t.stopAll()}}if(n!==null&&n.name==="loop"){n=n.next}if(t.count===null){t.count=n.controllerSettings.data.duration}if(t.count===undefined||t.count==="0"){t.count=1}console.log(t.count);if(n!==null){t.count=parseInt(t.count,10);var i=n.first;if(i.name==="identity"){t.tbe.svg.appendChild(n.svgGroup);n.svgRect.classList.add("running-block")}t.playOne(n);if(t.count>1){t.count-=1}else{t.runningBlocks[e]=n.next;t.count=null}}}}}t.hbTimer=setTimeout(function(){t.linkHeartBeat()},1e3)};t.playAll=function(){t.runningBlocks=[];var e=t.tbe.forEachDiagramChain;e(function(e){if(e.name==="identity"){t.runningBlocks.push(e.next)}})};t.stopAll=function(){var e=t.tbe.forEachDiagramChain;var n="";var i="(m:(1 2) d:0);";var r="(px:"+t.defaultPix+");";e(function(e){e.svgRect.classList.remove("running-block");if(e.name==="identity"){n=e.controllerSettings.data.deviceName;t.ble.write(n,i);t.ble.write(n,r)}});t.count=null;t.runningBlocks=[];console.log("stop all")};t.playOne=function(e){var n=e.first;if(n.name==="identity"){var i=n.controllerSettings.data.deviceName;var r="";var o=e.controllerSettings.data;if(e.name==="picture"){var a=o.pix;var s=t.packPix(a);r="(px:"+s+":"+1+");"}else if(e.name==="servo"){r="(sr:"+50+");"}else if(e.name==="motor"){r="(m:"+o.motor+" d:"+o.speed+" b:"+o.duration+");"}else if(e.name==="twoMotor"){r="(m:(1 2) d:"+o.speed+");"}else if(e.name==="sound"){r="(nt:"+o.description+":"+1+");"}else if(e.name==="wait"){r=""}t.ble.write(i,r)}};t.playSingleChain=function(){console.log("play single chain")};t.packPix=function(e){var t="";for(var n=0;n<5;n++){var i=0;for(var r=0;r<5;r++){i*=2;if(e[n*5+r]!==0){i+=1}}var o=i.toString(16);if(o.length===1){o="0"+o}t+=o}return t};return t}()},{"./bleConnections.js":20}],33:[function(e,t,n){"use strict";t.exports=function(){var t={};var n=e("./appMain.js");var i="()";var r="(\n  (chain x:80 y:240 (\n    (identity start:'click' deviceName:'-?-' bus:'ble')\n    (picture pix:(0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 1 0 0 0 1 0 1 1 1 0))\n    (picture pix:(0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 0 1 1 1 0 1 0 0 0 1))\n    (picture pix:(0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 1 1 1 1 1 0 0 0 0 0))\n    (picture pix:(0 1 0 1 0 0 0 0 0 0 0 1 1 1 0 1 0 0 0 1 0 1 1 1 0))\n  )))";var o="(\n    (chain x:80 y:240 (\n      (identity start:'click' deviceName:'-?-' bus:'ble')\n      (loop count:'25' (\n        (picture pix:(1 1 1 1 1 1 0 0 0 1 1 0 0 0 1 1 0 0 0 1 1 1 1 1 1))\n        (picture pix:(0 0 0 0 0 0 1 1 1 0 0 1 0 1 0 0 1 1 1 0 0 0 0 0 0))\n        (picture pix:(0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0))\n      ))\n    )))";var a="(\n    (chain x:80 y:240 (\n      (identity start:'click' deviceName:'-?-' bus:'ble')\n      (sound description:'C4' period:'1/4')\n      (sound description:'E4' period:'1/4')\n      (sound description:'G4' period:'1/4')\n      (sound description:'E4' period:'1/4')\n      (sound description:'C4' period:'1/4')\n    )))";var s="(\n    (chain x:80 y:240 (\n      (identity start:'click' deviceName:'-?-' bus:'ble')\n      (motor speed:50 duration:0)\n      (motor speed:'100' duration:0)\n      (motor speed:50 duration:0)\n      (motor speed:'0' duration:0)\n      (motor speed:'-50' duration:0)\n      (motor speed:'-100' duration:0)\n      (motor speed:'-50' duration:0)\n    )))";t.containsFile=function(e){if(n.fileOverlay.loadFile(e)===null||n.fileOverlay.loadFile(e)==="null"){return false}return true};t.default=function(e){for(var t=0;t<e.length;t++){if(!this.containsFile(e[t])){var l="";switch(e[t]){case"docA":l=i;break;case"docB":l=r;break;case"docC":l=o;break;case"docD":l=a;break;case"docE":l=s;break;default:l=i;break}n.fileOverlay.saveFile(e[t],l)}}};return t}()},{"./appMain.js":19}],34:[function(e,t,n){"use strict";t.exports=function(){var t=e("./svgbuilder.js");var n={};n.bind=function(e){var t=e+"Block";var n=this[t];if(n===undefined){n=this.unknownBlock;console.log("cant find style for ",t)}return n};n.unknownBlock={svg:function e(n,i){var r=t.createText("function-text svg-clear",10,40,i.name);n.appendChild(r);return n}};n.identityBlock=e("./blocks/identityBlock.js");n.pictureBlock=e("./blocks/pictureBlock.js");n.soundBlock=e("./blocks/soundBlock.js");n.servoBlock=e("./blocks/servoBlock.js");n.waitBlock=e("./blocks/waitBlock.js");n.colorStripBlock=e("./blocks/colorStripBlock.js");var i=e("./blocks/flowBlocks.js");n.loopBlock=i.flowBlockHead;n.tailBlock=i.flowBlockTail;n.motorBlock=e("./blocks/motorBlock.js");n.twoMotorBlock=e("./blocks/twoMotorBlock.js");n.digitalWriteBlock={svg:function e(t){return t}};n.analogWriteBlock={};n.serialWriteBlock={};n.I2CWriteBlock={};n.calculatorBlock={svg:function e(t){return t}};n.musicNoteValue={};n.constantValue={};n.rangeValue={};n.acceleromoterValue={};n.timeValue={};n.compassValue={};n.temperatureValue={};n.funcionValue={};n.messageValue={};return n}()},{"./blocks/colorStripBlock.js":22,"./blocks/flowBlocks.js":23,"./blocks/identityBlock.js":24,"./blocks/motorBlock.js":26,"./blocks/pictureBlock.js":27,"./blocks/servoBlock.js":28,"./blocks/soundBlock.js":29,"./blocks/twoMotorBlock.js":30,"./blocks/waitBlock.js":31,"./svgbuilder.js":41}],35:[function(e,t,n){"use strict";var i=e("./appMain.js");i.isRegularBrowser=document.URL.indexOf("http://")>=0||document.URL.indexOf("https://")>=-0;if(!i.isRegularBrowser){document.addEventListener("deviceready",i.start,false);var r=document.createElement("script");r.setAttribute("src","./cordova.js");document.head.appendChild(r)}else{i.start()}},{"./appMain.js":19}],36:[function(e,t,n){"use strict";t.exports=function(){var t={};var n=e("./../bleConnections.js");var i=e("./../appMain.js");t.start=function(){i.overlayDom.innerHTML="\n      <div id='debugOverlay' class ='fullScreenSlideIn'>\n        <div id='overlayExitButton'>\n          <i class='fa fa-times driver-x-debug svg-clear' aria-hidden='true'></i>\n        </div>\n        <div id='debugLogBackground'>\n          <div id='debugLog'></div>\n        </div>\n      </div>";var e=document.getElementById("overlayExitButton");e.onclick=t.exit;t.logElement=document.getElementById("debugLog");t.updateDebug();t.log("> Hello")};t.log=function(e){t.logElement.innerHTML+=e};t.updateDebug=function(){for(var e=0;e<n.messages.length;e++){t.log(n.messages[e]+"\n")}t.timer=setTimeout(function(){t.updateDebug()},2e3)};t.exit=function(){clearTimeout(t.timer);var e=document.getElementById("debugOverlay");if(e!==null){e.className="fullScreenSlideOut"}};return t}()},{"./../appMain.js":19,"./../bleConnections.js":20}],37:[function(e,t,n){"use strict";t.exports=function(){var t={};var n=e("interact.js");var i=e("./../conductor.js");var r=e("./../appMain.js");var o=e("./../bleConnections.js");t.pastRight=0;t.pastLeft=0;t.start=function(){t.activeDivice=t.findConnectedDevice();t.buildSlider(r.overlayDom);t.updateSlider()};t.buildSlider=function(){r.overlayDom.innerHTML="\n    <div id='driverBackground' class='fullScreenSlideIn'>\n      <div class='slider sliderRight' data-value='0'></div>\n      <div class='slider sliderLeft' data-value='0'></div>\n      <div id='drive-diagnostics' class='drive-diagnostics'>\n        <h1 class='connected-brick svg-clear'>Connected Bot: -?-</h1>\n        <h1 class=\"drive-accelerometer svg-clear\">Accelerometer: 100</h1>\n        <h1 class=\"drive-compass svg-clear\">Compass: 100</h1>\n        <h1 class=\"drive-temperature svg-clear\">Temperature: 100</h1>\n        <h1 class=\"drive-encoderL svg-clear\">Left Encoder: 100</h1>\n        <h1 class=\"drive-encoderR svg-clear\">Right Encoder: 100</h1>\n      </div>\n      <div id='exitGroup' class ='exitGroup'>\n        <div id='driver-exit' class ='driver-exit'>\n          <i class='fa fa-times driver-x svg-clear' aria-hidden='true'></i>\n        </div>\n      </div>\n      <div id='stopGroup' class='stopGroup'>\n        <div id='driver-stop' class='driver-stop' text-anchor='middle'>\n          <i class='fa fa-stop driver-stop-icon svg-clear' aria-hidden='true'></i>\n        </div>\n      </div>\n    </div>\n    ";var e=document.getElementById("exitGroup");e.onclick=t.exit;t.sliderInteract("slider")};t.findConnectedDevice=function(){var e=null;r.tbe.forEachDiagramBlock(function(t){if(t.name==="identity"&&t.statusIs(3)){e=t.controllerSettings.data.deviceName}});return e};t.sliderInteract=function e(i){n("."+i).origin("self").restrict({drag:"self"}).inertia(true).draggable({max:Infinity}).on("dragmove",function(e){var i=n.getElementRect(e.target).height,r=e.pageY/i;e.target.style.paddingTop=r*7+"em";var o=100-Math.round(r.toFixed(3)*200);e.target.setAttribute("data-value",o);if(e.target.classList.contains("sliderRight")){t.displayRight=o}else if(e.target.classList.contains("sliderLeft")){t.displayLeft=o}}).on("dragend",function(e){e.target.style.paddingTop=.5*7+"em";e.target.setAttribute("data-value",0);if(e.target.classList.contains("sliderRight")){t.displayRight=0}else if(e.target.classList.contains("sliderLeft")){t.displayLeft=0}});n(".stopGroup").on("tap",function(){var e=document.getElementsByClassName("slider");e[0].style.paddingTop=.5*7+"em";e[0].setAttribute("data-value",0);e[1].style.paddingTop=.5*7+"em";e[1].setAttribute("data-value",0);t.displayRight=0;t.displayLeft=0});n.maxInteractions(Infinity)};t.updateSlider=function(){var e=t.activeDivice;if(e!==null&&e!=="-?-"){if(t.displayLeft!==undefined&&t.displayLeft!==t.pastLeft){var n="(m:1 d:"+t.displayLeft+");";i.ble.write(e,n)}if(t.displayRight!==undefined&&t.displayRight!==t.pastRight){var r="(m:2 d:"+t.displayRight+");";i.ble.write(e,r)}t.pastRight=t.displayRight;t.pastLeft=t.displayLeft}var a=document.getElementsByClassName("drive-accelerometer")[0];a.innerHTML="Accelerometer:"+o.accelerometer;var s=document.getElementsByClassName("drive-compass")[0];s.innerHTML="Compass:"+o.compass;var l=document.getElementsByClassName("drive-temperature")[0];l.innerHTML="Temperature:"+o.temp;t.timer=setTimeout(function(){t.updateSlider()},500)};t.exit=function(){clearTimeout(t.timer);var e=document.getElementById("driverBackground");if(e!==null){e.className="fullScreenSlideOut"}};return t}()},{"./../appMain.js":19,"./../bleConnections.js":20,"./../conductor.js":32,"interact.js":9}],38:[function(e,t,n){"use strict";t.exports=function(){var t={};var n=e("./../appMain.js");t.saveCamera=document.getElementById("saveCamera");t.start=function(){n.overlayDom.innerHTML="\n      <div id='fileOverlay' class ='fullScreenSlideIn'>\n        <div id='overlayExitButton'>\n          <i class='fa fa-times driver-x-debug svg-clear' aria-hidden='true'></i>\n        </div>\n        <div id='debugLogBackground'>\n          <div id='debugLog'></div>\n        </div>\n      </div>";var e=document.getElementById("overlayExitButton");e.onclick=t.exit};t.exit=function(){var e=document.getElementById("fileOverlay");if(e!==null){e.className="fullScreenSlideOut"}};t.saveFile=function(e,t){n.storage.setItem(e,t)};t.loadFile=function(e){return n.storage.getItem(e)};t.mockLocalStorage={getItem:function e(t){return null},setItem:function e(t,n){},key:function e(t){return null}};t.localStorage=function(){if(typeof window.localStorage!=="undefined"){return window.localStorage}else{return t.mockLocalStorage}};t.cameraFlash=function(){t.saveCamera.className="cameraFlash";setTimeout(function(){t.saveCamera.className="cameraIdle"},1e3)};t.snapShot=function(){};return t}()},{"./../appMain.js":19}],39:[function(e,t,n){"use strict";t.exports=function(){var e={};e.applyBackground=function(t){var n=document.createElement("div");n.setAttribute("class","debugBackground");n.setAttribute("id","debugBackground");t.appendChild(n);var i=document.createElement("div");i.setAttribute("class","debugExitGroup");i.setAttribute("id","debugExitGroup");var r=document.createElement("div");r.setAttribute("class","debug-exit");r.setAttribute("id","debug-exit");i.onclick=e.exit;i.appendChild(r);i.innerHTML+='<i class="fa fa-times driver-x-debug svg-clear" aria-hidden="true"></i>';t.appendChild(i);n=document.createElement("div");n.setAttribute("id","debugWindow");n.setAttribute("class","debugWindow");n.innerHTML='\n      <div class="debug-log" id="debug-log"></div>\n    ';t.appendChild(n)};e.startOverlay=function(t){e.applyBackground(t)};e.exit=function(){var e=document.getElementById("debugBackground");e.parentNode.removeChild(e);var t=document.getElementById("debugExitGroup");t.parentNode.removeChild(t);var n=document.getElementById("debugWindow");n.parentNode.removeChild(n)};return e}()},{}],40:[function(e,t,n){"use strict";t.exports=function(){var t={};var n=e("./../appMain.js");t.start=function(){n.overlayDom.innerHTML="\n    <div id='overlayFrame' class='fullScreenSlideIn'>\n      <div id='splashOverlay'>\n      <p class='splashTitle'>Teak blocks<p>\n      <p class='splashBody'>A block sequencing tool for simple programs.<p>\n      <br>\n      <p class='splashBody'>This site uses cookies and local storage to maintain your settings.<p>\n      <div>\n        <label class='splashBody'>\n        <input id='noLaunchSplash' type='checkbox'>\n        <span class='label-text'> Show this box at launch. </span>\n        </label>\n      <div>\n      <br>\n      <p class='splashBody'> 2017 Paul Austin and Sidharth Srinivasan. All rights reserved.<p>\n      </div>\n    </div>";var e=document.getElementById("splashOverlay");e.onclick=t.exit};t.showLaunchAboutBox=function(){var e=n.storage.getItem("teakBlockShowAboutBox");return e===null||e===true};t.exit=function(){n.storage.setItem("teakBlockShowAboutBox",false);var e=document.getElementById("overlayFrame");if(e!==null){e.className="fullScreenSlideOut"}};return t}()},{"./../appMain.js":19}],41:[function(e,t,n){"use strict";t.exports=function(){var e={};e.ns="http://www.w3.org/2000/svg";e.xlinkns="http://www.w3.org/1999/xlink";e.pathBuilder={move:function e(t,n){return"m"+t+" "+n+" "},hline:function e(t){return"h"+t+" "},vline:function e(t){return"v"+t+" "},line:function e(t,n){return"l"+t+" "+n+" "},arc:function e(t,n,i,r,o,a){var s="a"+t+" "+t+" "+n;s+=" "+i+" "+r+" "+o+" "+a+" ";return s},close:function e(){return"z "}};e.createUse=function t(n,i){var r=document.createElementNS(e.ns,"use");r.setAttribute("class",n);r.setAttributeNS(e.xlinkns,"xlink:href",i);return r};e.resizeRect=function e(t,n,i){t.setAttribute("width",String(n)+"px");t.setAttribute("height",String(i)+"px")};e.translateXY=function e(t,n,i){t.setAttribute("transform","translate ("+String(n)+" "+String(i)+")")};e.createRect=function t(n,i,r,o,a,s){var l=document.createElementNS(e.ns,"rect");l.setAttribute("class",n);l.setAttribute("x",i);l.setAttribute("y",r);this.resizeRect(l,o,a);if(s!==undefined){l.setAttribute("rx",s);l.setAttribute("ry",s)}return l};e.createCircle=function t(n,i,r,o){var a=document.createElementNS(e.ns,"circle");a.setAttribute("class",n);a.setAttribute("cx",i);a.setAttribute("cy",r);a.setAttribute("r",o);return a};e.createGroup=function t(n,i,r){var o=document.createElementNS(e.ns,"g");o.setAttribute("class",n);o.setAttribute("transform","translate ("+i+" "+r+")");return o};e.createText=function t(n,i,r,o){var a=document.createElementNS(e.ns,"text");a.setAttribute("class",n);a.setAttribute("x",i);a.setAttribute("y",r);a.textContent=o;return a};e.createPath=function t(n,i){var r=document.createElementNS(e.ns,"path");r.setAttribute("class",n);r.setAttribute("d",i);return r};return e}()},{}],42:[function(e,t,n){"use strict";t.exports=function(){var e={};e.openForm=null;e.showHide=function t(n){var i=document.getElementById(n.domId);var r=i.getAttribute("opened");if(r==="false"){this.hideOpenForm();r="true";i.style.pointerEvents="all";i.classList.remove("closed");i.classList.add("opened");e.openForm=n}else{r="false";i.style.pointerEvents="none";i.classList.remove("opened");i.classList.add("closed");e.openForm=null}if(i.showHide!==undefined){i.showHide(r==="true")}if(typeof n.onShowHide==="function"){n.onShowHide(r==="true")}i.setAttribute("opened",r)};e.hideOpenForm=function t(){if(e.openForm!==null){e.showHide(e.openForm)}};return e}()},{}],43:[function(e,t,n){"use strict";var i=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=function(){var t=e("assert");var n=e("interact.js");var r=e("./teak-forms.js");var o=e("./teaktext.js");var a=e("./svgbuilder.js");var s=e("./trashBlocks.js");var l=e("./fblock-settings.js");var u=e("./teakselection");var c=e("./actionButtons.js");var d=e("./defaultFiles.js");var f=e("./conductor.js");var p=e("./appMain.js");var h={};h.fblocks=l;h.diagramBlocks={};h.paletteBlocks={};h.blockIdSequence=100;h.currentDoc="docA";h.undoArray=[];h.currentUndoIndex=0;h.stopUndo=false;h.actionButtons=null;h.draggingSelectionArea=null;h.defaultBlockLoc=[80,240];h.forEachDiagramBlock=function(e){for(var t in h.diagramBlocks){if(h.diagramBlocks.hasOwnProperty(t)){var n=h.diagramBlocks[t];if((typeof n==="undefined"?"undefined":i(n))==="object"){e(n)}}}};h.forEachPalette=function(e){for(var t in h.paletteBlocks){if(h.paletteBlocks.hasOwnProperty(t)){var n=h.paletteBlocks[t];if((typeof n==="undefined"?"undefined":i(n))==="object"){e(n)}}}};h.forEachDiagramChain=function(e){h.forEachDiagramBlock(function(t){if(t.prev===null){e(t)}})};h.clearStates=function e(t){r.hideOpenForm();this.components.blockSettings.hide(t);h.forEachDiagramBlock(function(e){e.markSelected(false)});c.addActionButtons(h.actionButtons,h)};h.init=function e(t){this.svg=t;this.background=a.createRect("editor-background",0,0,20,20,0);this.svg.appendChild(this.background);this.configInteractions();n.maxInteractions(Infinity);this.initPaletteBox();var i=["docA","docB","docC","docD","docE"];d.default(i);var r=p.fileOverlay.loadFile("docA");if(r!==null){o.textToBlocks(h,r)}u.init(h);h.svg.onmousemove=function(){for(var e=0;e<h.actionButtons.length;e++){if(h.actionButtons[e].svgCircle.classList.contains("switch-bg")){h.actionButtons[e].svgCircle.classList.remove("switch-bg")}}};return this};h.elementToBlock=function(e){var t=e.getAttribute("interact-id");if(t===null){console.log("svg elt had no id:",e);return null}var n=t.split(":");var i=null;if(n[0]==="d"){i=this.diagramBlocks[t]}else if(n[0]==="p"){i=this.paletteBlocks[t]}if(i===undefined){i=null}if(i===null){console.log("block not found, id was <",t,">")}return i};h.clearAllBlocks=function(){h.clearStates();s(h)};h.saveCurrentDoc=function(){var e=o.blocksToText(h.forEachDiagramChain);p.fileOverlay.saveFile(h.currentDoc,e)};h.loadDoc=function(e){h.undoArray={};h.undoTransactionIndex=0;if(h.currentDoc!=="driveMode"){h.saveCurrentDoc()}if(h.currentDoc!==e){h.clearStates();h.clearDiagramBlocks();h.currentDoc=e;var t=p.fileOverlay.loadFile(e);if(t!==null){o.textToBlocks(h,t)}}};h.nextBlockId=function(e){var t=e+String(h.blockIdSequence);h.blockIdSequence+=1;return t};h.addBlock=function(e,t,n){var i=new this.FunctionBlock(e,t,n);i.isPaletteBlock=false;i.interactId=h.nextBlockId("d:");this.diagramBlocks[i.interactId]=i;return i};h.addPaletteBlock=function(e,t,n){var i=new this.FunctionBlock(e,t,n);i.isPaletteBlock=true;i.interactId=h.nextBlockId("p:");this.paletteBlocks[i.interactId]=i;return i};h.deleteChunk=function(e,t){var n=t.next;if(e.prev!==null){e.prev.next=t.next}if(t.next!==null){t.next.prev=e.prev}e.prev=null;t.next=null;var i=e.chainWidth;var r=null;if(e.flowTail===t&&!e.isGroupSelected()){h.clearStates();if(e.prev!==null){e.next.prev=e.prev}else{e.next.prev=null}e.next=null;if(t.next!==null){t.prev.next=t.next}else{t.prev.next=null}t.prev=null;delete h.diagramBlocks[e.interactId];h.svg.removeChild(e.svgGroup);e.svgGroup=null;e.svgRect=null;e.next=null;e.prev=null;delete h.diagramBlocks[t.interactId];h.svg.removeChild(t.svgGroup);t.svgGroup=null;t.svgRect=null;t.next=null;t.prev=null}else{h.clearStates();while(e!==null){r=e.next;delete h.diagramBlocks[e.interactId];h.svg.removeChild(e.svgGroup);e.svgGroup=null;e.svgRect=null;e.next=null;e.prev=null;e=r}}if(n!==null){h.animateMove(n,n.last,-i,0,10)}};h.replicateChunk=function(e,t){this.clearStates();var n=null;if(t!==undefined&&t!==null){n=t.next}var i=null;var r=null;var o=null;o=e;while(o!==n){r=new this.FunctionBlock(o.left,o.top,o.name);o.newBlock=r;if(i===null){i=r}r.controllerSettings=JSON.parse(JSON.stringify(o.controllerSettings));r.isPaletteBlock=false;r.interactId=h.nextBlockId("d:");this.diagramBlocks[r.interactId]=r;o=o.next}o=e;while(o!==n){r=o.newBlock;r.next=o.mapToNewBlock(o.next);r.prev=o.mapToNewBlock(o.prev);r.flowHead=o.mapToNewBlock(o.flowHead);r.flowTail=o.mapToNewBlock(o.flowTail);o=o.next}o=e;while(o!==n){var a=o.newBlock;o.newBlock=null;o=o.next;a.fixupChainCrossBlockSvg()}o=i;while(o!==null){o.updateSvg();o=o.next}return i};h.FunctionBlock=function e(t,n,i){this.name=i;this.funcs=l.bind(i);if(typeof this.funcs.defaultSettings==="function"){this.controllerSettings=this.funcs.defaultSettings()}else{this.controllerSettings={controller:"none",data:4}}this.prev=null;this.next=null;this.flowHead=null;this.flowTail=null;this.nesting=0;this.newBlock=null;this.dragging=false;this.snapTarget=null;this.snapOpen={top:null,left:null};this.snapAction=null;this.targetShadow=null;var r=this.controllerSettings.width;if(r===undefined){r=80}this.rect={left:0,top:0,right:r,bottom:80};this.svgGroup=a.createGroup("drag-group",0,0);this.svgRect=a.createRect("function-block",0,0,r,80,10);this.svgGroup.appendChild(this.svgRect);this.svgCustomGroup=null;this.updateSvg();this.dmove(t,n,true);h.svg.appendChild(this.svgGroup)};h.FunctionBlock.prototype.updateSvg=function(){if(this.svgCustomGroup!==null){this.svgGroup.removeChild(this.svgCustomGroup)}this.svgCustomGroup=a.createGroup("",0,0);if(typeof this.funcs.svg==="function"){this.funcs.svg(this.svgCustomGroup,this)}this.svgGroup.appendChild(this.svgCustomGroup)};h.FunctionBlock.prototype.chainContainsBlock=function(e){var t=this.first;while(t!==null){if(t===e){return true}t=t.next}return false};h.FunctionBlock.prototype.refreshNesting=function(){var e=0;var t=this.first;while(t!==null){if(t.flowTail!==null){t.nesting=e;e+=1}else if(t.flowHead!==null){e-=1;t.nesting=e}else{t.nesting=e}t=t.next}};h.FunctionBlock.prototype.fixupChainCrossBlockSvg=function(){this.refreshNesting();var e=this;while(e!==null){if(typeof e.funcs.crossBlockSvg==="function"){e.funcs.crossBlockSvg(e)}e=e.next}};Object.defineProperty(h.FunctionBlock.prototype,"first",{get:function e(){var t=this;while(t.prev!==null){t=t.prev}return t}});Object.defineProperty(h.FunctionBlock.prototype,"last",{get:function e(){var t=this;while(t.next!==null){t=t.next}return t}});Object.defineProperty(h.FunctionBlock.prototype,"chainWidth",{get:function e(){var t=this;var n=0;while(t!==null){n+=t.rect.right-t.rect.left;t=t.next}return n}});Object.defineProperty(h.FunctionBlock.prototype,"top",{get:function e(){return this.rect.top}});Object.defineProperty(h.FunctionBlock.prototype,"left",{get:function e(){return this.rect.left}});Object.defineProperty(h.FunctionBlock.prototype,"bottom",{get:function e(){return this.rect.bottom}});Object.defineProperty(h.FunctionBlock.prototype,"right",{get:function e(){return this.rect.right}});Object.defineProperty(h.FunctionBlock.prototype,"width",{get:function e(){return this.rect.right-this.rect.left}});Object.defineProperty(h.FunctionBlock.prototype,"height",{get:function e(){return this.rect.bottom-this.rect.top}});Object.defineProperty(h.FunctionBlock.prototype,"interactId",{get:function e(){return this.svgRect.getAttribute("interact-id")},set:function e(t){this.svgGroup.setAttribute("interact-id",t);this.svgRect.setAttribute("interact-id",t)}});h.FunctionBlock.prototype.mapToNewBlock=function(e){if(e===undefined||e===null){return null}else{return e.newBlock}};h.FunctionBlock.prototype.setDraggingState=function(e){if(e&&this.prev!==null){this.prev.next=null;this.prev=null}var t=this;while(t!==null){t.dragging=e;t=t.next}};h.FunctionBlock.prototype.markSelected=function(e){if(e){h.svg.removeChild(this.svgGroup);h.svg.appendChild(this.svgGroup);this.svgRect.classList.add("selectedBlock");if(this.flowHead!==null){this.flowHead.svgRect.classList.add("selectedBlock")}if(this.flowTail!==null){this.flowTail.svgRect.classList.add("selectedBlock")}}else{this.svgRect.classList.remove("selectedBlock")}};h.FunctionBlock.prototype.isSelected=function(){return this.svgRect.classList.contains("selectedBlock")};h.FunctionBlock.prototype.isLoopHead=function(){return this.flowTail!==null};h.FunctionBlock.prototype.isLoopTail=function(){return this.flowHead!==null};h.FunctionBlock.prototype.isCommented=function(){return this.svgRect.classList.contains("commented")};h.FunctionBlock.prototype.isIsolatedLoop=function(){if(this.isLoopHead()&&this.isSelected()){if(this.prev!==null&&this.prev.isSelected()){return false}else if(this.flowTail.next!==null&&this.flowTail.next.isSelected()){return false}else if(this.next!==this.flowTail&&this.next.isSelected()){return false}}if(this.isLoopTail()&&this.isSelected()){if(this.next!==null&&this.next.isSelected()){return false}else if(this.flowHead.prev!==null&&this.flowHead.prev.isSelected()){return false}else if(this.prev!==this.flowHead&&this.prev.isSelected()){return false}}if(!this.isLoopHead()&&!this.isLoopTail()){return false}if(!this.isSelected()){return false}return true};h.FunctionBlock.prototype.isGroupSelected=function(){var e=false;var t=false;if(this.next!==null){e=this.next.isSelected()}if(this.prev!==null){t=this.prev.isSelected()}if(this.isSelected()&&(e||t)){return true}return false};h.FunctionBlock.prototype.isOnScreen=function(){if(this.rect!==null){if(this.rect.left+this.width>=0&&this.rect.right-this.width<=window.innerWidth){if(this.rect.top+this.height>=0&&this.rect.bottom-this.height<=window.innerHeight){return true}}}return false};h.FunctionBlock.prototype.hilite=function(e){if(e){h.svg.appendChild(this.svgGroup)}};h.FunctionBlock.prototype.dmove=function(e,t,n,i){var r=this;if(i===undefined){i=null}while(r!==null){var o=r.rect;o.left+=e;o.top+=t;o.right+=e;o.bottom+=t;if(n){o.top=Math.round(o.top);o.left=Math.round(o.left);o.bottom=Math.round(o.bottom);o.right=Math.round(o.right)}if(r.svgGroup){a.translateXY(r.svgGroup,o.left,o.top)}if(r===i){break}r=r.next}};h.intersectingArea=function e(t,n){var i=Math.min(t.right,n.right)-Math.max(t.left,n.left);if(i<0)return 0;var r=Math.min(t.bottom,n.bottom)-Math.max(t.top,n.top);if(r<0){return 0}return i*r};h.FunctionBlock.prototype.hilitePossibleTarget=function(){var e=this;var t=null;var n=0;var i=0;var r=null;var o=null;var a=this.width;h.forEachDiagramBlock(function(r){if(r!==e&&!r.dragging){o={top:r.top,bottom:r.bottom,left:r.left-a*.5,right:r.right-a*.5};if(r.prev===null){o.left-=a*.5}if(r.next===null){o.right+=a*1.5}n=h.intersectingArea(e.rect,o);if(n>i){i=n;t=r}}});if(t!==null){if(e.left<=t.left){if(t.prev!==null){r="insert"}else{r="prepend"}}else{r="append"}}else{r="outsnap"}var s=40;var l=Math.round(this.rect.top/s)*s;var u=Math.round(this.rect.left/s)*s;if(this.snapTarget!==t||this.snapAction!==r){if(this.snapTarget!==null){this.removeTargetShadows()}this.snapTarget=t;this.snapAction=r;if(t!==null){this.insertTargetShadows(t,r)}}else if(r==="outsnap"&&(this.snapOpen.top!==l||this.snapOpen.left!==u||this.snapAction!==r)){this.removeTargetShadows();this.snapAction=r;this.snapOpen={top:l,left:u};this.insertTargetShadows(this.snapOpen,r)}return t};h.FunctionBlock.prototype.insertTargetShadows=function(e,t){var n=this;var i=e.top;var r=0;if(t==="prepend"){r=e.left-this.chainWidth}else if(t==="insert"){r=e.left-20;i-=25}else if(t==="append"){r=e.right}else if(t==="outsnap"){var o=40;r=o*Math.round(this.rect.left/o);i=o*Math.round(this.rect.top/o)}else{return}var s=null;while(n!==null){if(t==="outsnap"){s=a.createRect("shadow-block shadow-block-outsnap",r,i,n.width,n.height,10)}else{s=a.createRect("shadow-block",r,i,n.width,n.height,10)}h.svg.insertBefore(s,h.background.nextSibling);n.targetShadow=s;r+=n.width;n=n.next}};h.FunctionBlock.prototype.removeTargetShadows=function(){var e=this;var t=[];while(e!==null){var n=e.targetShadow;if(n!==null){t.push(n);if(e.snapAction==="outsnap"){n.setAttribute("class","shadow-block-leave shadow-block-leave-outsnap")}else{n.setAttribute("class","shadow-block-leave")}e.targetShadow=null}e=e.next}setTimeout(function(){t.forEach(function(e){if(e.parentNode!==null){h.svg.removeChild(e)}})},1e3);var i=document.getElementsByClassName("shadow-block");for(var r=i.length-1;r>=0;r--){i[r].parentNode.removeChild(i[r])}};h.FunctionBlock.prototype.moveToPossibleTarget=function(){var e=this.last;var n=0;var i=10;var r=0;var o=0;t(this.prev===null);t(e.next===null);if(this.snapTarget!==null&&this.targetShadow!==null){if(this.snapAction==="prepend"){t(this.snapTarget.prev===null);n=this.snapTarget.left-this.chainWidth;e.next=this.snapTarget;this.snapTarget.prev=e}else if(this.snapAction==="append"){t(this.snapTarget.next===null);n=this.snapTarget.right;this.prev=this.snapTarget;this.snapTarget.next=this}else if(this.snapAction==="insert"){t(this.snapTarget.prev!==null);n=this.snapTarget.left;var a=this.chainWidth;e.next=this.snapTarget;this.prev=this.snapTarget.prev;this.snapTarget.prev.next=this;this.snapTarget.prev=e;h.animateMove(this.snapTarget,this.snapTarget.last,a,0,10)}r=n-this.left;o=this.snapTarget.top-this.top;h.animateMove(this,e,r,o,10)}else if(this.snapOpen!==null){r=Math.round(this.snapOpen.left-this.rect.left);o=Math.round(this.snapOpen.top-this.rect.top);h.animateMove(this,e,r,o,10)}else{}this.hilite(false);this.snapTarget=null;this.snapAction=null;this.snapOpen={top:null,left:null}};h.animateMove=function(e,t,n,i,r){var o={frame:r,adx:n/r,ady:i/r,chunkStart:e,chunkEnd:t};h.animateMoveCore(o)};h.animateMoveCore=function(e){var t=e.frame;e.chunkStart.dmove(e.adx,e.ady,t===1,e.chunkEnd);e.chunkStart.fixupChainCrossBlockSvg();if(t>1){e.frame=t-1;requestAnimationFrame(function(){h.animateMoveCore(e)})}else{h.audio.playSound(h.audio.shortClick);e.chunkStart.removeTargetShadows()}};h.clearDiagramBlocks=function e(){h.internalClearDiagramBlocks();h.diagramChanged()};h.internalClearDiagramBlocks=function e(){h.forEachDiagramBlock(function(e){h.svg.removeChild(e.svgGroup);e.svgGroup=null;e.svgCustomGroup=null;e.svgRect=null;e.next=null;e.prev=null});h.diagramBlocks={}};h.findChunkStart=function e(t){var n=t;while(n.isSelected()){if(n.prev!==null&&n.prev.isSelected()){n=n.prev}else{break;
}}return n};h.findInsertionPoint=function e(){var t=null;var n=Math.round(h.defaultBlockLoc[0]);var i=Math.round(h.defaultBlockLoc[1]);h.forEachDiagramBlock(function(e){var r=e.top;var o=e.left;if(r===i&&o===n){t=e}});while(t!==null&&t.next!==null){t=t.next}return t};h.autoPlace=function e(t){var n=h.findInsertionPoint();t=h.replicateChunk(t);var i=h.defaultBlockLoc[0];var r=h.defaultBlockLoc[1];var o=Math.round(i-t.left);var a=Math.round(r-t.top);if(n===null){t.dmove(o,a)}else{t.dmove(o+n.right-i,a);n.next=t;t.prev=n}};document.body.addEventListener("keydown",function(e){e=e||window.event;var t=e.which||e.keyCode||0;var n=e.ctrlKey?e.ctrlKey:t===17;if(t===86&&n){console.log("Ctrl + V Pressed !")}else if(t===67&&n){console.log("Ctrl + C Pressed !");var i=[];h.forEachDiagramBlock(function(e){if(e.isSelected()){i.push(e)}});var r=document.createElement("textarea");r.style.position="fixed";r.style.top=0;r.style.left=0;r.style.width="2em";r.style.height="2em";r.style.padding=0;r.style.border="none";r.style.outline="none";r.style.boxShadow="none";r.style.background="transparent";if(i.length>=0){r.value=o.chunkToText(h.findChunkStart(i[0]),null,"");console.log(r);document.body.appendChild(r);r.select();try{var a=document.execCommand("copy");var s=a?"successful":"unsuccessful";console.log("Copying text command was "+s)}catch(e){console.log("Oops, unable to copy")}}document.body.removeChild(r)}else if(t===90&&n){h.undoAction()}else if(t===89&&n){h.redoAction()}else if(t===8){var l=[];h.forEachDiagramBlock(function(e){if(e.isSelected()){l.push(e)}});if(l.length!==0){h.deleteChunk(l[0],l[l.length-1])}}else if(t===49){h.loadDoc("docA")}else if(t===50){h.loadDoc("docB")}else if(t===51){h.loadDoc("docC")}else if(t===52){h.loadDoc("docD")}else if(t===53){h.loadDoc("docE")}else if(t===80){f.playAll()}else if(t===83){f.stopAll()}else if(t===88){var u=[];h.forEachDiagramBlock(function(e){if(e.isSelected()){u.push(e)}});if(u.length!==0){var c=h.replicateChunk(u[0],u[u.length-1]);var d=-140;if(c.top<140){d=140}h.animateMove(c,c.last,0,d,20)}}else if(t===32){h.clearAllBlocks()}else if(n&&t===65){var p=null;h.forEachDiagramBlock(function(e){if(e.isSelected()){p=e}});h.clearStates();while(p.next!==null){p.markSelected(true);p=p.next}while(p!==null){p.markSelected(true);p=p.prev}}},false);h.configInteractions=function e(){var t=h;n(".drag-delete").on("down",function(){var e=t.elementToBlock(event.target);if(e===null)return;t.clearStates();t.deleteChunk(e,e.last)});n(".action-dot").on("down",function(e){e.currentTarget.classList.toggle("switch-bg")}).on("up",function(e){var t=e.currentTarget.getAttribute("command");p.doCommand(t);e.currentTarget.classList.toggle("switch-bg")});n(".dropdown-buttons").on("hold",function(e){var t=e.target;var n=t.getAttribute("command");var i="";switch(n){case"loadDocA":i="docA";break;case"loadDocB":i="docB";break;case"loadDocC":i="docC";break;case"loadDocD":i="docD";break;case"loadDocE":i="docE";break;default:i="docA";break}p.fileOverlay.saveFile(i,null);d.default([i]);h.clearDiagramBlocks();h.currentDoc=i;var r=p.fileOverlay.loadFile(i);if(r!==null){o.textToBlocks(h,r)}});n(".editor-background").on("down",function(e){t.clearStates();u.startSelectionBoxDrag(e)});n(".drag-group").on("down",function(e){h.pointerDownObject=e.target}).on("tap",function(e){var n=t.elementToBlock(e.target);if(n!==null&&n.isPaletteBlock){h.autoPlace(n)}else{t.components.blockSettings.tap(n)}}).on("up",function(e){var n=t.elementToBlock(e.target);if(n.rect.top>window.innerHeight-100&&!n.isPaletteBlock){e.interaction.stop();n.setDraggingState(false);if(n.isLoopHead()){n.next.markSelected(true);n.markSelected(true);h.deleteChunk(n,n.last)}else if(n.isLoopTail()){h.deleteChunk(n.flowHead,n.last)}else{h.deleteChunk(n,n.last)}}}).on("hold",function(e){var n=t.elementToBlock(e.target);e.interaction.stop();if(n.isPaletteBlock){return}}).on("move",function(e){var n=e.interaction;var i=t.elementToBlock(e.target);if(i.name==="tail"){i=i.flowHead}if(n.pointerIsDown&&!n.interacting()){if(h.pointerDownObject===e.target){i=h.findChunkStart(i);var r=i.svgGroup;var o=i.next!==null&&i.prev!==null;var a=i;var s=i;var l={};if(i.nesting>0&&o&&!i.isGroupSelected()){a=i.next;s=i.prev;i.next.prev=s;i.prev.next=a;i.next=null;i.prev=null;if(a!==null){h.animateMove(a,a.last,-i.width,0,10)}}else if(i.nesting>0&&o&&i.isGroupSelected()){a=i;s=i.prev;while(a.next!==null&&a.next.isSelected()){a=a.next}var u=a.next;a.next.prev=s;s.next=a.next;a.next=null;i.prev=null;if(a!==null){h.animateMove(u,u.last,-i.chainWidth,0,10)}}if(i.isPaletteBlock||e.shiftKey){i=t.replicateChunk(i);r=i.svgGroup}i.setDraggingState(true);h.clearStates();n.start({name:"drag"},e.interactable,r)}}else{h.pointerDownObject=null}}).draggable({manualStart:true,restrict:{restriction:t.svg,endOnly:true,elementRect:{left:-.2,top:-.2,right:1.2,bottom:2.4}},inertia:{resistance:20,minSpeed:50,endSpeed:1},max:Infinity,onstart:function e(){},onend:function e(n){var i=t.elementToBlock(n.target);if(i===null)return;if(i.dragging){i.moveToPossibleTarget();i.setDraggingState(false)}setTimeout(t.diagramChanged(),500)},onmove:function e(n){var i=t.elementToBlock(n.target);if(i===null)return;if(!i.dragging){return}var r=i;while(r!==null){h.svg.appendChild(r.svgGroup);r=r.next}i.dmove(n.dx,n.dy,true);var o=i.hilitePossibleTarget();if(o!==null){var a=n.interaction.inertiaStatus;if(a!==undefined&&a!==null&&a.active){i.moveToPossibleTarget();i.setDraggingState(false)}}}})};h.undoArray[0]=o.blocksToText(h.forEachDiagramChain);h.diagramChanged=function e(){var t=o.blocksToText(h.forEachDiagramChain);if(h.undoArray[h.currentUndoIndex]!==t){h.currentUndoIndex+=1;h.undoArray[h.currentUndoIndex]=t;if(h.currentUndoIndex<h.undoArray.length-1){var n=[];for(var i=0;i<=h.currentUndoIndex;i++){n[i]=h.undoArray[i]}h.undoArray=n}}if(h.currentUndoIndex<0){h.currentUndoIndex=0}};h.blocksOnScreen=function(){var e=false;h.forEachDiagramBlock(function(t){if(t.isOnScreen()){e=true}});if(Object.keys(h.diagramBlocks).length===0){return false}return e};h.undoAction=function(){h.clearStates(undefined,false);if(h.currentUndoIndex>0){h.internalClearDiagramBlocks();h.currentUndoIndex-=1}if(h.undoArray[h.currentUndoIndex]!==undefined){o.textToBlocks(h,h.undoArray[h.currentUndoIndex].toString())}};h.redoAction=function(){if(h.currentUndoIndex<h.undoArray.length-1){h.internalClearDiagramBlocks();h.currentUndoIndex+=1;if(h.undoArray[h.currentUndoIndex]!==undefined){o.textToBlocks(h,h.undoArray[h.currentUndoIndex].toString())}}};h.buildSvgTabs=function e(){};h.sizePaletteToWindow=function e(){var t=window.innerWidth;var n=window.innerHeight;a.translateXY(h.dropAreaGroup,0,n-100);a.resizeRect(h.dropArea,t,100);a.resizeRect(h.background,t,n);h.windowRect={left:0,top:0,right:t,bottom:n};var i=n-90;h.forEachPalette(function(e){e.dmove(0,i-e.top,true)})};h.initPaletteBox=function e(){document.body.onresize=this.sizePaletteToWindow;this.dropAreaGroup=a.createGroup("",0,0);this.dropArea=a.createRect("dropArea",0,0,window.innerWidth,100,0);this.dropAreaGroup.appendChild(this.dropArea);this.svg.appendChild(this.dropAreaGroup);this.tabs=[];this.sizePaletteToWindow()};h.updateScreenSizes=function(){h.sizePaletteToWindow();c.addActionButtons(h.actionButtons,h)};h.addPalette=function e(t){this.tabs.push(t);var n=10;var i=t.blocks;var r=window.innerHeight-90;for(var o in i){if(i.hasOwnProperty(o)){var a=this.addPaletteBlock(n,r,o);if(o==="loop"){var s=this.addPaletteBlock(a.right,r,"tail");a.next=s;s.prev=a;a.flowTail=s;s.flowHead=a;s.fixupChainCrossBlockSvg()}n+=a.chainWidth+10}}};return h}()},{"./actionButtons.js":17,"./appMain.js":19,"./conductor.js":32,"./defaultFiles.js":33,"./fblock-settings.js":34,"./svgbuilder.js":41,"./teak-forms.js":42,"./teakselection":44,"./teaktext.js":45,"./trashBlocks.js":46,assert:1,"interact.js":9}],44:[function(e,t,n){"use strict";t.exports=function(){var t=e("interact.js");var n=e("./svgbuilder.js");var i={};var r=20;i.selectionSvg=null;i.currentChain=null;i.init=function(e){i.tbe=e;i.interactable=t(".selection-rect").draggable({manualStart:true,max:Infinity,onstart:function e(t){i.x0=t.clientX;i.y0=t.clientY;n.translateXY(i.selectionSvg,t.clientX,t.clientY);i.currentChain=null},onend:function t(){e.svg.removeChild(i.selectionSvg);i.selectionSvg=null;i.currentChain=null},onmove:function t(o){var a=0;var s=0;var l=0;var u=0;if(o.clientX<i.x0){a=o.clientX;l=i.x0-o.clientX}else{a=i.x0;l=o.clientX-i.x0}if(o.clientY<i.y0){s=o.clientY;u=i.y0-o.clientY}else{s=i.y0;u=o.clientY-i.y0}l+=r;u+=r;n.translateXY(i.selectionSvg,a,s);n.resizeRect(i.selectionSvg,l,u);var c={left:a,top:s,right:a+l,bottom:s+u};i.checkForSelectedBlocks(c,e)}})};i.startSelectionBoxDrag=function(e){if(i.selectionSvg!==null)return;var t=-r/2;i.selectionSvg=n.createRect("selection-rect",t,t,r,r,5);i.tbe.svg.insertBefore(i.selectionSvg,i.tbe.background.nextSibling);e.interaction.start({name:"drag"},i.interactable,i.selectionSvg)};i.checkForSelectedBlocks=function(e,t){var n=[];t.forEachDiagramBlock(function(i){if(t.intersectingArea(e,i.rect)>0){n.push(i);var r=i;if(i.isLoopHead()){while(r!==null&&!r.isLoopTail()){n.push(r);r=r.next}}else if(i.isLoopTail()){while(r!==null&&!r.isLoopHead()){n.push(r);r=r.prev}}}});if(n.length===0){i.currentChain=null;n=[]}else if(i.currentChain===null){i.currentChain=t.findChunkStart(n[0])}t.forEachDiagramBlock(function(e){if(n.includes(e)&&i.currentChain.chainContainsBlock(e)){e.markSelected(true)}else if(e.flowHead!==null&&!n.includes(e.flowHead)){e.markSelected(false)}else if(e.flowHead===null){e.markSelected(false)}})};return i}()},{"./svgbuilder.js":41,"interact.js":9}],45:[function(e,t,n){"use strict";t.exports=function(){var t={};var n=e("teak");t.blocksToText=function(e){var n="(\n";var i="  ";e(function(e){n+=i+"(chain";n+=" x:"+e.left+" y:"+e.top+" (\n";n+=t.chunkToText(e,null,i+"  ");n+=i+"))\n"});n+=")\n";return n};t.chunkToText=function(e,n,i){var r=e;var o="";while(r!==n){o+=i+"("+r.name;if(r.controllerSettings!==null){o+=" "+t.blockParamsToText(r.controllerSettings.data)}if(r.flowTail!==null){o+=" (\n";o+=t.chunkToText(r.next,r.flowTail,i+"  ");r=r.flowTail;o+=i+")"}o+=")\n";r=r.next}return o};t.blockParamsToText=function e(t){var n="";var i="";for(var r in t){var o=t[r];n+=i+r+":"+this.valueToText(o);i=" "}return n};t.valueToText=function(e){var t="";if(e.constructor===Array){var n="";var i=0;t="(";for(i=0;i<e.length;i+=1){t+=n+this.valueToText(e[i]);n=" "}t+=")"}else if(typeof e==="string"){t="'"+String(e)+"'"}else{t=String(e)}return t};t.textToBlocks=function(e,i){console.log("new loader");var r={};var o=n.parse(i,r,function(e){return e});t.loadJsoTeak(e,o)};t.loadJsoTeak=function(e,n){console.log(" loadJSO",n);if(Array.isArray(n)){var i=0;for(i=0;i<n.length;i++){var r=n[i];if(r._0!=="chain"){console.log(" unrecognized chain section");return}else{var o=r.x;var a=r.y;var s=r._3;console.log(" TJDO",r,o,a);var l=t.loadJsoTeakBlocks(e,s,o,a,null);var u=l;while(u!==null){u.updateSvg();u=u.next}l.fixupChainCrossBlockSvg()}}}else{console.log(" unrecognized teak file");return}};t.loadJsoTeakBlocks=function(e,t,n,i,r){var o=1;var a=null;for(o=0;o<t.length;o++){var s=t[o]._0;var l=e.addBlock(n,i,s);if(a===null){a=l}if(r!==null){r.next=l;l.prev=r}if(s==="loop"){r=this.loadLoop(e,l,t[o])}else{this.loadBlockDetails(l,t[o]);r=l}n=r.right}return a};t.loadLoop=function(e,n,i){var r=i._2;var o=n.right;var a=n.top;var s=t.loadJsoTeakBlocks(e,r,o,a,n);var l=null;if(s!==null){var u=s.last;l=u}else{l=n}o=l.right;var c=e.addBlock(o,a,"tail");l.next=c;c.prev=l;n.flowTail=c;c.flowHead=n;return c};t.loadBlockDetails=function(e,t){for(var n in t){if(t.hasOwnProperty(n)){if(n!=="_0"){e.controllerSettings.data[n]=t[n]}}}};return t}()},{teak:13}],46:[function(e,t,n){"use strict";t.exports=function(){function e(t,n){if(t[0]===undefined){var i=t.animateState.frame;t.dmove(t.animateState.adx,t.animateState.ady,i===1,t);t.animateState.count+=1;if(n.blocksOnScreen()&&i>0){t.animateState.frame=i-1;requestAnimationFrame(function(){e(t,n)})}else{n.clearDiagramBlocks()}}}function t(t){t.forEachDiagramBlock(function(e){var t=100;var n=e.left-window.innerWidth/2;var i=e.top-window.innerHeight/2;var r=Math.sqrt(n*n+i*i);var o=n/r*8;var a=i/r*8;e.animateState={adx:o,ady:a,frame:t,count:0}});t.audio.playSound(t.audio.poof);t.forEachDiagramBlock(function(n){e(n,t)})}return t}()},{}]},{},[35]);
